{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./tab-utils/ads/slots.ts","webpack:///./views/TimerPage/js/notify/glockenklang.ogg","webpack:///./.build/.goldpage/generated-source-code/browser-entries/views/TimerPage/timer.page.js.browser-entry.js","webpack:///./tab-utils/TabSettings/SettingsView.js","webpack:///./views/TimerPage/js/preset_concept_name.js","webpack:///./views/TimerPage/adSlots.ts","webpack:///./tab-utils/ads/views.tsx","webpack:///./views/TimerPage/TimerView.js","webpack:///./views/TimerPage/js/ml.js","webpack:///./tab-utils/AsyncState.ts","webpack:///./views/TimerPage/js/notify/youtubeAlarm.ts","webpack:///./views/TimerPage/js/notify/index.ts","webpack:///./views/TimerPage/js/notify/audioAlarm.ts","webpack:///./tab-utils/sleep.ts","webpack:///./tab-utils/utils/datetime.tsx","webpack:///./views/TimerPage/js/countdown.js","webpack:///./views/TimerPage/js/load_timer.js","webpack:///./tab-utils/TabSettings/load_font.js","webpack:///./tab-utils/TabSettings/load_asap.js","webpack:///./tab-utils/TabSettings/load_font_list.js","webpack:///./tab-utils/TabSettings/set_background/set_background.ts","webpack:///./tab-utils/private/remove_hash.js","webpack:///./tab-utils/auto_remove_hash.js","webpack:///./tab-utils/TabSettings/PersistantInput.ts","webpack:///./tab-utils/utils/escape_html.ts","webpack:///./tab-utils/TabSettings/migrations/rename_keys_and_values.js","webpack:///./tab-utils/TabSettings/migrations/001-ancient-schema.js","webpack:///./tab-utils/TabSettings/migrations/migrate_user_presets.js","webpack:///./tab-utils/TabSettings/migrations/002-migrate-user-preset-ids-and-values.js","webpack:///./tab-utils/TabSettings/migrations/003-migrate-subapp-id.js","webpack:///./tab-utils/TabSettings/migrations/004-migrate-old-timer-tab-schema.js","webpack:///./tab-utils/TabSettings/migrations/005-migrate-to-centralized-store.ts","webpack:///./tab-utils/TabSettings/TabSettings.ts","webpack:///./tab-utils/TabSettings/run_migrations.ts","webpack:///./views/TimerPage/PRESETS.ts","webpack:///./views/TimerPage/init_timer_settings.ts","webpack:///./views/TimerPage/onPageLoad.js","webpack:///./views/TimerPage/timer.page.js","webpack:///./tab-utils/ads/ezoic.ts","webpack:///./tab-utils/loadScript.ts","webpack:///./tab-utils/ads/loadAds.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","23","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","getEzoicSlot","slot_name","ad_slots","ezoic_slots","getEzoicSlots","filter","slot","slot_id","getGptSlot","slotName","adSlots","slots","getGptSlots","getAdsenseSlotId","adsense_slots","getAdsenseSlots","AD_SLOTS","isEzoicSlot","isAdsenseSlot","isGptSlot","isGpt","len","isEzoic","isAdsense","adSlot","browserConfig","require","initFunctions","ret","pageConfig","SettingsView","preset_concept_name","className","id","is_ezoic","is_floating","_extends","assign","target","arguments","source","this","Ad_left","_ref","slot_left_atf","get_left_slot","slot_left_btf","createElement","content","adsense_id","AdSenseAd","gptSlot","GptAd","ezoic_slot","ezoic_id","EzoicAd","undefined","includes","Ad_btf_2","_ref2","slot_content","auto_sizing","_ref3","startsWith","_ref4","style","width","slotSize","height","_ref5","_ref5$auto_sizing","props","TimerView","backgroundColor","FullViewContent","position","type","autoComplete","spellCheck","min","size","defaultValue","placeholder","form","tabIndex","max","maxLength","display","zIndex","visibility","verticalAlign","textAlign","href","ml","faviconEl","date","readablize","str","constructor","String","parseInt","weekday","Array","month","getWeek","that","dowOffset","newYear","Date","getFullYear","day","getDay","weeknum","daynum","Math","floor","getTime","getTimezoneOffset","nYear","nday","add","h","ms","newMs","getMilliseconds","newS","getSeconds","newM","getMinutes","newH","getHours","setHours","setUTCDate","getUTCDate","getDayBegining","getMonth","getDate","readable","twelveClock","withPeriod","assert","Boolean","diff","MID_DAY","isPm","getCounter","preset","PRESETS","text","countdown","alarmclock","periodclock","format","digits","match","map","substring","optional","indexOf","replace","RegExp","join","getDateRelative","verbose","todayEnd","setMinutes","setSeconds","setMilliseconds","daysAgo","months","years","element","getStyle","styleProp","document","defaultView","getComputedStyle","getPropertyValue","removeFromDOM","parentElement","removeChild","insertToDom","newEl","appendTo","hook","appendChild","prependTo","firstChild","insertBefore","childs","getDummy","tagName","dummy","top","getData","el","possibleChars","minTextLength","dummyContent","getAttribute","innerHTML","children","widestChar","chars","widestSize","body","charWidth","getWidestChar","dummyTextLength","fontFamily","fontSize","DUMMY_SIZE","whiteSpace","letterSpacing","width_dummy","height_dummy","ratio","Infinity","boxSizingPropName","adjustFontSize","noHeight","isInsideATable","getSize","prop","oldInnerHTML","oldDataText","removeAttribute","setAttribute","getTextSize","w","showBrowserHint","additionalText","browserDetect","init","browser","searchString","dataBrowser","version","searchVersion","navigator","userAgent","appVersion","dataString","string","dataProp","versionSearchString","versionSearch","identity","subString","index","parseFloat","vendor","opera","dataOS","platform","instruction","out","print","obj","log","JSON","stringify","printStack","Error","stack","bool","msg","skipCallFcts","errorStack","errorStr","usesGecko","fctLine","exec","split","toString","location","hostname","alert","setTimeout","addHashListener","fct","runOnInit","onhashchange","addEventListener","actualHash","hash","addTactFct","controlKeyPressed","ev","ctrlKey","altKey","metaKey","changeIcon","url","createNewEl","REL","oldlinks","getElementsByTagName","rel","toLowerCase","head","canvasIcon","ctxTsf","canvas","ctx","getContext","toDataURL","timeIcon","scale","color","fillStyle","font","fillText","doneIcon","color1","color2","clearRect","lingrad","createLinearGradient","addColorStop","beginPath","delta","p1","p2","p3","p4","p5","p6","p7","p6a","p8","p3a","p3b","moveTo","lineTo","quadraticCurveTo","fill","cssS","els","listeners","lang","cache__colorImageUrls","getColorImageURL","fillRect","timerIcon","percent","abs","minutes","minutesOnBot","bot","borderPos","circleIcon","imgs","offset","dim","cX","cY","angle","PI","X","cos","Y","sin","drawImage","makeIconCircle","dooityRandColor","gray","to_str","COLORS","candidates","getOne","random","do_","undim","getUrlVars","vars","hashes","deleteCookies","cookie","e","substr","loadASAP","onsuccess","isCSS","test","srcName","alreadyLoading","loadListeners","loaded","attempts","loader","onerror","pow","onload","forEach","addCss","useCache","fileref","createTextNode","UA","isBot","usesWebkit","isSafari","isWindows","isMac","isOpera","escapeHTML","html","matchStr","setLoader","strokeStyle","lineWidth","frame","begin","end","arc","stroke","draw","getEventSource","srcElement","nodeType","parentNode","isChildOf","child","parent_","getChar","event","10","13","32","37","38","39","40","43","45","47","48","49","50","51","52","53","54","55","56","57","63","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","666","mlKeyCode","charCode","keyCode","27","96","187","189","reqFrame","f","lastReq","req","cancel","safe_call","args","asyncStore","onChange","changeListeners","CS","set","val","callback","clear","changes","keys","addChangeListener","listener","changedKeys","getPersistedObject","retrieve","parse","put","timeout","newChangedKeys","concat","clearTimeout","newRet","optionInput","default_","opts","isListInput","isBinaryInput","isColorInput","isTextInput","possibleValues","lastTimeout","getElementById","evName","newVal","oldVal","htmlBackgroundListener","setBg","BG_EL","documentElement","LOAD_IMG","img","setCss","backgroundImage","newUrl","imgEl","src","getElementByIdStatic","isTouchDevice","isExtensionBackground","isPackagedApp","isPackagedBackground","hasWindow","chrome","app","current","isExtension","addCloseEvent","addResizeTimeoutEvent","delay","preListener","replaceWebApp","parent","iframe_","loadAnalytics","useSSL","ga","_gaq","async","protocol","i18n","fallback","userLanguage","language","langs","some","isAMPMTime","noti","_noti","_init","webkitNotifications","checkPermission","permission_notAllowed","permission_denied","manualUnblockMsg","origin","permission_req","requestPermission","fire","text1","text2","icon","onshow","onclick","__noti","createNotification","ondisplay","show","Notification","permission","dir","iconUrl","close","isAvailable","txt1","txt2","displayTime","_close","_typeof","iterator","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","AsyncState","initialState","update","instance","Constructor","TypeError","_classCallCheck","state","runUpdate","deepFreeze","propNames","getOwnPropertyNames","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","err","freeze","stateObject","Proxy","_","updatePromise","lastUpdateNumber","fn","updateNumber","regeneratorRuntime","mark","_callee","isNotLastUpdate","wrap","_context","prev","abrupt","stop","self","lastPrefetch","loadedVideoId","player__loaded","player__promise","stateChanges","isStarted","youtubeUrl","prefetchEnabled","_x2","_stop","_x3","_prefetch","prefetch","_x","_start","start","youtubeStart","youtubeStop","youtubeNoUrl","youtubeSetUrl","youtubePrefetch","player","debugLog","load_player","sent","playerStart","querySelector","classList","loadVideo","unMute","_callee2","_context2","remove","playerStop","mute","_callee3","_context3","_parse_youtube_url","video_id","matches","url_to_id","video_start","video_repeat","parse_youtube_url","loadVideoById","videoId","startSeconds","seekTo","playVideo","_load_player","_callee5","_context5","onYouTubeIframeAPIReady","_callee4","_context4","YT","Player","events","onReady","onStateChange","playerVars","controls","modestbranding","load_script","time","toTimeString","youtubeIsPlaying","stateChange","scriptEl","promise","audio_tag","_update","audioStart","failed","install_audio_tag","muted","currentTime","play","t0","console","warn","pause","audioPrefetch","preload","load","source_tag","onended","ALARM_DURATION_SECONDS","loop","sleep","seconds","milliseconds","noYoutube","ytIsPlaying","display_time","_ref$military_format","military_format","fromJSDate","Number","fromMillis","toFormat","ctObj","TYPES","STOPW","TIMER","ALARM","input","inputForm","_type","_timer","_onInputsChange","_setInputs","_getCountdownEnd","nodeName","_callback","__getInputs","__setInputs","__isAMPM","__setInputChangeListener","changeListener","fireCallback","input_number","input_all","__onInputsChange","screen","loadCallback","querySelectorAll","container","wheel","$","mobiscroll","theme","timeFormat","timeWheels","rows","vals","_generateInput","isNaN","period","input_period","loadDom","_inputChangeListener","oldVals","noOnChange","newVals","___getInputs","inputs","MAX_COUNTDOWN","setDate","getPreset","hours","__inputs","setPreset","_onLoaded","onsubmit","preventDefault","onStart","submitListeners","Timer_dom","Timer_js","listen","trigger","STATE_CODES","triggerStateChangeEvent","action","dataChange","operation","triggerEndChangeEvent","newEnd","oldEnd","endChange","STOPED","PAUSED","PLAYING","RINGING","__start","__end","__paused","paused","getDiff","ct_date","isNotStoped","isPaused","getDelta","ceil","getPercent","progress_total","progress_current","res","isCountdown","init__","heartbeat","start__","stop__","ensurePause","togglePause","toggleStop","lastDiff","lastStarted","sparking","reset","countdown_","diff_","spark","kill","lastIconURL","_onCountdown","onPopupClick","feature_fcts","NO_DYNAMIC_FAVICONS","NOTI_TEXT","NOTI_TEXT_2","notis","notify","v","reduce","v1","v2","popupNotification","timerName","cancelFct","popupNotificationCancel","_onPopupClick","ring","play_","lastState","onTimesUp","state_","tab","iconURL","postText","newTitle","title","alarm","initialType","thisTimer","dom","state_notifier","interface_","setAlarmTime","_end","__type","alarmTime","isAMPM","setText","lastText","sizeIt","counter","newText","noFontSizeAdjusting","doIt","ct__","onCountdown","start_","stop_","__newState","getName","onDataChange","makeTabTimer","disconnect","perc","noNotification","youtube_wrapper","ctInput","timerEnd","pauseBtn","moduleName","dependancies","Function","isTime","__data","__onDataChange","ctInterfaces_cache","ctInterfaces","ctInterfacesArr","_ret","onRetrieved","retrieved","onExtChange","used_version","__id","OPERATIONS","getCt","corEx","getCreationTime","_save","newOrRemove","creationTime","ids","getTags","getType","setType","ct","setName","setTags","getState","setState","lastHis","oldStart","oldPause","addHistory","op","getHistory","setMods","mods","hisTs","mod_ts","removed","fake","getMods","mod","Countdown","ids_sorted","sort","parseData","data2timerObj","timerData","cumulatedData","initState","timerDom","newData","history","save","expired","removeData","timers","all","newTimer","setChangeListener","load_timer","ALARM_FORM","TIMER_FORM","STOPW_FORM","PAUSE_ELEM","ALARM_TIME","postInitListeners","STOPW_BUTTON","INPUTS_ALL","DEFAULT_FOCUS","TIME_EL","ALL_CONTENT_EL","COUNTER_EL","MutationObserver","observe","attributes","attributeFilter","click","popup","nums","num","getSelection","INPUTS__","activeElement","selectionStart","selectionEnd","toggleEl","containerEl","scaleEl","zoomEl","make_element_zoomable","lastTime","setTime","which","upDown","char_","up","onkeydown","targetType","KEYEVENT","formEl","left","right","focus","onkeyup","ctrls","lastFocus","onfocus","regainFocus","scroll_perserving_focus","is_zoomed","on_zoom_end","b","detail","stopImmediatePropagation","languageText","address","youtube","image","autoZoom","overflow","zoomCoeffizient","innerWidth","scrollWidth","innerHeight","scrollHeight","zoom","a","orgHeight","manual100PercHeight","firstInit","initTimer","timer_","name_el","newState","toStart","wontwork","currentTimer","retrieveNinitTimer","retTimer","hashInput","sp","_preset","idS","setShowed","showed","preventScroll","load_font","font_name","do_it","WebFont","get_font_spec","fontactive","fontinactive","custom","families","urls","google","load_font_list","resolve_promise","resp","message","font_list","family","script","load_asap","bg_container_selector_","_set_background","color_code","image_uri","bg_container_selector","is_outdated","bg_img_val","get_is_outdated","load_image","show_loader","apply_color","apply_image","_x4","_x5","_load_image","on_load","on_error","set_loader_indicator","image_val","bg_container","bg_container_","el1","el2","backgroundSize","prepend","call_number","remove_hash","pushState","pathname","search","auto_remove_hash","IGNORE_LIST","INCLUDE_LIST","check","isEmptyHash","passive","capture","endsWith","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","_get","receiver","Reflect","base","_getPrototypeOf","_superPropBase","desc","getOwnPropertyDescriptor","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","writable","configurable","_setPrototypeOf","enumerableOnly","symbols","sym","_defineProperties","descriptor","_createClass","protoProps","staticProps","_classPrivateFieldLooseBase","privateKey","_classPrivateFieldLooseKey","PersistantInput","_props","_input_id","_on_input_change","_input_default","_storage_key","input_tag","input_type","_dom_el","_input_el","input_id","on_input_change","input_default","_input_retriever","store","has_val","get_val","set_val","set_stored_value","_input_modifier","_this","_generate_input","input_description","input_width","input_container","dom_el","description_el","input_el","textContent","generate_input","getOwnPropertyDescriptors","defineProperties","_init_dom","init_val","has_stored_value","get_stored_value","_change_event","hide_show_el","BooleanInput","_PersistantInput","_this2","checked","TextInput","_PersistantInput2","_this3","input_placeholder","_PersistantInput3","SelectInput","_this4","input_options","divider_html","_this5","option_arg","_generate_option_html","new_options","_this6","current_value","current_option_values","from","_parse_option_arg","get_divider","_this$_parse_option_a","val_pretty","_PersistantInput4","DateInput","_getPrototypeOf2","_this7","_len","_key","enableTime","ColorInput","_PersistantInput5","_this8","Button","on_click","_ref2$className","_this9","to_hide","rename_keys_and_values","key_replacements","value_replacements","db","has_changes","entries","localStorage","migrate_ancient_schema","bg_image","bg_color","font_shadow","color_font","font_size","clock_theme","migrate_user_presets","migrator","presets__storage_key","presets__string","presets","presets__string__updated","migrate_user_preset_ids_and_values","preset_name","preset_id","preset_options","preset_values","migrate_subapp_id","app_name","subapp_id","migrate_old_timer_tab_schema","bg_url","goto_url","arr","isArray","_arr","_n","_d","_e","_s","_i","migrate_to_centralized_store","removeItem","migrate__rename_keys","_toConsumableArray","arr2","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","schema_version","migrators","schema_version__curent","get_schema_version","set_schema_version","run_migrations","TabSettings","option_spec_list","preset_spec_list","_ref$text_container","text_container","_ref$no_random_preset","no_random_preset","on_any_change","_ref$on_font_change","on_font_change","enable_import_export","creator_content","options_content","options_container","save_content","save_container","share_content","share_container","preset_list","option_list","resolve_font_loaded_promise","font_loaded_promise","button_mod","button_del","name_option","button_url","_global_side_effects__timeout","_previous_link","_link_el","_font_list_already_loading","_ref11","tab_settings","hasTextFontInput","find","option_type","hasTextShadowInput","hasTextColorInput","_ref12","option_spec","option_id","TextColorOption","TextShadowOption","BackgroundImageOption","BackgroundColorOption","ChoiceOption","_load_font_list2","_update_font","opt","generate_dom","generate_import_export_dom","global_side_effects","is_initial_run","btn","modify_preset","_btn","delete_preset","option_description","option_default","_btn2","save_created_preset","preset_selected","is_creator_preset","input_value","from_name_to_id","get_preset_by_name","can_be_null","error_msg","option","is_creator_option","preset_val","new_preset","SavedPreset","save_preset","select_preset","reset_creator","active_preset","is_real_preset","_loop","opt_id","opt_val","find_option","set_input_value","select_preset_creator","new_preset_id","generate_unique_preset_id_copy","copy_to_creator","from_id_to_name","is_saved_preset","remove_preset","_ref5$is_initial_run","run_side_effects","requestAnimationFrame","update_background","update_font","update_option_visibility","update_button_visibility","update_share_link","update_save_block","load_preset_from_url","track_user_presets","set_options_container_visibility","every","is_preset_selector","current_link","share_link","preset_url","preset_data","from_url","preset_conflict","show_toast","current_backgroud_image","current_backgroud_color","get_font_name","current_font_name","load_text_font","dep_option_id","option_dependency","hide","is_randomizer_preset","font_option","t1","t2","t3","t4","t5","add_fonts","creator_preset","active_value","is_background_image_option","background_image_option","is_background_color_option","background_color_option","is_font_option","random_preset","preset_thing","FakePreset","preset_option","default_preset_id","Option","_ref6","_ref6$is_creator_opti","input_args","user_input","before_dom","input_set","input_get","get_preset_value","preset_value","_Option","DateOption","_Option2","BooleanOption","_this10","_Option3","SelectOption","_this11","add_options","_SelectOption","_ref7","option_choices","_Option4","TextOption","_this12","option_placeholder","_Option5","ColorOption","_this13","_ColorOption","_TextOption","_SelectOption2","PresetOption","_ref8","_this14","get_input_options","refresh","_this$tab_settings$pr","presets_ordered","special_ones","saved_ones","native_ones","_ref9","_TextOption2","_this15","_ColorOption2","_getPrototypeOf3","_this16","_len2","_key2","_SelectOption3","FontOption","_ref10","_this17","input_optoins","get_all_preset_fonts","_load_text_font","_ref21","PresetList","_ref13","_preset_savior","_native_presets","randomizer_preset","CreatorPreset","_ref14","_ref15","refresh_user_input","get_saved_presets","_ref16","_ref17","_ref17$can_be_null","_get_all_presets","_this$presets_ordered","preset_font_names","preset_font_name","Set","preset_ids","_get_all_preset_ids","white_space_seralized","_i2","candidate","_this$presets_ordered2","_this$presets_ordered3","_get_saved_presets","PresetSerializer","preset_string","Preset","_ref18","prettified","_Preset","_getPrototypeOf4","_this18","_len3","_key3","_generated_link","to_url","_Preset2","NativePreset","_this19","PresetData","rest","PresetValues","PresetSavior","_ref19","_subapp_id","_get_presets","warning","_save_presets","old_length","new_length","_FakePreset","RandomizerPreset","_ref20","_this20","_picked","random_candidates","pick_random_preset","_FakePreset2","_getPrototypeOf5","_this21","_len4","_key4","NameIdConverter","sep_regex","word","toUpperCase","LinkSerializer","str__base64","btoa","atob","serialize_preset","preset_base64","_to_base64","url_base","name_encoded","encodeURIComponent","pipe_data","_from_base64","deserialize_preset","is_error","classic","timer_background_color","timer_youtube_alarm","dark","timer_background_image","miami_night","the_machine","init_timer_settings","youtube_url","get_option_value","onPageLoad","load_common","loadAds","config","route","view","disable_ezoic","expires","_asyncToGenerator","loadScript","_loadScript","scriptUrl","scriptName","alreadyResolved","hasTimedOut","trackLoadState","LOAD_TIMEOUT","success","resolved","loadState","_user_donated","_ad_blocker_is_installed","_loadAds","noAds","dont_show_ads","loadAdsenseCode","loadAdsense","loadGpt","enable_floating_ads","SHOW_DELAY","disableAds","_loadGpt","gptSlots","googletag","cmd","adName","defineSlot","addService","pubads","enableSingleRequest","enableServices","_loadAdsense","adsenseSlots","adsbygoogle","_loadAdsenseCode","user_donated","is_nodejs","browser_name","disableReason","get_screen_size","ad_blocker_test","pointerEvents","offsetHeight","ad_blocker_detected","is_too_many_visits","trackDisableReason","_window$screen","isInteger","positionTopOriginal","positionOriginal","topOriginal","leftOriginal","oldPosition","isFixedLayout","scrollPos","_getElementScrollPos","positionLeft","positionTop","newPosition","fireInitialScroll","onlyUserScroll","donated","initAds"],"mappings":"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","file":"views/TimerPage/timer.page.js.hash_1e942b7792530cecd1ef.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t23: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([483,1,21,0,3]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\"use strict\";\n\nimport assert from \"@brillout/assert\";\nexport { getGptSlot, getEzoicSlot, getAdsenseSlotId, isAdsense, isEzoic, isGpt, getGptSlots, getAdsenseSlots };\n\nfunction getEzoicSlot(slot_name, ad_slots) {\n  var ezoic_slots = getEzoicSlots(ad_slots).filter(function (slot) {\n    assert(slot_name);\n    assert(slot.slot_name);\n    return slot.slot_name === slot_name;\n  });\n  assert(ezoic_slots.length <= 1);\n  var slot = ezoic_slots[0];\n  if (!slot) return null;\n  var slot_id = slot.slot_id;\n  assert(slot_id);\n  return slot;\n}\n\nfunction getGptSlot(slotName, adSlots) {\n  var slots = getGptSlots(adSlots).filter(function (slot) {\n    assert(slotName);\n    assert(slot.slot_name);\n    return slot.slot_name === slotName;\n  });\n  assert(slots.length <= 1);\n  var slot = slots[0];\n  if (!slot) return null;\n  return slot;\n}\n\nfunction getAdsenseSlotId(slotName, ad_slots) {\n  var adsense_slots = getAdsenseSlots(ad_slots).filter(function (slot) {\n    assert(slotName);\n    assert(slot.slot_name);\n    return slot.slot_name === slotName;\n  });\n  assert(adsense_slots.length <= 1);\n  var slot = adsense_slots[0];\n  if (!slot) return null;\n  var slot_id = slot.slot_id;\n  assert(slot_id);\n  return slot_id;\n}\n\nfunction getEzoicSlots(AD_SLOTS) {\n  return AD_SLOTS.filter(isEzoicSlot);\n}\n\nfunction getAdsenseSlots(AD_SLOTS) {\n  return AD_SLOTS.filter(isAdsenseSlot);\n}\n\nfunction getGptSlots(AD_SLOTS) {\n  return AD_SLOTS.filter(isGptSlot);\n}\n\nfunction isGpt(adSlots) {\n  var len = getGptSlots(adSlots).length;\n  assert(len === 0 || len === adSlots.length);\n  return len > 0;\n}\n\nfunction isEzoic(adSlots) {\n  var len = getEzoicSlots(adSlots).length;\n  assert(len === 0 || len === adSlots.length);\n  return len > 0;\n}\n\nfunction isAdsense(adSlots) {\n  var len = getAdsenseSlots(adSlots).length;\n  assert(len === 0 || len === adSlots.length);\n  return len > 0;\n}\n\nfunction isEzoicSlot(adSlot) {\n  return \"is_ezoic\" in adSlot;\n}\n\nfunction isAdsenseSlot(adSlot) {\n  return \"is_adsense\" in adSlot;\n}\n\nfunction isGptSlot(adSlot) {\n  return \"is_gpt\" in adSlot;\n}","module.exports = __webpack_public_path__ + \"glockenklang.hash_1e6ac0ad4ba9102ab561b296e6349ef8.ogg\";","const browserConfig = require('/home/romu/code/timertab/node_modules/@brillout/browser-config/index.js');\n\nbrowserConfig.initFunctions = {};\n\nbrowserConfig.initFunctions = browserConfig.initFunctions || {};\nbrowserConfig.initFunctions['hydratePage'] = (() => {const ret = require('/home/romu/code/timertab/node_modules/@goldpage/browser/hydratePage.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig.pageConfig = (() => {const ret = require('/home/romu/code/timertab/views/TimerPage/timer.page.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig['router'] = (() => {const ret = require('/home/romu/code/timertab/node_modules/@goldpage/path-to-regexp/router.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig['renderPageToDom'] = (() => {const ret = require('/home/romu/code/timertab/node_modules/@goldpage/html/renderPageToDom.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig['domRender'] = (() => {const ret = require('/home/romu/code/timertab/tab-utils/_render/browser/domRender.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\n(() => {const ret = require('/home/romu/code/timertab/node_modules/@goldpage/browser/browserInit.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n","import React from \"react\";\n\nexport { SettingsView };\n\nfunction SettingsView({ preset_concept_name }) {\n  return (\n    <>\n      <div className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">{preset_concept_name}</div>\n        <div id=\"creator-content\" />\n      </div>\n      <div id=\"save-container\" className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">Save</div>\n        <div id=\"save-content\" />\n      </div>\n      <div id=\"options-container\" className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">Options</div>\n        <div id=\"options-content\" />\n      </div>\n      <div id=\"share-container\" className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">Share</div>\n        <div id=\"share-preamble\">\n          You can create and share {preset_concept_name}s; customize an existing{\" \"}\n          {preset_concept_name}, save it under a new name, then use its share\n          link.\n        </div>\n        <div id=\"share-content\">Share Link: </div>\n      </div>\n    </>\n  );\n}\n","const preset_concept_name = \"Theme\";\nexport { preset_concept_name };\n","\"use strict\";\n\nexport { adSlots };\nvar adSlots = [\n/*\n{\n  slot_id: \"1234567\",\n  slot_name: \"ATF\",\n},\n{\n  slot_id: \"12345678\",\n  slot_name: \"BTF\",\n},\n*/\n\n/*\n{\n  // Ezoic - TT Left-Side ATF - sidebar\n  is_ezoic: true,\n  slot_id: \"ezoic-pub-ad-placeholder-101\",\n  slot_name: \"LEFT_AD_ATF\",\n},\n*/\n{\n  // Ezoic - TT Left-Side Floating - sidebar_floating_1\n  is_ezoic: true,\n  slot_id: \"ezoic-pub-ad-placeholder-104\",\n  slot_name: \"LEFT_AD_BTF\",\n  is_floating: true\n}, {\n  // Ezoic - TT BTF - Settings Top - mid_content\n  is_ezoic: true,\n  slot_id: \"ezoic-pub-ad-placeholder-105\",\n  slot_name: \"BTF_2\"\n}];","\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport \"./ad_layout.css\";\nimport \"./ad_layout_left.css\";\nimport \"./ad_layout_btf.css\";\nimport \"./ad-dev-debug.css\";\nimport { tab_app_google_adsense } from \"../../tab_app_info\";\nimport React from \"react\";\nimport assert from \"@brillout/assert\";\nimport { getAdsenseSlotId, getEzoicSlot, getGptSlot } from \"./slots\"; // export { Ad_ATF, Ad_BTF };\n\nexport { Ad_btf_2 };\nexport { Ad_left };\n\nfunction Ad_left(_ref) {\n  var ad_slots = _ref.ad_slots;\n  var slot_left_atf = get_left_slot(\"LEFT_AD_ATF\", ad_slots);\n  var slot_left_btf = get_left_slot(\"LEFT_AD_BTF\", ad_slots);\n  assert(slot_left_atf || slot_left_btf);\n  return React.createElement(\"div\", {\n    id: \"ads-left\"\n  }, slot_left_atf, slot_left_btf);\n}\n\nfunction get_left_slot(slot_name, ad_slots) {\n  var content;\n  var is_floating;\n  {\n    var adsense_id = getAdsenseSlotId(slot_name, ad_slots);\n\n    if (adsense_id) {\n      content = React.createElement(AdSenseAd, {\n        slot_id: adsense_id,\n        slotName: slot_name\n      });\n    }\n  }\n  {\n    var gptSlot = getGptSlot(slot_name, ad_slots);\n\n    if (gptSlot) {\n      content = React.createElement(GptAd, {\n        gptSlot: gptSlot,\n        slotName: slot_name\n      });\n    }\n  }\n  {\n    var ezoic_slot = getEzoicSlot(slot_name, ad_slots);\n\n    if (ezoic_slot) {\n      var ezoic_id = ezoic_slot.slot_id;\n      content = React.createElement(EzoicAd, {\n        ezoic_id: ezoic_id,\n        slotName: slot_name\n      });\n      is_floating = ezoic_slot.is_floating;\n      assert([true, undefined].includes(is_floating));\n    }\n  }\n\n  if (!content) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"slot-left\"\n  }, React.createElement(\"div\", {\n    className: \"vertical-slot-wrapper\" + (is_floating ? \" is_floating\" : \"\")\n  }, content));\n}\n\nfunction Ad_btf_2(_ref2) {\n  var ad_slots = _ref2.ad_slots;\n  var slot_name = \"BTF_2\";\n  var slot_content;\n  {\n    var adsense_id = getAdsenseSlotId(slot_name, ad_slots);\n\n    if (adsense_id) {\n      slot_content = React.createElement(AdSenseAd, {\n        slotName: slot_name,\n        slot_id: adsense_id,\n        auto_sizing: \"horizontal\"\n      }); // Do no include the container when doing auto_sizing\n\n      return slot_content;\n    }\n  }\n  {\n    var gptSlot = getGptSlot(slot_name, ad_slots);\n\n    if (gptSlot) {\n      slot_content = React.createElement(GptAd, {\n        gptSlot: gptSlot,\n        slotName: slot_name\n      });\n    }\n  }\n  {\n    var ezoic_slot = getEzoicSlot(slot_name, ad_slots);\n\n    if (ezoic_slot) {\n      assert(slot_content === undefined);\n      var ezoic_id = ezoic_slot.slot_id;\n      slot_content = React.createElement(EzoicAd, {\n        ezoic_id: ezoic_id,\n        slotName: slot_name\n      });\n    }\n  }\n\n  if (!slot_content) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"slot_btf_container\"\n  }, slot_content);\n}\n/*\nfunction Ad_ATF({ ad_slots }) {\n  return <AdView ad_slots={ad_slots} slot_name={\"ATF\"} />;\n}\nfunction Ad_BTF({ ad_slots }) {\n  return <AdView ad_slots={ad_slots} slot_name={\"BTF\"} />;\n}\n\nfunction AdView({ ad_slots, slot_name }: {ad_slots: AdSlots, slot_name: SlotName}) {\n  assert([\"ATF\", \"BTF\"].includes(slot_name));\n  const slot_id = getAdsenseSlotId(slot_name, ad_slots);\n  if (slot_id === null) return null;\n  return (\n    <div className=\"advi-wrap\">\n      <div className=\"horizontal-slot-wrapper\">\n        <AdSenseAd slot_id={slot_id} slotName={slot_name} />\n      </div>\n    </div>\n  );\n}\n */\n\n\nfunction EzoicAd(_ref3) {\n  var ezoic_id = _ref3.ezoic_id,\n      slotName = _ref3.slotName;\n  assert(ezoic_id);\n  assert(ezoic_id.startsWith(\"ezoic-pub-ad-placeholder-1\"));\n  return React.createElement(\"div\", {\n    className: \"ezoic-ad-slot slot-\" + slotName\n  }, React.createElement(\"div\", {\n    id: ezoic_id\n  }), React.createElement(\"div\", {\n    className: \"ezoic-dev-demo\"\n  }));\n}\n\nfunction GptAd(_ref4) {\n  var gptSlot = _ref4.gptSlot,\n      slotName = _ref4.slotName;\n  return React.createElement(\"div\", {\n    id: gptSlot.slot_id,\n    className: \"slot-\" + slotName,\n    style: {\n      width: gptSlot.slotSize[0],\n      height: gptSlot.slotSize[1]\n    }\n  });\n}\n\nfunction AdSenseAd(_ref5) {\n  var slot_id = _ref5.slot_id,\n      slotName = _ref5.slotName,\n      _ref5$auto_sizing = _ref5.auto_sizing,\n      auto_sizing = _ref5$auto_sizing === void 0 ? undefined : _ref5$auto_sizing;\n  assert(tab_app_google_adsense.startsWith(\"ca-pub-\"));\n  assert([undefined, \"horizontal\"].includes(auto_sizing));\n  var props = {};\n\n  if (auto_sizing) {\n    Object.assign(props, {\n      \"data-ad-format\": auto_sizing,\n      \"data-full-width-responsive\": true\n    });\n  }\n\n  return React.createElement(\"ins\", _extends({\n    className: \"adsbygoogle slot-\" + slotName,\n    \"data-ad-client\": tab_app_google_adsense,\n    \"data-ad-slot\": slot_id\n  }, props));\n}","import \"./css/index.css\";\nimport React from \"react\";\nimport {\n  FullViewLayout,\n  FullView,\n  MorePanel,\n  RightSide,\n  LeftSide,\n} from \"../../tab-utils/views/FullViewWrapper\";\nimport { SettingsView } from \"../../tab-utils/TabSettings/SettingsView\";\nimport { preset_concept_name } from \"./js/preset_concept_name\";\nimport { adSlots } from \"./adSlots\";\nimport assert from \"@brillout/assert\";\nimport { Ad_btf_2, Ad_left /*, Ad_ATF*/ } from \"../../tab-utils/ads/views\";\n\nexport default TimerView;\n\nfunction TimerView() {\n  return (\n    <FullViewLayout>\n      <LeftSide style={{ backgroundColor: \"#3e3e3e\" }}>\n        <Ad_left ad_slots={adSlots} />\n      </LeftSide>\n\n      <RightSide>\n        <FullView>\n          <FullViewContent />\n        </FullView>\n\n        <MorePanel>\n          <Ad_btf_2 ad_slots={adSlots} />\n          <SettingsView preset_concept_name={preset_concept_name} />\n        </MorePanel>\n      </RightSide>\n    </FullViewLayout>\n  );\n}\n\nfunction FullViewContent() {\n  return (\n    <div id=\"timer_table_scroll_area\">\n      <div id=\"timer_table\">\n        <div id=\"bodypadding\">{/* <Ad_ATF ad_slots={adSlots} /> */}</div>\n        <div id=\"stripH\"></div>\n        <div id=\"middletable\" style={{ width: \"100%\" }}>\n          <div style={{ width: \"100%\", position: \"relative\" }}>\n            <div id=\"allcontent\">\n              <div>\n                <div id=\"inputs\">\n                  <div className=\"tr\">\n                    <div className=\"timerInput\">\n                      <form id=\"timerForm\">\n                        <input\n                          type=\"tel\"\n                          autoComplete=\"off\"\n                          spellCheck=\"false\"\n                          min=\"0\"\n                          size=\"1\"\n                          defaultValue=\"\"\n                          placeholder=\"h\"\n                        />\n                        <span className=\"inputSep\"></span>\n                        <input\n                          type=\"tel\"\n                          autoComplete=\"off\"\n                          spellCheck=\"false\"\n                          min=\"0\"\n                          size=\"1\"\n                          defaultValue=\"\"\n                          placeholder=\"m\"\n                        />\n                        <span className=\"inputSep s\"></span>\n                        <input\n                          type=\"tel\"\n                          autoComplete=\"off\"\n                          spellCheck=\"false\"\n                          min=\"0\"\n                          size=\"1\"\n                          defaultValue=\"\"\n                          placeholder=\"s\"\n                          className=\"s\"\n                        />\n                        <button\n                          form=\"timerForm\"\n                          id=\"timerButton\"\n                          tabIndex=\"-1\"\n                          type=\"submit\"\n                        ></button>\n                      </form>\n                    </div>\n\n                    <div className=\"timerInput\">\n                      <form id=\"alarmForm\">\n                        <input\n                          type=\"tel\"\n                          autoComplete=\"off\"\n                          spellCheck=\"false\"\n                          min=\"0\"\n                          max=\"23\"\n                          maxLength=\"2\"\n                          placeholder=\"h\"\n                        />\n                        <span className=\"inputSep\"></span>\n                        <input\n                          type=\"tel\"\n                          autoComplete=\"off\"\n                          spellCheck=\"false\"\n                          min=\"0\"\n                          max=\"59\"\n                          maxLength=\"2\"\n                          placeholder=\"m\"\n                        />\n                        <span className=\"inputSep s\"></span>\n                        <input\n                          type=\"tel\"\n                          autoComplete=\"off\"\n                          spellCheck=\"false\"\n                          min=\"0\"\n                          max=\"59\"\n                          maxLength=\"2\"\n                          placeholder=\"s\"\n                          className=\"s\"\n                          defaultValue=\"\"\n                        />\n                        <button\n                          form=\"alarmForm\"\n                          id=\"alarmButton\"\n                          tabIndex=\"-1\"\n                          type=\"submit\"\n                        ></button>\n                      </form>\n                    </div>\n\n                    <div className=\"timerInput\">\n                      <form id=\"stopwForm\">\n                        {/*\n                    no dummy input, then bugfix needed for chrome:\n                      fix for chrome bug that offsets button\n                        form#stopwForm > button{ display:block;margin: auto }\n                      old bug fix some bug, but that leads to skinny button in IE\n                        form#stopwForm { line-height:0; }\n                    */}\n                        <input\n                          type=\"tel\"\n                          maxLength=\"2\"\n                          style={{\n                            display: \"block\",\n                            position: \"relative\",\n                            zIndex: -10,\n                            visibility: \"hidden\",\n                          }}\n                        />\n                        <button\n                          form=\"stopwForm\"\n                          id=\"stopwButton\"\n                          type=\"submit\"\n                        ></button>\n                      </form>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <div id=\"vertical\" style={{ position: \"relative\" }}>\n                  <div id=\"stripV\"></div>\n                  <div id=\"head\" style={{ width: \"100%\", height: \"100%\" }}>\n                    <div id=\"counter_wrapper\">\n                      <div id=\"counter\"></div>\n                      <div id=\"alarmTime\"></div>\n                      <button type=\"button\" tabIndex=\"-1\" id=\"pause\"></button>\n                    </div>\n                    <div id=\"youtube_wrapper\">\n                      <div id=\"youtube_iframe\"></div>\n                    </div>\n                    <div\n                      id=\"filler\"\n                      style={{ height: \"100%\", width: \"100%\" }}\n                    ></div>\n                    <div\n                      id=\"verticalBottom\"\n                      style={{ verticalAlign: \"bottom\", textAlign: \"center\" }}\n                    >\n                      <a\n                        id=\"time\"\n                        href=\"http://www.clocktab.com\"\n                        tabIndex=\"-1\"\n                        target=\"_blank\"\n                      >\n                        Online Clock\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            {/* END allcontent */}\n          </div>\n        </div>\n        {/* END middletable */}\n\n        {/* END of <div id='timer_table'> */}\n      </div>\n    </div>\n  );\n}\n","//NOTES on closure compiler behavior\n//{{{\n//-var p=Date.prototype;p.neverCalled=function..;// --> neverCalled isn't removed\n//-window.neverCalled=function..;// --> neverCalled isn't removed\n//}}}\n\nimport zoom_to_element from \"../../../tab-utils/zoom_to_element\";\n\nconst ml = {};\n\nexport default ml;\n\n(function () {\n  if (typeof window === \"undefined\") {\n    return;\n  } else {\n    window.ml = ml;\n  }\n\n  ml.date = {};\n  (function () {\n    ml.date.readablize = function (str) {\n      if (str === undefined || str === \"\") return \"\";\n      if (str.constructor === String) str = parseInt(str, 10);\n      return (str < 10 ? \"0\" : \"\") + str;\n    };\n    var weekday = new Array(\n      \"Sunday\",\n      \"Monday\",\n      \"Tuesday\",\n      \"Wednesday\",\n      \"Thursday\",\n      \"Friday\",\n      \"Saturday\"\n    );\n    var month = new Array(\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"August\",\n      \"September\",\n      \"October\",\n      \"November\",\n      \"December\"\n    );\n    ml.date.getWeek = function (\n      that //{{{\n    ) {\n      /* False\n      var determinedate = new Date();\n      determinedate.setFullYear(that.getFullYear(), that.getMonth(), that.getDate());\n      var D = determinedate.getDay();\n      if(D == 0) D = 7;\n      determinedate.setDate(determinedate.getDate() + (4 - D));\n      var YN = determinedate.getFullYear();\n      var ZBDoCY = Math.floor((determinedate.getTime() - new Date(YN, 0, 1, -6)) / 86400000);\n      var WN = 1 + Math.floor(ZBDoCY / 7);\n      return WN;\n      */\n\n      /**\n       * Returns the week number for that date.  dowOffset is the day of week the week\n       * \"starts\" on for your locale - it can be from 0 to 6. If dowOffset is 1 (Monday),\n       * the week returned is the ISO 8601 week number.\n       * @param int dowOffset\n       * @return int\n       */\n      //Date.prototype.getWeek = function (dowOffset) {\n      /*getWeek() was developed by Nick Baicoianu at MeanFreePath: http://www.meanfreepath.com */\n\n      dowOffset = typeof dowOffset == \"int\" ? dowOffset : 0; //default dowOffset to zero\n      var newYear = new Date(that.getFullYear(), 0, 1);\n      var day = newYear.getDay() - dowOffset; //the day of week the year begins on\n      day = day >= 0 ? day : day + 7;\n      var daynum =\n        Math.floor(\n          (that.getTime() -\n            newYear.getTime() -\n            (that.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) /\n            86400000\n        ) + 1;\n      var weeknum;\n      //if the year starts before the middle of a week\n      if (day < 4) {\n        weeknum = Math.floor((daynum + day - 1) / 7) + 1;\n        if (weeknum > 52) {\n          nYear = new Date(that.getFullYear() + 1, 0, 1);\n          nday = nYear.getDay() - dowOffset;\n          nday = nday >= 0 ? nday : nday + 7;\n          /*if the next year starts before the middle of\n          the week, it is week #1 of that year*/\n          weeknum = nday < 4 ? 1 : 53;\n        }\n      } else {\n        weeknum = Math.floor((daynum + day - 1) / 7);\n      }\n      return weeknum;\n      //};\n    };\n    //}}}\n    ml.date.add = function (\n      that,\n      h,\n      m,\n      s,\n      ms //time -> time + h + m + s //{{{\n    ) {\n      if (ms === undefined) ms = 0;\n      if (s === undefined) s = 0;\n      if (m === undefined) m = 0;\n      if (h === undefined) h = 0;\n      var newMs = that.getMilliseconds() + ms;\n      //var newS=that.getSeconds()+s+1;\n      var newS = that.getSeconds() + s + newMs / 1000;\n      var newM = that.getMinutes() + m + newS / 60;\n      var newH = that.getHours() + h + newM / 60;\n      //new Date(year, month, day, hours, minutes, seconds, milliseconds)\n      //setHours(hours, [minutes], [seconds], [millisec])\n      that.setHours(newH % 24, newM % 60, newS % 60, newMs % 1000);\n      that.setUTCDate(that.getUTCDate() + newH / 24);\n      return that;\n    };\n    //}}}\n    ml.date.getDayBegining = function (date) {\n      var d = new Date(+date);\n      var ret = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      ret +=\n        (d.getTimezoneOffset() - new Date(ret).getTimezoneOffset()) * 60 * 1000;\n      return ret;\n    };\n    ml.date.readable = {};\n    ml.date.readable.getHours = function (\n      that,\n      twelveClock //{{{\n    ) {\n      var ret = that.getHours();\n      if (twelveClock) {\n        ret %= 12;\n        if (ret == 0) ret = 12;\n      }\n      return ml.date.readablize(ret);\n    };\n    //}}}\n    ml.date.readable.getMinutes = function (\n      that //{{{\n    ) {\n      return ml.date.readablize(that.getMinutes());\n    };\n    //}}}\n    ml.date.readable.getSeconds = function (\n      that //{{{\n    ) {\n      return ml.date.readablize(that.getSeconds());\n    };\n    //}}}\n    ml.date.readable.getDate = function (\n      that //{{{\n    ) {\n      return ml.date.readablize(that.getDate());\n    };\n    //}}}\n    ml.date.readable.getDay = function (\n      that //{{{\n    ) {\n      return weekday[that.getDay()];\n    };\n    //}}}\n    ml.date.readable.getMonth = function (\n      that //{{{\n    ) {\n      return month[that.getMonth()];\n    };\n    //}}}\n    ml.date.readable.getTime = function (that, withPeriod) {\n      ml.assert(arguments.length === 2);\n      ml.assert(withPeriod.constructor === Boolean);\n\n      var diff = that - ml.date.getDayBegining(that);\n      if (withPeriod) {\n        var MID_DAY = 12 * 60 * 60 * 1000;\n        var isPm = diff >= MID_DAY;\n        if (isPm) diff -= MID_DAY;\n      }\n      var ret = ml.date.readable.getCounter(\n        diff,\n        withPeriod ? \"periodclock\" : \"alarmclock\"\n      );\n      if (withPeriod) ret += \" \" + (isPm ? \"PM\" : \"AM\");\n      return ret;\n    };\n    ml.date.readable.getCounter = function (diff, preset) {\n      ml.assert(arguments.length === 2);\n\n      var PRESETS = {\n        text: \"%hv?%mv?%0sv?\",\n        //'text_verbose':'%hv? %mv? %sv',\n        countdown: \"%0h:?%0m:?%0s\",\n        alarmclock: \"%0h:%0m\",\n        periodclock: \"%h%:0m?\",\n      };\n      const format = PRESETS[preset];\n      ml.assert(format);\n\n      var digits = format.match(/%:?0?(h|s|m)v?\\s?:?\\??/g);\n      ml.assert(digits);\n\n      var data = {\n        ms: diff % 1000 | 0,\n        s: (diff / 1000) % 60 | 0,\n        m: (diff / 1000 / 60) % 60 | 0,\n        h: (diff / 1000 / 60 / 60) | 0,\n      };\n\n      digits = digits.map(function (d) {\n        if (d[0] !== \"%\") return d;\n        d = d.substring(1);\n        if (d[d.length - 1] === \"?\") {\n          var optional = true;\n          d = d.substring(0, d.length - 1);\n        }\n        for (var i in data)\n          if (d.indexOf(i) !== -1) {\n            if (optional) {\n              if (\n                (i === \"h\" && !data[\"h\"]) ||\n                (i === \"m\" && !data[\"h\"] && !data[\"m\"]) ||\n                (i === \"s\" && data[\"h\"])\n              )\n                return \"\";\n            }\n            return d\n              .replace(\n                new RegExp(\"(0?)\" + i),\n                (data[i] < 10 ? \"$1\" : \"\") + data[i]\n              )\n              .replace(\"v\", i);\n          }\n        ml.assert(false);\n      });\n\n      return digits.join(\"\");\n    };\n    /*\n  ml.date.readable.getTime=function(s,format,digitShift,shiftTodo){ \n    //random info about epoch\n    //1000000000000 ms ~= 31 years\n    //1000000000000    ~= Sep 2001\n    //1300000000000    -= March 2011\n    //10000000000000   -= Nov 2286\n    ml.assert(s!==undefined && s.constructor === Number);\n    ml.assert(digitShift===undefined || digitShift.constructor===Number);\n    ml.assert( shiftTodo===undefined ||  shiftTodo.constructor===Number);\n    if(!format&&s.toString().length>12) format='time12_pretty';\n    ml.assert(['timer','time12','time12_pretty','time24_pretty','countdown','data'].indexOf(format)!==-1);\n\n    if(format==='time12' || format==='time12_pretty' || format==='time24_pretty' || format==='data'){\n      ml.assert(digitShift===undefined&&shiftTodo===undefined);\n      digitShift=0;\n      shiftTodo=2;\n    }\n    else {\n      if(digitShift===undefined) digitShift = 1;\n      if(shiftTodo ===undefined) shiftTodo  = 0;\n    }\n\n    var verbose = format==='timer';\n    var cutHead = format==='timer' || format==='countdown';\n    var cutTail = verbose;\n    var makeAMPM = format==='time12' || format==='time12_pretty';\n\n    //epoch digit length won't change until year 2200\n    //13 digit number interpretend as milliseconds correspond to > 30 years\n    if(s.toString().length>12)\n    {\n      ml.assert(format==='time12' || format==='time12_pretty' || format==='data' || 'time24_pretty');\n      //onsole.log(new Date(s));\n      //onsole.log(new Date(new Date(s).getFullYear(),new Date(s).getMonth(),new Date(s).getDate()));\n      s = s - ml.date.getDayBegining(s);\n      //onsole.log(s);\n    }\n    if(makeAMPM) {\n      var mid_day = 12*60*60*1000;\n      var isPm = s>=mid_day;\n      if(isPm) s-=mid_day;\n    }\n\n    var DEFAULT_PARTITION   = 100;//needed to add trailing zeros\n    var DIGITS_PARTITION    = [1000,60,60];\n    var DIGITS_ABBREVATION  = ['ms','s','m','h'];\n\n    //=====do shift\n    // failed attempt to determine digitShift (with current input information, it's not possible)\n    //var MAX_EPOCH_LENGTH = 13;\n    //var digitShift = 0;\n    //while((DIGITS_PARTITION.slice(0,digitShift).reverse().concat([1]).reverse().reduce(function(a,b){return a*b})*s).toString().length<MAX_EPOCH_LENGTH && digitShift<=DIGITS_PARTITION.length) digitShift++;\n    //ml.assert(digitShift<=DIGITS_PARTITION.length);\n    digitShift+=shiftTodo;\n    ml.assert(digitShift<=DIGITS_PARTITION.length);\n    while(shiftTodo--) s /= DIGITS_PARTITION[digitShift-(shiftTodo+1)];\n    s=parseInt(s,10);\n    DIGITS_PARTITION  .splice(0,digitShift);\n    DIGITS_ABBREVATION.splice(0,digitShift);\n\n    //====compute digits\n    var d = [];\n    for(var i=0;i<DIGITS_PARTITION.length+1;i++)\n    {\n      var digitValue = s;\n      for(var j=i-1;j>=0;j--) digitValue /= DIGITS_PARTITION[j];\n      d.push((digitValue % (DIGITS_PARTITION[i] || Infinity))|0);\n    }\n\n    if(cutHead) while(d[d.length-1]===0 && d.length>1) d.pop();\n    if(makeAMPM) if(d[d.length-1]===0) d[d.length-1]=12;\n\n    if(cutTail)\n    {\n      var trailCut = d.length;\n      while(d[0]===0 && d.length>1) d.shift();\n      trailCut -= d.length;\n    }\n\n    if(!verbose)\n      for(var i=0;i<d.length;i++) d[i]='00'.substring(0,((DIGITS_PARTITION[i] || DEFAULT_PARTITION)-1).toString().length-d[i].toString().length)+d[i];\n\n    if(verbose)\n    {\n      DIGITS_ABBREVATION.splice(0,trailCut);\n      for(var i=0;i<d.length;i++) d[i]+=DIGITS_ABBREVATION[i];\n    }\n\n    //onsole.log(d.slice().reverse().join(verbose?' ':':'));\n    //onsole.log('');\n    d.reverse();\n    if(format==='data') return d;\n    d = d.join(verbose?' ':':');\n    //3:00 PM ~> 3 PM\n    if(format==='time12_pretty') d = d.replace(/:00$/,'');\n    if(format==='time12_pretty' || format==='time24_pretty') d = d.replace(/^0/,'');\n    if(makeAMPM) d = d+' '+(isPm?'PM':'AM');\n    return d;\n  }; \n  */\n    ml.date.readable.getDateRelative = function (that, verbose) {\n      ml.assert(that);\n      that = new Date(that);\n      var todayEnd = new Date();\n      todayEnd.setHours(23);\n      todayEnd.setMinutes(59);\n      todayEnd.setSeconds(59);\n      todayEnd.setMilliseconds(999);\n      //ml.assert(todayEnd>that);\n      var daysAgo = (todayEnd - that) / (1000 * 60 * 60 * 24);\n      var ret;\n      if (daysAgo < 1) return \"today\";\n      else if (daysAgo < 2) ret = \"yesterday\";\n      else if (daysAgo < 15) ret = (daysAgo | 0) + \" days ago\";\n      else if (daysAgo < 31) ret = ((daysAgo / 7) | 0) + \" weeks ago\";\n      else {\n        var months = (daysAgo / 30.5) | 0;\n        if (daysAgo < 356)\n          ret = months + \" month\" + (months > 1 ? \"s\" : \"\") + \" ago\";\n        else {\n          var years = (daysAgo / 356.24) | 0;\n          ret = years + \" year\" + (years > 1 ? \"s\" : \"\") + \" ago\";\n        }\n      }\n      if (!verbose) return ret;\n      return (\n        ret +\n        \", \" +\n        ml.date.readable.getDay(that) +\n        (daysAgo < 8\n          ? \"\"\n          : \" \" + that.getDate() + \".\" + ml.date.readable.getMonth(that)) +\n        (!years ? \"\" : \".\" + that.getFullYear())\n      );\n    };\n  })();\n\n  ml.element = {};\n  ml.element.getStyle = function (\n    that,\n    styleProp //{{{\n  ) {\n    return document.defaultView\n      .getComputedStyle(that, null)\n      .getPropertyValue(styleProp);\n  };\n  //}}}\n  ml.element.removeFromDOM = function (that) {\n    ml.assert(that);\n    that.parentElement.removeChild(that);\n  };\n  ml.element.create = function (type, props) {\n    var newEl = document.createElement(type);\n    var insertToDom;\n    if (props.appendTo) {\n      insertToDom = function () {\n        hook.appendChild(newEl);\n      };\n      var hook = props.appendTo;\n      delete props.appendTo;\n    }\n    if (props.prependTo) {\n      insertToDom = function () {\n        if (!hook.firstChild) hook.appendChild(newEl);\n        else hook.insertBefore(newEl, hook.firstChild);\n      };\n      var hook = props.prependTo;\n      delete props.prependTo;\n    }\n    if (props.childs) {\n      for (var i in props.childs) newEl.appendChild(props.childs[i]);\n      delete props.childs;\n    }\n    for (var i in props) newEl[i] = props[i];\n    if (insertToDom) insertToDom();\n    return newEl;\n  };\n\n  (function () {\n    function getDummy(tagName) {\n      var dummy = document.createElement(tagName || \"div\");\n      dummy.style.display = \"inline-block\";\n      dummy.style.position = \"absolute\";\n      dummy.style.top = \"-9999px\";\n      dummy.style.zIndex = \"-9999\";\n      dummy.style.visibility = \"hidden\";\n      return dummy;\n    }\n    function getWidestChar(chars) {\n      var widestChar;\n      var widestSize = -1;\n      var dummy = document.body.appendChild(getDummy());\n      for (var i = 0; i < chars.length; i++) {\n        dummy.innerHTML = chars[i];\n        var charWidth = parseInt(ml.element.getStyle(dummy, \"width\"), 10);\n        if (charWidth > widestSize) {\n          widestSize = charWidth;\n          widestChar = chars[i];\n        }\n      }\n\n      //window.bla=window.bla||0;\n      //if(window.bla!==2&&window.bla!==0) document.body.removeChild(dummy);\n      //window.bla++;\n\n      //dummyinspect\n      //onsole\n      document.body.removeChild(dummy);\n      ml.assert(widestChar);\n      return widestChar;\n    }\n    function getData(el, width, height, possibleChars, minTextLength) {\n      var dummyContent = (el.getAttribute(\"data-text\") || \"\") + el.innerHTML;\n      if (dummyContent.length < (minTextLength && minTextLength.length))\n        dummyContent = minTextLength;\n      if (dummyContent.length < 1) dummyContent = \"y\";\n      if (possibleChars) {\n        //if possibleChars not given we then assume that all char have same width\n        ml.assert(el.children.length === 0);\n        var widestChar = getWidestChar(possibleChars);\n        var dummyTextLength = dummyContent.length;\n        dummyContent = \"\";\n        for (var i = 0; i < dummyTextLength; i++) dummyContent += widestChar;\n      }\n\n      var dummy = getDummy(el.tagName);\n      dummy.style.fontFamily = ml.element.getStyle(el, \"font-family\");\n      dummy.style.fontFamily = ml.element.getStyle(el, \"font-family\");\n      dummy.style.fontSize = DUMMY_SIZE + \"px\";\n      dummy.style.whiteSpace = \"nowrap\"; //should el be equal to el.getStyle('white-space')?\n      dummy.style.letterSpacing = ml.element.getStyle(el, \"letter-spacing\");\n\n      dummy.innerHTML = dummyContent;\n      document.body.appendChild(dummy);\n      //dummyinspect\n      //onsole\n      /*\n    if(!window.bla)window.bla=0;\n    window.bla++;\n    var c = window.bla;\n    onsole.log('t0');\n    onsole.log(c);\n    onsole.log(ml.element.getStyle(dummy,'font-family'));\n    onsole.log(ml.element.getStyle(dummy,'width'));\n    setTimeout(function(){\n    onsole.log('t1');\n    onsole.log(c);\n    onsole.log(ml.element.getStyle(dummy,'font-family'));\n    onsole.log(ml.element.getStyle(dummy,'width'));\n    },0);\n    setTimeout(function(){\n    onsole.log('t2');\n    onsole.log(c);\n    onsole.log(ml.element.getStyle(dummy,'font-family'));\n    onsole.log(ml.element.getStyle(dummy,'width'));\n    },100);\n    setTimeout(function(){\n    onsole.log('t3');\n    onsole.log(c);\n    onsole.log(ml.element.getStyle(dummy,'font-family'));\n    onsole.log(ml.element.getStyle(dummy,'width'));\n    },1000);\n    setTimeout(function(){\n    onsole.log('t4');\n    onsole.log(c);\n    onsole.log(ml.element.getStyle(dummy,'font-family'));\n    onsole.log(ml.element.getStyle(dummy,'width'));\n    },5000);\n    */\n      var width_dummy =\n        width && parseInt(ml.element.getStyle(dummy, \"width\"), 10);\n      var height_dummy =\n        height && parseInt(ml.element.getStyle(dummy, \"height\"), 10);\n      var ratio = Math.min(\n        height ? height / height_dummy : Infinity,\n        width ? width / width_dummy : Infinity\n      );\n      document.body.removeChild(dummy);\n      return {\n        fontSize: ratio * DUMMY_SIZE,\n        width: ratio * width_dummy,\n        height: ratio * height_dummy,\n      };\n    }\n    var DUMMY_SIZE = 100; //intuitively: the bigger the font-size the more precise the approximation\n    var boxSizingPropName = null;\n    ml.adjustFontSize = function (\n      el,\n      possibleChars,\n      noHeight,\n      minTextLength,\n      isInsideATable\n    ) {\n      /* to reuse cache; clear it when box size changes\n    //using cache -> assumption is made that font familly and box size doesn't change\n    //based on assumption that width of a text is approx proportional to its fontSize\n    //notes\n    //-absolute font-size is equally precise as percentage font-size\n    //-possibleChars is used for fonts with variable char width\n    var textLength = ((el.getAttribute('data-text')||'')+el.innerHTML).length;\n    if(textLength===el._oldTextLength) return;\n    el._oldTextLength=textLength;\n    if(!el._ml_textSizeRatioCache) el._ml_textSizeRatioCache={};\n    if(el._ml_textSizeRatioCache[textLength]) return el._ml_textSizeRatioCache[textLength];\n    */\n\n      //noHeight computed automatically using getMatchedCSSRules\n      //-http://stackoverflow.com/questions/2952667/find-all-css-rules-that-apply-to-an-element\n      //-but only implemented in webkit: https://bugzilla.mozilla.org/show_bug.cgi?id=438278\n      //-gecko polyfill: https://gist.github.com/3033012\n\n      function getSize(el, prop) {\n        return parseInt(ml.element.getStyle(el, prop) || 0, 10);\n      }\n\n      if (isInsideATable) {\n        //-alternatively & easier: temporarely set fontSize to 0px\n        //-to avoid following: adjust font size ~> text length increases => el size increases\n        //-using el.style.overflow='hidden' doesn't work for procentual width\n        var oldInnerHTML = el.innerHTML;\n        var oldDataText = el.getAttribute(\"data-text\");\n        el.innerHTML = \"\";\n        el.removeAttribute(\"data-text\");\n      }\n      var width = getSize(el, \"width\");\n      var height;\n      if (!noHeight) height = getSize(el, \"height\");\n      if (isInsideATable) {\n        el.innerHTML = oldInnerHTML;\n        if (oldDataText) el.setAttribute(\"data-text\", oldDataText);\n      }\n\n      if (boxSizingPropName === null)\n        boxSizingPropName = [\n          \"box-sizing\",\n          \"-moz-box-sizing\",\n          \"-o-box-sizing\",\n          \"-ms-box-sizing\",\n          \"-webkit-box-sizing\",\n        ].filter(function (p) {\n          return document.createElement(\"div\").style[p] !== undefined;\n        })[0];\n      if (\n        boxSizingPropName &&\n        ml.element.getStyle(el, boxSizingPropName) === \"border-box\"\n      ) {\n        width -=\n          getSize(el, \"border-left\") +\n          getSize(el, \"border-right\") +\n          getSize(el, \"padding-left\") +\n          getSize(el, \"padding-right\");\n        if (height)\n          height -=\n            getSize(el, \"border-top\") +\n            getSize(el, \"border-bottom\") +\n            getSize(el, \"padding-top\") +\n            getSize(el, \"padding-bottom\");\n      }\n\n      el.style.fontSize =\n        Math.floor(\n          getData(el, width, height, possibleChars, minTextLength).fontSize\n        ) + \"px\";\n\n      ml.assert(\n        ml.element.getStyle(el, \"display\") === \"block\" ||\n          ml.element.getStyle(el, \"display\") === \"inline-block\" ||\n          ml.element.getStyle(el, \"display\") === \"table-cell\",\n        \"ml.element.getStyle(el,'display')==\" +\n          ml.element.getStyle(el, \"display\"),\n        1\n      );\n\n      //following assert fails with browser zoom\n      //ml.assert(ml.element.getStyle(el,'font-size')===el.style.fontSize);\n\n      //good enough without refinment?\n      //note: will break minTextLength option\n      //******** Refinment ********\n      /*\n    ml.assert(!minTextLength);\n    var max=100;\n    ml.assert(width!==0&&height!==0);\n    while( ml.element.getStyle(el, 'width')<( width||0       ) &&\n           ml.element.getStyle(el,'height')<(height||0       )  &&--max) el.style.fontSize=parseInt(el.style.fontSize,10)+2+'px';\n    while((ml.element.getStyle(el, 'width')>( width||Infinity) ||\n           ml.element.getStyle(el,'height')>(height||Infinity)) &&--max) el.style.fontSize=parseInt(el.style.fontSize,10)-1+'px';\n    ml.assert(max>0,'max===0');\n    */\n    };\n    ml.getTextSize = function (el, w, h) {\n      return getData(el, w, h);\n    };\n  })();\n\n  ml.showBrowserHint = function (\n    name,\n    additionalText //{{{\n  ) {\n    var browserDetect = {\n      //{{{\n      init: function () {\n        //this.browser = this.searchString(this.dataBrowser) || \"An unknown browser\";\n        this.browser = this.searchString(this.dataBrowser);\n        this.version =\n          this.searchVersion(navigator.userAgent) ||\n          this.searchVersion(navigator.appVersion); //|| \"an unknown version\";\n        //this.OS = this.searchString(this.dataOS) || \"an unknown OS\";\n      },\n      searchString: function (data) {\n        for (var i = 0; i < data.length; i++) {\n          var dataString = data[i].string;\n          var dataProp = data[i].prop;\n          this.versionSearchString = data[i].versionSearch || data[i].identity;\n          if (dataString) {\n            if (dataString.indexOf(data[i].subString) != -1)\n              return data[i].identity;\n          } else if (dataProp) return data[i].identity;\n        }\n      },\n      searchVersion: function (dataString) {\n        var index = dataString.indexOf(this.versionSearchString);\n        if (index == -1) return;\n        return parseFloat(\n          dataString.substring(index + this.versionSearchString.length + 1)\n        );\n      },\n      dataBrowser: [\n        {\n          string: navigator.userAgent,\n          subString: \"Chrome\",\n          identity: \"Chrome\",\n        },\n        {\n          string: navigator.userAgent,\n          subString: \"OmniWeb\",\n          versionSearch: \"OmniWeb/\",\n          identity: \"OmniWeb\",\n        },\n        {\n          string: navigator.vendor,\n          subString: \"Apple\",\n          identity: \"Safari\",\n          versionSearch: \"Version\",\n        },\n        {\n          prop: window.opera,\n          identity: \"Opera\",\n        },\n        {\n          string: navigator.vendor,\n          subString: \"iCab\",\n          identity: \"iCab\",\n        },\n        {\n          string: navigator.vendor,\n          subString: \"KDE\",\n          identity: \"Konqueror\",\n        },\n        {\n          string: navigator.userAgent,\n          subString: \"Firefox\",\n          identity: \"Firefox\",\n        },\n        {\n          string: navigator.vendor,\n          subString: \"Camino\",\n          identity: \"Camino\",\n        },\n        {\n          // for newer Netscapes (6+)\n          string: navigator.userAgent,\n          subString: \"Netscape\",\n          identity: \"Netscape\",\n        },\n        {\n          string: navigator.userAgent,\n          subString: \"MSIE\",\n          identity: \"Explorer\",\n          versionSearch: \"MSIE\",\n        },\n        {\n          string: navigator.userAgent,\n          subString: \"Gecko\",\n          identity: \"Mozilla\",\n          versionSearch: \"rv\",\n        },\n        {\n          // for older Netscapes (4-)\n          string: navigator.userAgent,\n          subString: \"Mozilla\",\n          identity: \"Netscape\",\n          versionSearch: \"Mozilla\",\n        },\n      ],\n      dataOS: [\n        {\n          string: navigator.platform,\n          subString: \"Win\",\n          identity: \"Windows\",\n        },\n        {\n          string: navigator.platform,\n          subString: \"Mac\",\n          identity: \"Mac\",\n        },\n        {\n          string: navigator.userAgent,\n          subString: \"iPhone\",\n          identity: \"iPhone/iPod\",\n        },\n        {\n          string: navigator.platform,\n          subString: \"Linux\",\n          identity: \"Linux\",\n        },\n      ],\n    };\n    //}}}\n\n    browserDetect.init();\n\n    var str = \"<div style='padding: 30px'>\";\n    var instruction =\n      \"in order to use \" +\n      name +\n      ' download the latest version of your browser at <a target=\"_blank\" href=';\n    if (browserDetect.browser) {\n      var browser = browserDetect.browser;\n      if (browser === \"Chrome\") {\n        browser = \"Google Chrome\";\n        instruction +=\n          \"'https://www.google.com/chrome/'>www.google.com/chrome</a>\";\n      } else if (browser === \"Firefox\") {\n        instruction +=\n          \"'https://www.mozilla.com/firefox/'>www.mozilla.com/firefox</a>\";\n      } else if (browser === \"Safari\") {\n        instruction +=\n          \"'https://www.apple.com/safari/download/'>www.apple.com/safari/download</a>\";\n      } else if (browser === \"Explorer\") {\n        browser = \"Internet Explorer\";\n        instruction =\n          \"in order to use \" +\n          name +\n          \" install the Google Chrome Frame plug-in at <a target='_blank' href='https://code.google.com/chrome/chromeframe/'>https://code.google.com/chrome/chromeframe</a>\";\n      } else instruction = null;\n\n      str += \"you are using the browser \" + browser;\n      if (browserDetect.version) str += \" \" + browserDetect.version;\n      str += \"<br><br>\";\n      if (instruction) str += instruction + \".<br><br>\";\n    }\n    str +=\n      name +\n      \" supports following browsers:<br> \\\n    <ul> \\\n      <li><b>Internet Explorer</b> with the <b>Google Chrome Frame</b> plug-in</li> \\\n      <li><b>Firefox 3.5</b> or higher</li> \\\n      <li><b>Safari 5</b> or higher</li> \\\n      <li><b>Google Chrome 4</b> or higher</li> \\\n    </ul> \\\n    \";\n\n    if (additionalText) str += \"<br>\" + additionalText;\n\n    str += \"</div>\";\n\n    document.body.innerHTML = str;\n  };\n  //}}}\n\n  ml.out = function () {\n    window[\"co\" + \"nsole\"] &&\n      window[\"co\" + \"nsole\"][\"log\"] &&\n      window[\"co\" + \"nsole\"][\"log\"].apply(window[\"co\" + \"nsole\"], arguments);\n  };\n  if (typeof window !== \"undefined\" && window[\"co\" + \"nsole\"]) {\n    window[\"co\" + \"nsole\"].print = function (\n      obj //nice print for objects //{{{\n    ) {\n      //return JSON.stringify(obj);\n      window[\"co\" + \"nsole\"].log(JSON.stringify(obj));\n      /*\n    function to_str(foo)\n    {\n      if(foo===undefined)\n        return 'undefined';\n      if(foo.constructor===Object)\n      {\n        var str='';\n        for(key in foo)\n          str+=','+key+':'+to_str(foo[key]);\n        str = '{'+str.substring(1)+'}';\n        return str;\n      }\n      return foo.toString();\n    }\n    if(window['co'+'nsole'] && window['co'+'nsole'].log)\n      window['co'+'nsole'].log(to_str(obj));\n    */\n    };\n    //}}}\n    window[\"co\" + \"nsole\"].printStack = function () //{{{\n    {\n      if (window[\"co\" + \"nsole\"] && window[\"co\" + \"nsole\"].log) {\n        //http://stackoverflow.com/questions/2060272/while-debugging-javascript-is-there-a-way-to-alert-current-call-stack\n        window[\"co\" + \"nsole\"].log(new Error().stack);\n        /*\n      try{wontwork}\n      catch(e){\n        window['co'+'nsole'].log(e.stack);\n        return e.stack;\n        }\n        */\n      }\n    };\n    //}}}\n  }\n  ml.assert = function (bool, msg, skipCallFcts /*, api_error*/) {\n    //works properly in webkit only\n    if (typeof window === \"undefined\") return;\n    if (!bool) {\n      var errorStack = new Error().stack;\n      var errorStr = (function () {\n        if (!skipCallFcts) skipCallFcts = 0;\n        skipCallFcts++;\n        if (\n          ml.browser().usesGecko &&\n          window[\"co\" + \"nsole\"] &&\n          window[\"co\" + \"nsole\"].log\n        )\n          window[\"co\" + \"nsole\"].log(errorStack);\n        if (errorStack) {\n          do {\n            errorStack = errorStack.replace(/.*[\\s\\S]/, \"\");\n            //fct=fct.caller;\n          } while (skipCallFcts--);\n          var fctLine = /[^\\/]*$/\n            .exec(errorStack.split(\"\\n\")[0])\n            .toString()\n            .replace(/\\:[^\\:]*$/, \"\");\n          //return 'assertion fail at '+scriptSource+':'+(fct.name?fct.name:'(anonymous)')+':'+/[^:]*(?=:(?!.*:.*))/.exec(fctLine);\n        }\n        return \"assertion fail at \" + fctLine;\n      })();\n      if (msg !== undefined)\n        errorStr += \" (\" + ((msg.join && msg.join(\",\")) || msg) + \")\";\n\n      if (window[\"co\" + \"nsole\"] && window[\"co\" + \"nsole\"].log) {\n        window[\"co\" + \"nsole\"].log(errorStr);\n        //if(cwindow['co'+'nsole']onsole['assert']) window['co'+'nsole']['assert'](false);\n      }\n      for (var i = 3; i < arguments.length; i++) {\n        if (window[\"co\" + \"nsole\"] && window[\"co\" + \"nsole\"].log)\n          window[\"co\" + \"nsole\"].log(arguments[i]);\n        else errorStr += arguments[i] + \"\\n\";\n      }\n      if (window.location.hostname === \"localhost\")\n        window.alert(errorStr + \"\\n\" + errorStack);\n      window[\"co\" + \"nsole\"].log(errorStr + \"\\n\" + errorStack);\n      setTimeout(() => {\n        throw new Error(errorStr);\n      }, 0);\n    }\n    /*\nvar scriptSource =\n//{{{\n  //source:\n    // http://stackoverflow.com/questions/984510/what-is-my-script-src-url\n    // http://stackoverflow.com/questions/1865914/can-javascript-file-get-its-ows-name\n(function() \n{\n    var scripts = document.getElementsByTagName('script'), \n        script = scripts[scripts.length - 1]; \n\n    //No need to perform the same test we do for the Fully Qualified\n    return script.getAttribute('src', 2); //this works in all browser even in FF/Chrome/Safari\n}());\n//}}}\n*/\n  };\n\n  //}}}\n  ml.addHashListener = function (\n    fct,\n    runOnInit //{{{\n  ) {\n    if (window.onhashchange !== undefined) {\n      //window.onhashchange=function(){\n      //  fct();\n      //};\n      //window.addEventListener('hashchange',fct,false);\n      window.addEventListener(\n        \"hashchange\",\n        function () {\n          fct();\n        },\n        false\n      );\n    } else {\n      var actualHash = location.hash;\n      ml.addTactFct(function () {\n        if (location.hash != actualHash) {\n          actualHash = location.hash;\n          fct();\n        }\n      });\n    }\n    if (runOnInit) fct();\n  };\n  //}}}\n  ml.controlKeyPressed = function (\n    ev //{{{\n  ) {\n    return ev.ctrlKey || ev.altKey || ev.metaKey;\n  };\n  //}}}\n\n  var faviconEl;\n  ml.changeIcon = function (\n    url //{{{\n  ) {\n    var createNewEl = ml.browser().usesGecko;\n    if (!faviconEl || createNewEl) {\n      var REL = \"shortcut icon\";\n      var oldlinks = document.getElementsByTagName(\"link\");\n      for (var i = 0; i < oldlinks.length; i++) {\n        var rel = oldlinks[i].getAttribute(\"rel\");\n        if (rel && rel.toLowerCase() == REL)\n          document.head.removeChild(oldlinks[i]);\n      }\n\n      faviconEl = document.createElement(\"link\");\n      faviconEl.rel = REL;\n      faviconEl.type = \"image/png\"; //needed for webkit dynamic favicon\n      document.head.appendChild(faviconEl);\n    }\n    faviconEl.href = url;\n\n    /*\n  if(!faviconEl)\n  {\n  //var REL = 'shortcut icon';\n    var REL = 'icon';\n    var oldlinks=document.getElementsByTagName('link');\n    for(var i=0;i<oldlinks.length;i++)\n      if(oldlinks[i].getAttribute('rel').toLowerCase()==REL)\n        document.head.removeChild(oldlinks[i]);\n\n    faviconEl      = document.createElement('link');\n    faviconEl.rel  = REL;\n    faviconEl.type = 'image/png'; //needed for webkit dynamic favicon\n    document.head.appendChild(faviconEl);\n  }\n  faviconEl.href=url;\n  */\n    /*\n  //var REL = 'shortcut icon';\n  var REL = 'icon';\n  if(!faviconEl)\n  {\n    var oldlinks=document.getElementsByTagName('link');\n    for(var i=0;i<oldlinks.length;i++)\n      if(oldlinks[i].getAttribute('rel').toLowerCase()==REL)\n        document.head.removeChild(oldlinks[i]);\n  }\n  else\n    {try{document.head.removeChild(faviconEl);}catch(e){}}\n\n  faviconEl      = document.createElement('link');\n  faviconEl.rel  = REL;\n  faviconEl.href = url;\n  faviconEl.type = 'image/png'; //needed for webkit dynamic favicon\n  if(!window.stopi) document.head.appendChild(faviconEl);\n  //*/\n  };\n  //}}}\n  ml.canvasIcon = function (\n    ctxTsf //{{{\n  ) {\n    var canvas = document.createElement(\"canvas\");\n    canvas.height = 32;\n    canvas.width = 32;\n    var ctx = canvas.getContext(\"2d\");\n\n    ctx = ctxTsf(ctx);\n\n    ml.changeIcon(canvas.toDataURL());\n    //if(firstTime) //chrome bug fix\n    //ml.changeIcon(canvas.toDataURL());\n  };\n  //}}}\n  ml.timeIcon = function (\n    scale,\n    color,\n    twelveClock //{{{\n  ) {\n    if (!scale) scale = 1;\n    if (!color) color = \"black\";\n    var d = new Date();\n    var canvas = document.createElement(\"canvas\");\n    canvas.height = 32 / scale;\n    canvas.width = 32 / scale;\n    var ctx = canvas.getContext(\"2d\");\n\n    ctx.fillStyle = color;\n    ctx.font = Math.floor(15 / scale) + \"pt arial\";\n    ctx.fillText(\n      ml.date.readable.getHours(d, twelveClock),\n      0,\n      ml.browser().usesGecko ? 15 / scale : 14 / scale\n    );\n    ctx.font = 16 / scale + \"pt arial\";\n    ctx.fillText(ml.date.readable.getMinutes(d), 5 / scale, 32 / scale);\n\n    return canvas.toDataURL();\n  };\n  //}}}\n  ml.doneIcon = function (\n    d,\n    color1,\n    color2 //{{{\n  ) {\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    var h = d;\n    var w = d;\n    canvas.height = h;\n    canvas.width = w;\n    ctx.clearRect(0, 0, w, h);\n    //var lingrad=ctx.createLinearGradient(0,0,0,150);\n    var lingrad = ctx.createLinearGradient(0, 0, 0, h);\n    lingrad.addColorStop(0, color2);\n    lingrad.addColorStop(1, color1);\n    ctx.fillStyle = lingrad;\n\n    ctx.beginPath();\n\n    var delta = [w / 20, -h / 4];\n\n    var p1 = [0, h / 2];\n    var p2 = [w / 10, h / 2];\n    //var p3  =[w/4,h/2+h/5+h/10];\n    var p3 = [w / 4, h - h / 4];\n    var p4 = [w - w / 10, 0];\n    var p5 = [w, 0];\n    var p6 = [w, h / 10];\n    var p7 = [w / 4, h];\n    var p6a = [p7[0] + delta[0] + w / 10, p7[1] + delta[1] - h / 10];\n    var p6b = [p7[0] + w / 10, p7[1] - h / 10];\n    var p8 = [0, h / 2 + h / 10];\n\n    var p3a = [p7[0] - w / 10, p7[1] - h / 10];\n    var p3a = [p3a[0] + w / 40, p3a[1] - h / 40];\n    var p3b = [p3[0] + delta[0], p3[1] + delta[1]];\n    //var p3b =[p3a[0]+delta[0]+w/10,p3a[1]+delta[1]-h/10];\n\n    function grad() {\n      ctx.moveTo(p1[0], p1[1]);\n      ctx.lineTo(p2[0], p2[1]);\n      ctx.lineTo(p3[0], p3[1]);\n      ctx.lineTo(p3a[0], p3a[1]);\n      //ctx.lineTo(p3b[0],p3b[1]);\n      //ctx.lineTo(p4[0],p4[1]);\n      ctx.quadraticCurveTo(p3b[0], p3b[1], p4[0], p4[1]);\n      ctx.lineTo(p5[0], p5[1]);\n      ctx.lineTo(p6[0], p6[1]);\n      //ctx.lineTo(p6b[0],p6b[1]);\n      //ctx.lineTo(p6a[0],p6a[1]);\n      //ctx.quadraticCurveTo(p6a[0],p6a[1],p6b[0],p6b[1]);\n      ctx.quadraticCurveTo(p6a[0], p6a[1], p7[0], p7[1]);\n      ctx.lineTo(p7[0], p7[1]);\n      ctx.lineTo(p8[0], p8[1]);\n      ctx.lineTo(p1[0], p1[1]);\n    }\n\n    grad();\n\n    ctx.fill();\n    //ctx.stroke();\n\n    return canvas.toDataURL();\n  };\n  //}}}\n  const cache__colorImageUrls = {};\n  ml.getColorImageURL = function (\n    color,\n    scale //{{{\n  ) {\n    if (!scale) scale = 1;\n\n    if (!cache__colorImageUrls[color]) {\n      var canvas = document.createElement(\"canvas\");\n      canvas.height = 32 / scale;\n      canvas.width = 32 / scale;\n      var ctx = canvas.getContext(\"2d\");\n\n      ctx.scale(1 / scale, 1 / scale);\n\n      ctx.fillStyle = color;\n      ctx.fillRect(0, 0, 300, 150);\n\n      cache__colorImageUrls[color] = canvas.toDataURL();\n    }\n    return cache__colorImageUrls[color];\n  };\n  //}}}\n  ml.timerIcon = function (\n    diff,\n    percent,\n    scale,\n    color //{{{\n  ) {\n    ml.assert(scale === undefined);\n    ml.assert(color === undefined);\n\n    //var FILL_DONE='#faa';\n    //var FILL_LEFT='#0f0';\n    //var FILL_FINISH='red';\n    //var FILL_STOPW='transparent';\n\n    var FILL_DONE = \"#aaf\";\n    var FILL_LEFT = \"#eee\";\n    //var FILL_LEFT='transparent';\n    var FILL_FINISH = \"#e11\";\n    var FILL_STOPW = FILL_LEFT;\n    //FILL_FINISH=FILL_DONE;\n    //var TEXT_COLOR=\"#444\";\n    var TEXT_COLOR = \"black\";\n    //var TEXT_COLOR=\"#111\";\n\n    var ICON_SIZE = 16;\n\n    if (diff <= 0 && percent)\n      return ml.getColorImageURL(\n        Math.abs(diff) % 2 === 0 ? FILL_FINISH : \"transparent\",\n        32 / ICON_SIZE\n      );\n    if (diff <= 0) diff = 0;\n\n    var canvas = document.createElement(\"canvas\");\n    canvas.height = ICON_SIZE;\n    canvas.width = ICON_SIZE;\n    var ctx = canvas.getContext(\"2d\");\n\n    var hours = (diff / 3600) | 0;\n    var minutes = (diff / 60) | 0;\n    var seconds = diff % 60;\n    var minutesOnBot = minutes > 59;\n    if (minutesOnBot) minutes = minutes % 60;\n    var top = minutesOnBot ? hours : minutes;\n    var bot = minutesOnBot ? minutes : seconds;\n\n    //background\n    if (percent !== undefined && percent !== null) {\n      ml.assert(percent <= 1 && percent >= 0, \"percent===\" + percent);\n      var h = canvas.height;\n      var w = canvas.width;\n\n      ctx.fillStyle = FILL_LEFT;\n      ctx.fillRect(0, 0, w, h);\n\n      ctx.moveTo(w / 2, 0);\n      var borderPos = (2 * h + 2 * w) * percent;\n      if (borderPos <= w / 2) borderPos = [w / 2 + borderPos, 0];\n      else {\n        ctx.lineTo(w, 0);\n        if (borderPos <= w / 2 + h) borderPos = [w, borderPos - w / 2];\n        else {\n          ctx.lineTo(w, h);\n          if (borderPos <= w / 2 + h + w)\n            borderPos = [w - (borderPos - w / 2 - h), h];\n          else {\n            ctx.lineTo(0, h);\n            if (borderPos <= w / 2 + h + w + h)\n              borderPos = [0, h - (borderPos - w / 2 - h - w)];\n            else {\n              ml.assert(borderPos <= w / 2 + h + w + h + w / 2, percent);\n              ctx.lineTo(0, 0);\n              borderPos = [borderPos - (w / 2 + h + w + h), 0];\n            }\n          }\n        }\n      }\n      ctx.lineTo(borderPos[0], borderPos[1]);\n      ctx.lineTo(w / 2, h / 2);\n      ctx.fillStyle = FILL_DONE;\n      //ctx.fillStyle='rgba(255,0,0,1)';\n      ctx.fill();\n    } else {\n      ctx.fillStyle = FILL_STOPW;\n      ctx.fillRect(0, 0, ctx.canvas.height, ctx.canvas.width);\n    }\n\n    //text\n    ctx.fillStyle = TEXT_COLOR;\n    if (top > 0) {\n      ctx.font = \"7pt arial\";\n      ctx.fillText(ml.date.readablize(top), 0, 7);\n      ctx.font = \"9pt arial\";\n      ctx.fillText(ml.date.readablize(bot), 2, 16);\n      /*\n    ctx.font='8pt arial';\n    ctx.fillText(ml.date.readablize(top),1,8);\n    ctx.font='8pt arial';\n    ctx.fillText(ml.date.readablize(bot),1,17);\n    */\n    } else {\n      ctx.font = \"10pt arial\";\n      ctx.textAlign = \"center\";\n      ctx.fillText(\n        bot,\n        8 + (bot.length === 1 ? 1 : 0),\n        12 + (ml.browser().usesGecko ? 1 : 0)\n      );\n    }\n\n    return canvas.toDataURL();\n\n    // old code\n    //{{{\n    //====background color with time gradient\n    //  function getColor()\n    //  {\n    //    //G: 255 -> 180\n    //    //R: 0 -> 255\n    //    //G: 180 -> 0\n    //    var green=255;\n    //    var red=0;\n    //    var GREEN_STOP = 180;\n    //    ml.assert(percent<=1,'percent==='+percent);\n    //    var delta = 255*2*percent;\n    //    green = Math.max(255-delta,GREEN_STOP);\n    //    delta -= 255-GREEN_STOP;\n    //    if(delta>0)\n    //    {\n    //      red = Math.min(delta,255);\n    //      delta -= 255;\n    //    }\n    //    if(delta>0)\n    //    {\n    //      green = GREEN_STOP-delta;\n    //      delta -= GREEN_STOP;\n    //    }\n    //    ml.assert(delta<=0);\n    //    return 'rgb('+parseInt(red)+','+parseInt(green)+',0)';\n    //  }\n    //  ctx.fillStyle = percent===undefined?getColor():'#00F';\n    //  ctx.fillRect(0,0,ctx.canvas.height,ctx.canvas.width);\n\n    //====icon generation with scaling\n    //  canvas.height=32/scale;\n    //  canvas.width=32/scale;\n    //  ctx.scale(1/scale,1/scale);\n    //\n    ////ctx.fillStyle=percent===undefined || percent===null?'white':'black';\n    //  ctx.fillStyle=TEXT_COLOR;\n    //  if(top>0)\n    //  {\n    //    ctx.font='15pt arial';\n    //    ctx.fillText(ml.date.readablize(top),0,ml.browser().usesGecko?15:14);\n    //    ctx.font='16pt arial';\n    //    ctx.fillText(ml.date.readablize(bot),5,32);\n    //  }\n    //  else\n    //  {\n    //    ctx.font='20pt arial';\n    //    ctx.textAlign='center';\n    //    ctx.fillText(bot,\n    //                16+(scale&&bot.length===1?1:0),\n    //                24+(scale>1);\n    //  }\n    //}}}\n  };\n  //}}}\n  ml.circleIcon = function (\n    imgs,\n    d,\n    offset //{{{\n  ) {\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    var h = d;\n    canvas.height = h;\n    var w = d;\n    canvas.width = w;\n    /*\n   ctx.clearRect(0,0,w,h);\n   var lingrad=ctx.createLinearGradient(0,0,0,150);\n   lingrad.addColorStop(0, '#333');\n   lingrad.addColorStop(1, '#000');\n   ctx.fillStyle = lingrad;\n  // ctx.fillStyle = 'white';\n  // ctx.fillRect(0,0,300,150);\n   */\n\n    function makeIconCircle(dim, offset) {\n      //determine center, radius, perimeter\n      var cX = (w - 1) / 2;\n      var cY = (h - 1) / 2;\n      var r = h / 2 - dim / 2; //assume h==w\n\n      for (var i in imgs) {\n        var angle = (2 * Math.PI * i) / imgs.length;\n        var X = Math.cos(angle) * r - dim / 2 + cX + offset[0];\n        var Y = Math.sin(angle) * r - dim / 2 + cY + offset[1];\n        ctx.drawImage(imgs[i], X, Y, dim, dim);\n      }\n    }\n\n    if (!offset) offset = [-4, 0];\n\n    var dim = imgs.length > 4 ? d / 3 : imgs.length == 1 ? d : d / 2;\n    makeIconCircle(dim, offset);\n    var ret = canvas.toDataURL();\n    return ret;\n  };\n  //}}}\n  ml.dooityRandColor = function (\n    gray,\n    n //{{{\n  ) {\n    function undim(color) {\n      //{{{\n      //equivalent to 0.5 alpha with white background\n      function do_(n) {\n        return parseInt(n + (255 - n) / 2, 10);\n        //opposite operation: dim\n        //return parseInt(n/2,10);\n      }\n      return [do_(color[0]), do_(color[1]), do_(color[2])];\n    }\n    //}}}\n\n    function to_str(c) {\n      //{{{\n      return \"rgb(\" + c[0] + \",\" + c[1] + \",\" + c[2] + \")\";\n    }\n    //}}}\n\n    var COLORS = [\n      [\n        [71, 183, 230],\n        [181, 226, 245],\n      ],\n      [[43, 171, 51]],\n      //[[115,194,255]],\n      //[[163,36,36]],\n      //[[64,128,64]],\n      [[250, 27, 228]],\n      //[[31, 210, 255]],\n      [[29, 189, 207]],\n      [[191, 82, 255]],\n      [[174, 82, 255]],\n      [[223, 45, 0]],\n      [[237, 85, 85]], //trailing coma treated as fatal error for google closure\n    ];\n\n    if (gray) COLORS = [[[100, 100, 100]]];\n\n    var candidates = COLORS.slice(); //one-level deep copy\n\n    function getOne() {\n      var color1;\n      var color2;\n      if (candidates.length === 0) color1 = COLORS[0][0];\n      else {\n        var i = Math.floor(Math.random() * candidates.length);\n        //i=3;\n        color1 = candidates[i][0];\n        color2 = candidates[i][1];\n        candidates.splice(i, 1);\n      }\n\n      if (!color2) color2 = undim(color1);\n\n      return [to_str(color1), to_str(color2)];\n    }\n\n    if (!n) return getOne();\n    else {\n      var ret = [];\n      while (n--) ret.push(getOne());\n      return ret;\n    }\n  };\n  //}}}\n\n  ml.getUrlVars = function () {\n    // Read a page's GET URL variables and return them as an associative array.\n    var vars = [],\n      hash;\n    var hashes = window.location.href\n      .slice(window.location.href.indexOf(\"?\") + 1)\n      .split(\"&\");\n    for (var i = 0; i < hashes.length; i++) {\n      hash = hashes[i].split(\"=\");\n      vars.push(hash[0]);\n      //vars[hash[0]] = hash[1];\n      // use of decodeURIComponent: http://stackoverflow.com/questions/747641/what-is-the-difference-between-decodeuricomponent-and-decodeuri\n      vars[hash[0]] = window[\"decodeURIComponent\"](hash[1]);\n    }\n    return vars;\n  };\n\n  ml.deleteCookies = function () //{{{\n  {\n    var c = document.cookie.split(\";\");\n    for (var i = 0; i < c.length; i++) {\n      var e = c[i].indexOf(\"=\");\n      var n = e > -1 ? c[i].substr(0, e) : c[i];\n      document.cookie = n + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n    }\n  };\n  //}}}\n\n  //offline stuff\n  ml.loadASAP = function (url, onsuccess) {\n    var isCSS = /\\.css$/.test(url);\n    var tagName = isCSS ? \"link\" : \"script\";\n    var srcName = isCSS ? \"href\" : \"src\";\n    var head = document.getElementsByTagName(\"head\")[0];\n\n    var alreadyLoading = head.getElementsByTagName(tagName);\n    for (var i in alreadyLoading)\n      if (alreadyLoading[i][srcName] === url) {\n        if (onsuccess) {\n          if (alreadyLoading[i].loadListeners)\n            alreadyLoading[i].loadListeners.push(onsuccess);\n          //!alreadyLoading[i].loadListeners ~= not loaded with loadASAP ~= synchronously loaded => already loaded\n          if (alreadyLoading[i].loaded || !alreadyLoading[i].loadListeners)\n            onsuccess();\n        }\n        return;\n      }\n\n    var attempts = 0;\n    function do_() {\n      //using same loader el => onerror doesn't get called again in chrome\n      var loader = document.createElement(tagName);\n      loader[srcName] = url;\n      loader[\"type\"] = \"text/\" + (isCSS ? \"css\" : \"javascript\");\n      if (isCSS) loader[\"rel\"] = \"stylesheet\";\n      loader.onerror = function () {\n        head.removeChild(loader);\n        setTimeout(do_, Math.min(Math.pow(2, attempts) * 1000, 60000));\n      };\n      //proxy redirects url => onload called but code not loaded\n      //-no way founded to catch this\n      loader.loadListeners = [];\n      loader.onload = function () {\n        loader.loaded = true;\n        loader.loadListeners.forEach(function (l) {\n          l();\n        });\n        if (onsuccess) onsuccess();\n      };\n      attempts++;\n      head.appendChild(loader);\n    }\n    do_();\n    /* old code --  use loadASAP instead\n  ml.loadScript=function(url,onload)\n  //{{{\n  {\n    var script= document.createElement('script');\n    script.src= url;\n    if(onload) script.onload = onload;\n    //script.type= 'text/javascript';\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n  //}}}\n  ml.loadCss=function(url)\n  //{{{\n  {\n    var link=document.createElement(\"link\")\n    link.setAttribute(\"rel\", \"stylesheet\")\n    link.setAttribute(\"type\", \"text/css\")\n    link.setAttribute(\"href\", url)\n    document.getElementsByTagName('head')[0].appendChild(link);\n  };\n  //}}}\n  */\n  };\n  (function () {\n    var cssS = {};\n    ml.addCss = function (\n      content,\n      useCache //{{{\n    ) {\n      if (!useCache || !cssS[content]) {\n        var fileref = document.createElement(\"style\");\n        fileref.appendChild(document.createTextNode(content));\n        fileref.setAttribute(\"type\", \"text/css\");\n        document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n        if (useCache) cssS[content] = true;\n      }\n    };\n    //}}}\n  })();\n\n  (function () {\n    var browser = null;\n    ml.browser = function () {\n      if (!browser) {\n        browser = {};\n\n        var vendor = window.navigator.vendor || \"\";\n        var platform = window.navigator.platform || \"\";\n        var UA = window.navigator.userAgent.toLowerCase() || \"\";\n\n        if (\n          UA.indexOf(\"googlebot\") > -1 ||\n          UA.indexOf(\"msnbot\") > -1 ||\n          UA.indexOf(\"slurp\") > -1\n        )\n          browser.isBot = true;\n        else if (UA.indexOf(\"webkit\") > -1)\n          //applewebkit instead of webkit?\n          browser.usesWebkit = true;\n        else if (UA.indexOf(\"gecko\") > -1) browser.usesGecko = true;\n\n        if (!/\\bchrome\\b/.test(UA) && /safari/.test(UA))\n          browser.isSafari = true;\n\n        if (/Win/.test(platform)) browser.isWindows = true;\n        else if (/Mac/.test(platform)) browser.isMac = true;\n\n        if (window[\"opera\"]) browser.isOpera = true;\n\n        /* todel\n      //typeof window === \"undefined\" => metro background task\n      var vendor   = typeof window !== \"undefined\" && window.navigator.vendor   || \"\";\n      var platform = typeof window !== \"undefined\" && window.navigator.platform || \"\";\n      var UA       = typeof window !== \"undefined\" && window.navigator.userAgent.toLowerCase() || \"\";\n\n      if(UA.indexOf('googlebot')>-1 || UA.indexOf('msnbot')>-1 || UA.indexOf('slurp')>-1)\n        browser.isBot=true;\n      else if(UA.indexOf(\"webkit\")>-1) //applewebkit instead of webkit?\n        browser.usesWebkit=true;\n      else if(UA.indexOf('gecko')>-1)\n        browser.usesGecko=true;\n\n      if(!/\\bchrome\\b/.test(UA) && /safari/.test(UA))\n        browser.isSafari=true;\n\n      if(platform === \"\" || /Win/.test(platform))\n        browser.isWindows=true;\n      else if(/Mac/.test(platform))\n        browser.isMac=true;\n\n      if(typeof window !== \"undefined\" && window['opera']) browser.isOpera=true;\n      */\n      }\n      return browser;\n      //ml.browser={};\n      //(function(){\n      //  var vendor = navigator.vendor || \"\";\n      //  var UA = navigator.userAgent.toLowerCase();\n      //\n      //  if(UA.indexOf('googlebot')>-1 || UA.indexOf('msnbot')>-1 || UA.indexOf('slurp')>-1)\n      //    ml.browser.isBot=true;\n      //  else if(UA.indexOf(\"webkit\")>-1) //applewebkit instead of webkit?\n      //    ml.browser.usesWebkit=true;\n      //  else if(UA.indexOf('gecko')>-1)\n      //    ml.browser.usesGecko=true;\n      //})();\n      //(function(){\n      //  var vendor = navigator.vendor || \"\";\n      //  var UA = navigator.userAgent.toLowerCase();\n\n      //  if(UA.has('googlebot') || UA.has('msnbot') || UA.has('slurp'))\n      //    ml.browser.isBot=true;\n      //  else if(window.opera !==undefined)\n      //    ml.browser.name='opera';\n      //  else if(UA.has(\"webkit\")) //applewebkit instead of webkit?\n      //  {\n      //    ml.browser.usesWebkit=true;\n      //    if(UA.has(\"chrome\"))\n      //      ml.browser.name='chrome';\n      //    else if(vendor.has(\"Apple Computer, Inc.\"))\n      //      window.safari=true;\n      //  }\n      //  else if(UA.has('gecko'))\n      //  {\n      //    ml.browser.usesGecko=true;\n      //    //ml.browser.geckoVersion=;\n      //    if(UA.has(\"firefox\"))\n      //      ml.browser.name='firefox';\n      //    else if(UA.has(\"iceweasel\"))\n      //      ml.browser.name='iceweasel';\n      //  }\n      //})();\n    };\n  })();\n\n  ml.escapeHTML = function (\n    html //{{{\n  ) {\n    //Shortest way to escape HTML (even works in non-HTML documents!): new Option(html).innerHTML\n    //alternativly create a text node\n    return html.replace(/((<)|(>)|(&))/g, function (matchStr, p1, p2, p3, p4) {\n      if (p2) return \"&lt;\";\n      if (p3) return \"&gt;\";\n      if (p4) return \"&amp;\";\n    });\n  };\n  //}}}\n\n  //DOM stuff\n  ml.setLoader = function (\n    canvas,\n    color //{{{\n  ) {\n    ml.assert(canvas && canvas.getContext(\"2d\"));\n\n    var h =\n      parseInt(ml.element.getStyle(canvas, \"height\"), 10) ||\n      parseInt(canvas.style.height, 10) ||\n      canvas.height;\n    var w =\n      parseInt(ml.element.getStyle(canvas, \"width\"), 10) ||\n      parseInt(canvas.style.width, 10) ||\n      canvas.width;\n    ml.assert(w && h && w === h, \"! width===height\");\n    canvas.height = h;\n    canvas.width = w;\n\n    var ctx = canvas.getContext(\"2d\");\n\n    var lingrad = ctx.createLinearGradient(0, 0, w, h);\n    lingrad.addColorStop(0, color ? color : \"#888\");\n    lingrad.addColorStop(1, color ? color : \"#555\");\n    ctx.strokeStyle = lingrad;\n\n    var lineWidth = w / 8;\n    ctx.lineWidth = lineWidth;\n\n    function draw(delta) {\n      ctx.clearRect(0, 0, w, h);\n      ctx.beginPath();\n      delta = delta / (Math.PI * 6);\n      var begin = 0 - Math.PI / 4;\n      var end = Math.PI / 2;\n      ctx.arc(\n        w / 2,\n        h / 2,\n        w / 2 - lineWidth / 2,\n        begin + delta,\n        end + delta,\n        false\n      );\n      ctx.stroke();\n    }\n\n    var delta = 0;\n    function frame() {\n      draw(delta++);\n      setTimeout(frame, 10);\n    }\n    frame();\n  };\n  //}}}\n  ml.getEventSource = function (\n    ev //{{{\n  ) {\n    var ret = null;\n\n    if (ev.target) ret = ev.target;\n    else if (ev.srcElement) ret = ev.srcElement;\n\n    if (ret.nodeType == 3) ret = ret.parentNode;\n\n    return ret;\n  };\n  //}}}\n  ml.isChildOf = function (\n    child,\n    parent_ //{{{\n  ) {\n    ml.assert(child.parentElement !== undefined);\n    do {\n      if (child === parent_) return true;\n    } while ((child = child.parentElement));\n    return false;\n  };\n  //}}}\n  ml.getChar = function (\n    event //{{{\n  ) {\n    if (event.type === \"keypress\") {\n      //{{{\n      //charCode seem to correspond to ascii -- http://www.asciitable.com/\n      var map = {\n        10: \"enter\", //ctrl+enter\n        13: \"enter\",\n\n        32: \" \",\n        37: \"left\",\n        38: \"up\",\n        39: \"right\",\n        40: \"down\",\n        43: \"+\",\n        45: \"-\",\n        47: \"/\",\n\n        48: \"0\",\n        49: \"1\",\n        50: \"2\",\n        51: \"3\",\n        52: \"4\",\n        53: \"5\",\n        54: \"6\",\n        55: \"7\",\n        56: \"8\",\n        57: \"9\",\n\n        63: \"?\",\n\n        65: \"A\",\n        66: \"B\",\n        67: \"C\",\n        68: \"D\",\n        69: \"E\",\n        70: \"F\",\n        71: \"G\",\n        72: \"H\",\n        73: \"I\",\n        74: \"J\",\n        75: \"K\",\n        76: \"L\",\n        77: \"M\",\n        78: \"N\",\n        79: \"O\",\n        80: \"P\",\n        81: \"Q\",\n        82: \"R\",\n        83: \"S\",\n        84: \"T\",\n        85: \"U\",\n        86: \"V\",\n        87: \"W\",\n        88: \"X\",\n        89: \"Y\",\n        90: \"Z\",\n\n        97: \"a\",\n        98: \"b\",\n        99: \"c\",\n        100: \"d\",\n        101: \"e\",\n        102: \"f\",\n        103: \"g\",\n        104: \"h\",\n        105: \"i\",\n        106: \"j\",\n        107: \"k\",\n        108: \"l\",\n        109: \"m\",\n        110: \"n\",\n        111: \"o\",\n        112: \"p\",\n        113: \"q\",\n        114: \"r\",\n        115: \"s\",\n        116: \"t\",\n        117: \"u\",\n        118: \"v\",\n        119: \"w\",\n        120: \"x\",\n        121: \"y\",\n        122: \"z\",\n\n        666: \"comma dummy\",\n      };\n      if (event.mlKeyCode) return map[event.mlKeyCode];\n      if (event.charCode === 0) {\n        //firefox sets charCode===0 && keyCode===13 on enter press\n        //ml.assert(event.keyCode,event); uncomment this since windows keypress triggers an event with keyCode===0 && charCode===0\n        return map[event.keyCode];\n      }\n      ml.assert(event.charCode);\n      return map[event.charCode];\n    }\n    //}}}\n    else if (\n      event.type === \"keydown\" ||\n      event.type === \"keyup\" ||\n      event.type === \"change\"\n    ) {\n      //{{{\n      //http://www.foreui.com/articles/Key_Code_Table.htm\n      //keyCode seem to correspond to http://www.mediaevent.de/javascript/Extras-Javascript-Keycodes.html\n      var map = {\n        13: \"enter\",\n        27: \"esc\",\n        32: \" \",\n        37: \"left\",\n        38: \"up\",\n        39: \"right\",\n        40: \"down\",\n\n        48: \"0\",\n        49: \"1\",\n        50: \"2\",\n        51: \"3\",\n        52: \"4\",\n        53: \"5\",\n        54: \"6\",\n        55: \"7\",\n        56: \"8\",\n        57: \"9\",\n\n        65: \"a\",\n        66: \"b\",\n        67: \"c\",\n        68: \"d\",\n        69: \"e\",\n        70: \"f\",\n        71: \"g\",\n        72: \"h\",\n        73: \"i\",\n        74: \"j\",\n        75: \"k\",\n        76: \"l\",\n        77: \"m\",\n        78: \"n\",\n        79: \"o\",\n        80: \"p\",\n        81: \"q\",\n        82: \"r\",\n        83: \"s\",\n        84: \"t\",\n        85: \"u\",\n        86: \"v\",\n        87: \"w\",\n        88: \"x\",\n        89: \"y\",\n        90: \"z\",\n\n        //numpad numbers\n        96: \"0\",\n        97: \"1\",\n        98: \"2\",\n        99: \"3\",\n        100: \"4\",\n        101: \"5\",\n        102: \"6\",\n        103: \"7\",\n        104: \"8\",\n        105: \"9\",\n\n        187: \"+\",\n        189: \"-\",\n\n        666: \"comma dummy\",\n      };\n      if (event.mlKeyCode) return map[event.mlKeyCode];\n      return map[event.keyCode];\n    }\n    //}}}\n    else ml.assert(false);\n  };\n  //}}}\n  ml.reqFrame = (function () {\n    function f(fct) {\n      fct();\n    }\n    if (typeof window === \"undefined\") return f;\n    var lastReq = {};\n    var req =\n      window[\"requestAnimationFrame\"] ||\n      window[\"webkitRequestAnimationFrame\"] ||\n      window[\"mozRequestAnimationFrame\"] ||\n      window[\"msRequestAnimationFrame\"];\n    var cancel =\n      window[\"cancelRequestAnimationFrame\"] ||\n      window[\"webkitCancelRequestAnimationFrame\"] ||\n      window[\"mozCancelRequestAnimationFrame\"] ||\n      window[\"msCancelRequestAnimationFrame\"];\n    //if(!req || !cancel) return function(fct){fct()};\n    if (!req || !cancel) return f;\n    return function (fct) {\n      //lastReq[fct]===lastReq[fct.toString()]\n      if (lastReq[fct]) cancel(lastReq[fct]);\n      //cpu\n      lastReq[fct] = req(fct);\n    };\n  })();\n  ml.safe_call = safe_call;\n  function safe_call(fct) {\n    if (!fct) return;\n    if (fct.constructor === Array) {\n      if (fct.filter)\n        fct = fct.filter(function (f) {\n          return !!f;\n        }); //V8 bugfix\n      for (var i = 0; i < fct.length; i++) {\n        var args = Array().slice.call(arguments);\n        Array().splice.call(args, 0, 1, fct[i]);\n        safe_call.apply(null, args);\n      }\n      return;\n    }\n    if (window.location.hostname === \"localhost\")\n      return fct.apply(null, Array().slice.call(arguments, 1));\n    else\n      try {\n        return fct.apply(null, Array().slice.call(arguments, 1));\n      } catch (e) {\n        ml.assert(false, e, 1);\n      }\n  }\n\n  //features\n  ml.asyncStore = (function () {\n    var ret = {};\n    //var CS = window['chrome']&&window['chrome']['storage']&&window['chrome']['storage']['sync'];\n    var CS =\n      window[\"chrome\"] &&\n      window[\"chrome\"][\"storage\"] &&\n      window[\"chrome\"][\"storage\"][\"local\"];\n    if (CS) {\n      ret.set = function (key, val) {\n        ml.assert(\n          key.constructor === String &&\n            (val === undefined || val.constructor === String)\n        );\n        var o = {};\n        o[key] = val;\n        CS[\"set\"](o);\n      };\n      ret.get = function (key, callback) {\n        ml.assert(key.constructor === String && callback);\n        CS[\"get\"](key, function (o) {\n          callback(o[key]);\n        });\n      };\n      ret.clear = function (callback) {\n        CS[\"clear\"](function () {\n          if (callback) callback();\n        });\n      };\n      window[\"chrome\"] &&\n        window[\"chrome\"][\"storage\"][\"onChanged\"][\"addListener\"](function (\n          changes\n        ) {\n          onChange(Object.keys(changes));\n        });\n    } else if (window[\"localStorage\"]) {\n      ret.set = function (key, val) {\n        ml.assert(\n          key.constructor === String &&\n            (val === undefined || val.constructor === String)\n        );\n        if (val) window[\"localStorage\"][key] = val;\n        else delete window[\"localStorage\"][key];\n      };\n      ret.get = function (key, callback) {\n        ml.assert(key.constructor === String && callback);\n        callback(window[\"localStorage\"][key]);\n      };\n      ret.clear = function (callback) {\n        window[\"localStorage\"][\"clear\"]();\n        if (callback) callback();\n      };\n      window.addEventListener(\"storage\", function (ev) {\n        onChange([ev[\"key\"]]);\n      });\n    }\n    if (!ret.get) ml.assert(false);\n    var onChange;\n    (function () {\n      var changeListeners = [];\n      ret.addChangeListener = function (listener) {\n        changeListeners.push(listener);\n      };\n      onChange = function (changedKeys) {\n        changeListeners.forEach(function (listener) {\n          listener(changedKeys);\n        });\n      };\n    })();\n    return ret;\n  })();\n  ml.getPersistedObject = function (\n    key,\n    callback //{{{ //put won't actualize other variables with same key -> use only one variable for each key\n  ) {\n    function retrieve(callback) {\n      ml.asyncStore.get(key, function (val) {\n        callback(JSON.parse(val || \"{}\"));\n      });\n    }\n\n    retrieve(function (ret) {\n      ml.assert(ret.constructor === Object);\n      //google closure trick works:\n      //-http://closure-compiler.appspot.com/home\n      //-var o={};Object.defineProperty(o,Object.keys({puthe:true})[0],{value:'hey'});alert(o.puthe);\n      Object.defineProperty(ret, Object.keys({ put: true }), {\n        value: function () {\n          ml.asyncStore.set(key, JSON.stringify(ret));\n        },\n      });\n      (function () {\n        var changeListeners = [];\n        Object.defineProperty(ret, Object.keys({ addChangeListener: true }), {\n          value: function (listener) {\n            changeListeners.push(listener);\n          },\n        });\n        var timeout;\n        var changedKeys = [];\n        ml.asyncStore.addChangeListener(function (newChangedKeys) {\n          ml.assert(newChangedKeys);\n          changedKeys = changedKeys.concat(newChangedKeys);\n          clearTimeout(timeout);\n          timeout = setTimeout(function () {\n            if (changedKeys.indexOf(key) > -1)\n              retrieve(function (newRet) {\n                for (var i in ret) if (newRet[i] === undefined) delete ret[i];\n                for (var i in newRet) ret[i] = newRet[i];\n                ml.safe_call(\n                  changeListeners.forEach(function (listener) {\n                    ml.safe_call(listener);\n                  })\n                );\n              });\n            changedKeys = [];\n          }, 300); //known issue: buggy if changes between tabs happens inbetween these 300ms\n        });\n      })();\n      callback(ret);\n    });\n\n    // function moveWithReferences(newObj,obj) {\n    // //doesn't keep Array references\n    //   ml.assert(obj instanceof Object && newObj instanceof Object);\n    //   for(var i in obj) if(newObj[i]===undefined) delete obj[i];\n    //   for(var i in newObj)\n    //   {\n    //     if(!(obj[i] instanceof Array) && !(newObj[i] instanceof Array) &&\n    //          obj[i] instanceof Object &&   newObj[i] instanceof Object) moveWithReferences(newObj[i],obj[i]);\n    //     else obj[i]=newObj[i];\n    //   }\n    // }\n  };\n  //}}}\n  ml.optionInput = function (id, default_, listener, opts) {\n    //opts: possibleValues,keyUpDelay,noFirstListenerCall,storageObject\n    ml.assert(\n      default_ !== undefined && id !== undefined && listener !== undefined\n    );\n    if (!opts) opts = {};\n    var isListInput, isBinaryInput, isColorInput, isTextInput;\n    if (opts.possibleValues) isListInput = true;\n    else if (default_ === true || default_ === false) isBinaryInput = true;\n    else if (default_.constructor === String && default_[0] === \"#\")\n      isColorInput = true;\n    else if (default_.constructor === String) isTextInput = true;\n    else ml.assert(false);\n\n    var el =\n      document.getElementById(id) ||\n      document.createElement(isListInput ? \"select\" : \"input\");\n    el.id = id;\n    if (isTextInput) el.type = \"text\";\n    if (isColorInput) el.type = \"color\";\n    if (isBinaryInput) el.type = \"checkbox\";\n    //if(opts.placeholder) el.setAttribute(\"placeholder\",opts.placeholder);\n    el.setAttribute(\"tabindex\", \"-1\");\n    var lastTimeout;\n    [\"change\", \"keyup\"].forEach(function (evName) {\n      el.addEventListener(\n        evName,\n        function () {\n          window.clearTimeout(lastTimeout);\n          lastTimeout = window.setTimeout(\n            function () {\n              var newVal = isBinaryInput\n                ? el[\"checked\"]\n                  ? \"true\"\n                  : \"\"\n                : el[\"value\"];\n              ml.asyncStore.get(id, function (oldVal) {\n                if (oldVal !== newVal) {\n                  ml.asyncStore.set(id, newVal);\n                  if (listener) listener(isBinaryInput ? !!newVal : newVal);\n                }\n              });\n            },\n            isTextInput ? 500 : 0\n          );\n        },\n        false\n      );\n    });\n\n    ml.asyncStore.get(id, function (val) {\n      //var val = window.localStorage.getItem(id)!==null?window.localStorage[id]:default_;//opera's hasOwnProperty allways return true\n      if (!val) val = default_;\n      if (isBinaryInput) val = !!val;\n      //if(el.nodeName==='SELECT' && el.childNodes.length===0) el.innerHTML='<option>'+val+'</option>';\n      el[isBinaryInput ? \"checked\" : \"value\"] = val;\n      //if(listener && !noFirstListenerCall) listener(val);\n      listener(val);\n    });\n\n    return el;\n  };\n\n  ml.htmlBackgroundListener = function (default_) {\n    //tricky bg images to test:\n    //-http://static.panoramio.com/photos/original/3719338.jpg\n    //-cover test: http://cdn.techpp.com/wp-content/uploads/2008/10/gmail_logo.jpg\n    //black floor: http://img.wallpaperstock.net:81/black-floor-wallpapers_6854_1680x1050.jpg\n    //http://lh6.googleusercontent.com/-AAQe-KJXX-w/TcRrpukjk6I/AAAAAAAACwE/-7gmjOI-ctQ/IMG_2649mod.jpg\n    //http://www.a-better-tomorrow.com/blog/wp-content/wallpaper_abt1.jpg\n    //http://www.gowallpaper.net/wp-content/uploads/2011/04/Windows-7-3d-wide-wallpaper-1280x800.jpg\n    //http://vistawallpapers.files.wordpress.com/2007/03/vista-wallpapers-69.jpg\n    //TODO: replace with https://i.imgur.com/cvyOo.gif\n    var LOAD_IMG_URL = \"https://i.imgur.com/zqG5F.gif\";\n\n    var BG_EL = document.documentElement;\n    var LOAD_IMG = \"url(\" + LOAD_IMG_URL + \")\";\n\n    //following 2 styles used for auto sized background for loading gif\n    BG_EL.style[\"backgroundRepeat\"] = \"no-repeat\";\n    BG_EL.style[\"backgroundPosition\"] = \"center\";\n    //fixed because no way found to set BG_EL's size to scroll size of window\n    //-http://stackoverflow.com/questions/7540418/css-setting-an-elements-size-to-the-scroll-size-of-the-page\n    BG_EL.style[\"backgroundAttachment\"] = \"fixed\";\n    //make sure size is at least size of window\n    BG_EL.style[\"min-height\"] = \"100%\";\n    BG_EL.style[\"min-width\"] = \"100%\";\n\n    var setBg;\n    (function () {\n      //{{{\n      var color;\n      var img;\n      function setCss() {\n        BG_EL.style.backgroundColor = color; //style.background='' => Opera discareds fixed and cover style\n        BG_EL.style.backgroundImage = img;\n        BG_EL.style[\"backgroundSize\"] = img === LOAD_IMG ? \"auto\" : \"cover\";\n      }\n\n      setBg = function (newUrl) {\n        //to test: resize image to screen.width and screen.height using canvas and webworkers\n        //window.screen.width;\n        //window.screen.height;\n        if (newUrl.indexOf(\".\") !== -1 || /^data:image/.test(newUrl)) {\n          var imgEl = document.createElement(\"img\");\n          var loaded;\n          imgEl.onload = function () {\n            var w = this.width;\n            var h = this.height;\n            if (w * h > 4000000)\n              alert(\n                \"The provided image has a size of \" +\n                  w +\n                  \"*\" +\n                  h +\n                  \" pixels. Large images are likely to slow down your machine. Thus only images of maximal 4 000 000 pixels -- e.g. 2500*1600 pixels -- are allowed.\"\n              );\n            else if (img === 'url(\"' + newUrl + '\")') setCss();\n            loaded = true;\n          };\n          imgEl.onerror = function () {\n            if (img === LOAD_IMG && img === 'url(\"' + newUrl + '\")') {\n              img = \"none\";\n              setCss();\n            }\n          };\n          window.setTimeout(function () {\n            if (!loaded && img === 'url(\"' + newUrl + '\")') {\n              color = \"\";\n              img = LOAD_IMG;\n              setCss();\n              color = \"\";\n              img = 'url(\"' + newUrl + '\")';\n            }\n          }, 50);\n          color = \"\";\n          img = 'url(\"' + newUrl + '\")';\n          imgEl.src = newUrl;\n        } else {\n          if (newUrl === \"\") {\n            color = \"\";\n            img = \"none\";\n          } else if (newUrl.indexOf(\"gradient\") !== -1) {\n            color = \"\";\n            img = newUrl;\n          } else {\n            color = newUrl;\n            img = \"none\";\n          }\n          setCss();\n        }\n      };\n      //}}}\n    })();\n\n    return setBg;\n\n    //// not needed when backgroundAttachment == fixed\n    //BG_EL.style['minHeight']            = '100%';\n    //BG_EL.style['minWidth ']            = '100%';\n\n    /*\nml.htmlBackground=function(inputName,default_)\n//{{{\n//tricky bg images to test:\n//-http://static.panoramio.com/photos/original/3719338.jpg\n//-cover test: http://cdn.techpp.com/wp-content/uploads/2008/10/gmail_logo.jpg\n//black floor: http://img.wallpaperstock.net:81/black-floor-wallpapers_6854_1680x1050.jpg\n//http://lh6.googleusercontent.com/-AAQe-KJXX-w/TcRrpukjk6I/AAAAAAAACwE/-7gmjOI-ctQ/IMG_2649mod.jpg\n//http://www.a-better-tomorrow.com/blog/wp-content/wallpaper_abt1.jpg\n//http://www.gowallpaper.net/wp-content/uploads/2011/04/Windows-7-3d-wide-wallpaper-1280x800.jpg\n//http://vistawallpapers.files.wordpress.com/2007/03/vista-wallpapers-69.jpg\n{\n  //TODO: replace with http://i.imgur.com/cvyOo.gif\n  var LOAD_IMG_URL = 'http://i.imgur.com/zqG5F.gif';\n\n  var BG_EL=document.documentElement;\n  var LOAD_IMG = 'url('+LOAD_IMG_URL+')';\n\n  //following 2 styles used for auto sized background for loading gif\n  BG_EL.style['backgroundRepeat'] = 'no-repeat';\n  BG_EL.style['backgroundPosition'] = 'center';\n  //fixed because no way found to set BG_EL's size to scroll size of window\n  //-http://stackoverflow.com/questions/7540418/css-setting-an-elements-size-to-the-scroll-size-of-the-page\n  BG_EL.style['backgroundAttachment'] = 'fixed';\n  //make sure size is at least size of window\n  BG_EL.style['min-height']='100%';\n  BG_EL.style['min-width']='100%';\n\n  var setBg;\n  (function(){\n  //{{{\n    var color;\n    var img;\n    function setCss()\n    {\n      BG_EL.style.backgroundColor=color; //style.background='' => Opera discareds fixed and cover style\n      BG_EL.style.backgroundImage=img;\n      BG_EL.style['backgroundSize'] = img===LOAD_IMG?'auto':'cover';\n    }\n\n    setBg=function(newUrl)\n    {\n      //to test: resize image to screen.width and screen.height using canvas and webworkers\n      //window.screen.width;\n      //window.screen.height;\n      if(newUrl.indexOf('.')!==-1 || /^data:image/.test(newUrl))\n      {\n        var imgEl=document.createElement('img');\n        var loaded;\n        imgEl.onload=function() {\n          var w=this.width;\n          var h=this.height;\n          if(w*h>4000000) alert('The provided image has a size of '+w+'*'+h+' pixels. Large images are likely to slow down your machine. Thus only images of maximal 4 000 000 pixels -- e.g. 2500*1600 pixels -- are allowed.');\n          else if(img==='url(\"'+newUrl+'\")') setCss();\n          loaded=true;\n        };\n        imgEl.onerror=function()\n        {\n          if(img===LOAD_IMG && img==='url(\"'+newUrl+'\")')\n          {\n            img='none';\n            setCss();\n          }\n        };\n        window.setTimeout(function()\n        {\n          if(!loaded && img==='url(\"'+newUrl+'\")')\n          {\n            color='';\n            img=LOAD_IMG;\n            setCss();\n            color='';\n            img='url(\"'+newUrl+'\")';\n          }\n        },50);\n        color='';\n        img='url(\"'+newUrl+'\")';\n        imgEl.src=newUrl;\n      }\n      else\n      {\n        if(newUrl==='')\n        {\n          color='';\n          img='none';\n        }\n        else if(newUrl.indexOf('gradient')!==-1)\n        {\n          color='';\n          img=newUrl;\n        }\n        else\n        {\n          color=newUrl;\n          img='none';\n        }\n        setCss();\n      }\n    }\n  //}}}\n  })();\n\n  ml.optionInput(inputName,default_||'',setBg);\n  return setBg;\n\n  //// not needed when backgroundAttachment == fixed\n  //BG_EL.style['minHeight']            = '100%';\n  //BG_EL.style['minWidth ']            = '100%';\n};\n//}}}\n*/\n  };\n\n  (function () {\n    var els = {};\n    ml.getElementByIdStatic = function (\n      id //{{{\n    ) {\n      if (!els[id]) els[id] = document.getElementById(id);\n      return els[id];\n    };\n    //}}}\n    //window['$']=ml.getElementByIdStatic;\n  })();\n\n  ml.isTouchDevice = function () {\n    //source: http://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript\n    return !!(\"ontouchstart\" in window);\n  };\n\n  ml.isExtensionBackground = function () {\n    try {\n      //try block seems to solve a bug of chrome 25\n      return !!(\n        window[\"chrome\"] &&\n        window[\"chrome\"][\"browserAction\"] &&\n        window[\"chrome\"][\"extension\"] &&\n        window[\"chrome\"][\"extension\"][\"getBackgroundPage\"] &&\n        window[\"chrome\"][\"extension\"][\"getBackgroundPage\"]() === window\n      );\n    } catch (e) {\n      return false;\n    }\n  };\n  ml.isPackagedApp = function () {\n    try {\n      //attempt to solve an unfound bug on old chrome versions\n      return !!(\n        window[\"chrome\"] &&\n        window[\"chrome\"][\"app\"] &&\n        window[\"chrome\"][\"app\"][\"window\"]\n      );\n    } catch (e) {\n      return false;\n    }\n  };\n  ml.isPackagedBackground = function () {\n    try {\n      //attempt to solve an unfound bug on old chrome versions\n      if (\n        !window[\"chrome\"] ||\n        !window[\"chrome\"][\"app\"] ||\n        !window[\"chrome\"][\"app\"][\"runtime\"]\n      )\n        return false;\n      var hasWindow;\n      try {\n        hasWindow = chrome.app.window.current();\n      } catch (e) {}\n      return !hasWindow;\n    } catch (e) {\n      return false;\n    }\n  };\n  ml.isExtension = function () {\n    try {\n      //attempt to solve an unfound bug on old chrome versions\n      return !!(\n        window[\"chrome\"] &&\n        window[\"chrome\"][\"browserAction\"] &&\n        window[\"chrome\"][\"extension\"]\n      );\n    } catch (e) {\n      return false;\n    }\n  };\n\n  ml.addCloseEvent = function (listener) {\n    if (\n      window[\"chrome\"] &&\n      window[\"chrome\"][\"runtime\"] &&\n      window[\"chrome\"][\"runtime\"][\"onSuspend\"] &&\n      ml.isPackagedApp() //need for hosted app\n    )\n      window[\"chrome\"][\"runtime\"][\"onSuspend\"][\"addListener\"](listener);\n    else {\n      window.addEventListener(\"beforeunload\", listener, false);\n      window.addEventListener(\"unload\", listener, false);\n      window.addEventListener(\"pagehide\", listener, false); //https://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/\n    }\n  };\n\n  (function () {\n    var listeners = [];\n    ml.addResizeTimeoutEvent = function (listener, delay, preListener) {\n      if (listeners.indexOf(listener) !== -1) return;\n      listeners.push(listener);\n      var lastTimeout;\n      window.addEventListener(\"resize\", function () {\n        if (preListener) preListener();\n        window.clearTimeout(lastTimeout);\n        lastTimeout = window.setTimeout(listener, delay);\n      });\n    };\n  })();\n\n  ml.replaceWebApp = function (newUrl) {\n    if (window.parent !== window) return false;\n    document.body.innerHTML = \"\";\n    var iframe_ = document.createElement(\"iframe\");\n    iframe_.src = newUrl;\n    iframe_.setAttribute(\"frameborder\", \"0\");\n    document.documentElement.style[\"overflow\"] = document.body.style[\n      \"overflow\"\n    ] = \"hidden\";\n    document.documentElement.style[\"margin\"] = document.body.style[\"margin\"] =\n      \"0\";\n    document.documentElement.style[\"width\"] = document.body.style[\n      \"width\"\n    ] = document.documentElement.style[\"height\"] = document.body.style[\n      \"height\"\n    ] = iframe_.style[\"height\"] = iframe_.style[\"width\"] = \"100%\";\n    document.body.appendChild(iframe_);\n    return true;\n  };\n\n  ml.loadAnalytics = function (id, useSSL) {\n    var _gaq = _gaq || [];\n    _gaq.push([\"_setAccount\", id]);\n    _gaq.push([\"_trackPageview\"]);\n\n    (function () {\n      var ga = document.createElement(\"script\");\n      ga.type = \"text/javascript\";\n      ga.async = true;\n      //ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n      ga.src =\n        (\"https:\" == document.location.protocol || useSSL\n          ? \"https://ssl\"\n          : \"http://www\") + \".google-analytics.com/ga.js\";\n      (\n        document.getElementsByTagName(\"head\")[0] ||\n        document.getElementsByTagName(\"body\")[0]\n      ).appendChild(ga);\n    })();\n\n    window[\"_gaq\"] = _gaq; //added by me\n  };\n\n  ml.i18n = {};\n  (function () {\n    var lang;\n    //__promo images:\n    //lang='fr';\n    function init(callback) {\n      setTimeout(function () {\n        //attempt to solve an unfound bug on old chrome versions\n        function fallback() {\n          lang =\n            window.navigator.userLanguage || window.navigator.language || null;\n          callback();\n        }\n        try {\n          if (\n            window[\"chrome\"] &&\n            window[\"chrome\"][\"i18n\"] &&\n            window[\"chrome\"][\"i18n\"][\"getAcceptLanguages\"]\n          )\n            window[\"chrome\"][\"i18n\"][\"getAcceptLanguages\"](function (langs) {\n              langs &&\n                [\"en\", \"de\", \"fr\"].some(function (l) {\n                  if (langs.indexOf(l) > -1) {\n                    lang = l;\n                    return true;\n                  }\n                });\n              if (lang === undefined) lang = null;\n              callback();\n            });\n          else {\n            fallback();\n          }\n        } catch (e) {\n          //ml.assert(false);\n          fallback();\n        }\n      }, 0);\n    }\n    ml.i18n.get = function (callback) {\n      if (lang === undefined)\n        init(function () {\n          callback(lang);\n        });\n      else callback(lang);\n    };\n    ml.i18n.isAMPMTime = function (callback) {\n      ml.i18n.get(function (lang) {\n        callback(lang !== \"fr\" && lang !== \"de\");\n      });\n    };\n  })();\n\n  ml.noti = {};\n  (function () {\n    var _noti;\n    function _init() {\n      _noti = (function () {\n        var ret = null;\n        if (\n          !ml.browser().usesGecko &&\n          window.webkitNotifications &&\n          window.webkitNotifications.checkPermission\n        ) {\n          //somehow webkitNotifications is defined in Firefox\n          //http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification\n          //PERMISSION_ALLOWED (0) indicates that the user has granted permission to scripts with this origin to show notifications.\n          //PERMISSION_NOT_ALLOWED (1) indicates that the user has not taken an action regarding notifications for scripts from this origin.\n          //PERMISSION_DENIED (2) indicates that the user has explicitly blocked scripts with this origin from showing notifications.\n          ret = {};\n          ret.permission_notAllowed = function () {\n            return window.webkitNotifications.checkPermission() != 0;\n          };\n          ret.permission_denied = function () {\n            return window.webkitNotifications.checkPermission() == 2;\n          };\n          var SETTINGS_URL =\n            \"chrome://settings/contentExceptions#notifications\";\n          var APP_NAME = \"Timer Tab\";\n          //`window.open(settings_url);` doesn't work\n          ml.noti.manualUnblockMsg =\n            \"you have previously blocked notifications for \" +\n            APP_NAME +\n            \" \\n\\ngo to the address:\\n\" +\n            SETTINGS_URL +\n            '\\nor manually go to:\\n\"Settings -> Show advanced settings... -> Privacy -> Content Settings -> Notifications -> Manage exceptions...\"\\nand remove ' +\n            window.location.origin +\n            \" from the blocked Sites\";\n          ret.permission_req = function (callback) {\n            window.webkitNotifications.requestPermission(function () {\n              if (callback) callback();\n            });\n          };\n          ret.fire = function (text1, text2, icon, onshow, onclick) {\n            try {\n              var __noti = window.webkitNotifications.createNotification(\n                icon,\n                text1,\n                text2\n              );\n              __noti.ondisplay = onshow;\n              __noti.onclick = onclick;\n              __noti.show();\n              return function () {\n                __noti.cancel();\n              };\n            } catch (e) {}\n          };\n        } else if (\n          window.Notification &&\n          window.Notification.requestPermission\n        ) {\n          //http://jsfiddle.net/robnyman/TuJHx/\n          //http://www.w3.org/TR/notifications/\n          ret = {};\n          ret.permission_notAllowed = function () {\n            return window.Notification.permission !== \"granted\";\n          };\n          ret.permission_denied = function () {\n            return window.Notification.permission === \"denied\";\n          };\n          ret.permission_req = function (callback) {\n            window.Notification.requestPermission(function () {\n              if (callback) callback();\n            });\n          };\n          ret.fire = function (text1, text2, icon, onshow, onclick) {\n            try {\n              var __noti = new Notification(text1, {\n                dir: \"auto\",\n                lang: \"\",\n                body: text2,\n                iconUrl: icon,\n              });\n              __noti.onshow = onshow;\n              __noti.onclick = onclick;\n              return function () {\n                __noti.close();\n              };\n            } catch (e) {}\n          };\n        }\n        return ret;\n      })();\n    }\n    ml.noti.isAvailable = function () {\n      if (!_noti) _init();\n      return !!_noti;\n    };\n    ml.noti.permission_notAllowed = function () {\n      if (!_noti) _init();\n      return !_noti || _noti.permission_notAllowed();\n    };\n    ml.noti.permission_denied = function () {\n      if (!_noti) _init();\n      return !_noti || _noti.permission_denied();\n    };\n    ml.noti.permission_req = function (callback) {\n      if (!_noti) _init();\n      if (!_noti) return;\n      if (_noti.permission_notAllowed()) _noti.permission_req(callback);\n      else if (callback) callback();\n    };\n    ml.noti.fire = function (txt1, txt2, icon, displayTime, onclick) {\n      if (!_noti) _init();\n      if (!_noti) return function () {};\n      var _close = _noti.fire(\n        txt1,\n        txt2,\n        icon,\n        function () {\n          setTimeout(_close, displayTime);\n        },\n        onclick\n      );\n      return _close;\n    };\n  })();\n\n  /* unused code\n{{{\n//application cache\n//TODO\n//  -make little popup instead of blocking website\n//  -fix bug: first time on website shouldn't notify downloading of cache\nif(window.applicationCache && window.applicationCache.status!=0)\n//{{{\n//finally i don't want the user to notice downloading of new version even if that means the new version will appear only on the next refresh\n//applicationCache.status===0 <~> uncached\n//even by deleting all data in chrome's options status remains 2 in chrome. but is ==0 in private browsing mode\n{\n  var overlay;\n  window.applicationCache.ondownloading=function(){\n    overlay = document.createElement('div');\n      overlay.style.position='fixed';\n      overlay.style.top='0px';\n      overlay.style.left='0px';\n      overlay.style.background='white';\n      overlay.style.width='100%';\n      overlay.style.height='100%';\n      overlay.style.textAlign='center';\n      overlay.innerHTML='<div style=\"padding: 30px !important; margin: 0 !important;font-size: 15px !important; color: black !important;display:inline-block\"><canvas id=\"appCacheLoader\" style=\"width:16px;height:16px;display: inline-block;float:left;position:relative;top:1px;\"></canvas>&nbsp;downloading new version</div>';\n      overlay.style.zIndex='9999999999';\n    document.body.appendChild(overlay);\n    ml.setLoader(document.getElementById('appCacheLoader'));\n  };\n  window.applicationCache.onupdateready=function(){\n    window.location='';\n  };\n  //shoudn't be needed\n  window.applicationCache.oncached=function(){\n    window.location='';\n  };\n  window.applicationCache.oncached=function(){\n    window.location='';\n  };\n  window.applicationCache.onerror=function()\n  {\n    if(overlay) document.body.removeChild(overlay);\n  };\n}\n//}}}\n\nml.arePermutations=function(list1,list2)\n//{{{\n{\n  list1 = list1.slice();//one-level deep copy\n  list2 = list2.slice();//one-level deep copy\n  if(list1.length!==list2.length)\n    return false;\n  list1.sort(function(a,b)\n  {\n    return a<b;\n  });\n  list2.sort(function(a,b)\n  {\n    return a<b;\n  });\n  for(var i=0;i<list1.length;i++)\n    if(list1[i]!==list2[i])\n      return false;\n  return true;\n};\n//}}}\n\n//sha-1\n//{{{\n(function()\n{\n  // \n  // A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n  // in FIPS PUB 180-1\n  // Version 2.1a Copyright Paul Johnston 2000 - 2002.\n  // Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n  // Distributed under the BSD License\n  // See http://pajhome.org.uk/crypt/md5 for details.\n  // \n\n  // \n  // Configurable variables. You may need to tweak these to be compatible with\n  // the server-side, but the defaults work in most cases.\n  // \n  var hexcase = 0;  // hex output format. 0 - lowercase; 1 - uppercase       \n  var b64pad  = \"\"; // base-64 pad character. \"=\" for strict RFC compliance  \n  var chrsz   = 8;  // bits per input character. 8 - ASCII; 16 - Unicode     \n\n  // \n  // These are the functions you'll usually want to call\n  // They take string arguments and return either hex or base-64 encoded strings\n  // \n  function hex_sha1(s){return binb2hex(core_sha1(str2binb(s),s.length * chrsz));}\n  function b64_sha1(s){return binb2b64(core_sha1(str2binb(s),s.length * chrsz));}\n  function str_sha1(s){return binb2str(core_sha1(str2binb(s),s.length * chrsz));}\n  function hex_hmac_sha1(key, data){ return binb2hex(core_hmac_sha1(key, data));}\n  function b64_hmac_sha1(key, data){ return binb2b64(core_hmac_sha1(key, data));}\n  function str_hmac_sha1(key, data){ return binb2str(core_hmac_sha1(key, data));}\n\n  // \n  // Perform a simple self-test to see if the VM is working\n  // \n  function sha1_vm_test()\n  {\n    return hex_sha1(\"abc\") == \"a9993e364706816aba3e25717850c26c9cd0d89d\";\n  }\n\n  // \n  // Calculate the SHA-1 of an array of big-endian words, and a bit length\n  // \n  function core_sha1(x, len)\n  {\n    // append padding\n    x[len >> 5] |= 0x80 << (24 - len % 32);\n    x[((len + 64 >> 9) << 4) + 15] = len;\n\n    var w = Array(80);\n    var a =  1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d =  271733878;\n    var e = -1009589776;\n\n    for(var i = 0; i < x.length; i += 16)\n    {\n      var olda = a;\n      var oldb = b;\n      var oldc = c;\n      var oldd = d;\n      var olde = e;\n\n      for(var j = 0; j < 80; j++)\n      {\n        if(j < 16) w[j] = x[i + j];\n        else w[j] = rol(w[j-3] ^ w[j-8] ^ w[j-14] ^ w[j-16], 1);\n        var t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)),\n                         safe_add(safe_add(e, w[j]), sha1_kt(j)));\n        e = d;\n        d = c;\n        c = rol(b, 30);\n        b = a;\n        a = t;\n      }\n\n      a = safe_add(a, olda);\n      b = safe_add(b, oldb);\n      c = safe_add(c, oldc);\n      d = safe_add(d, oldd);\n      e = safe_add(e, olde);\n    }\n    return Array(a, b, c, d, e);\n\n  }\n\n  // \n  // Perform the appropriate triplet combination function for the current\n  // iteration\n  // \n  function sha1_ft(t, b, c, d)\n  {\n    if(t < 20) return (b & c) | ((~b) & d);\n    if(t < 40) return b ^ c ^ d;\n    if(t < 60) return (b & c) | (b & d) | (c & d);\n    return b ^ c ^ d;\n  }\n\n  // \n  // Determine the appropriate additive constant for the current iteration\n  // \n  function sha1_kt(t)\n  {\n    return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n           (t < 60) ? -1894007588 : -899497514;\n  }\n\n  // \n  // Calculate the HMAC-SHA1 of a key and some data\n  // \n  function core_hmac_sha1(key, data)\n  {\n    var bkey = str2binb(key);\n    if(bkey.length > 16) bkey = core_sha1(bkey, key.length * chrsz);\n\n    var ipad = Array(16), opad = Array(16);\n    for(var i = 0; i < 16; i++)\n    {\n      ipad[i] = bkey[i] ^ 0x36363636;\n      opad[i] = bkey[i] ^ 0x5C5C5C5C;\n    }\n\n    var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * chrsz);\n    return core_sha1(opad.concat(hash), 512 + 160);\n  }\n\n  // \n  // Add integers, wrapping at 2^32. This uses 16-bit operations internally\n  // to work around bugs in some JS interpreters.\n  //\n  function safe_add(x, y)\n  {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xFFFF);\n  }\n\n  // \n  // Bitwise rotate a 32-bit number to the left.\n  // \n  function rol(num, cnt)\n  {\n    return (num << cnt) | (num >>> (32 - cnt));\n  }\n\n  // \n  // Convert an 8-bit or 16-bit string to an array of big-endian words\n  // In 8-bit function, characters >255 have their hi-byte silently ignored.\n  // \n  function str2binb(str)\n  {\n    var bin = Array();\n    var mask = (1 << chrsz) - 1;\n    for(var i = 0; i < str.length * chrsz; i += chrsz)\n      bin[i>>5] |= (str.charCodeAt(i / chrsz) & mask) << (32 - chrsz - i%32);\n    return bin;\n  }\n\n  // \n  // Convert an array of big-endian words to a string\n  // \n  function binb2str(bin)\n  {\n    var str = \"\";\n    var mask = (1 << chrsz) - 1;\n    for(var i = 0; i < bin.length * 32; i += chrsz)\n      str += String.fromCharCode((bin[i>>5] >>> (32 - chrsz - i%32)) & mask);\n    return str;\n  }\n\n  // \n  // Convert an array of big-endian words to a hex string.\n  // \n  function binb2hex(binarray)\n  {\n    var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n    var str = \"\";\n    for(var i = 0; i < binarray.length * 4; i++)\n    {\n      str += hex_tab.charAt((binarray[i>>2] >> ((3 - i%4)*8+4)) & 0xF) +\n             hex_tab.charAt((binarray[i>>2] >> ((3 - i%4)*8  )) & 0xF);\n    }\n    return str;\n  }\n\n  //\n  // Convert an array of big-endian words to a base-64 string\n  //\n  function binb2b64(binarray)\n  {\n    var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var str = \"\";\n    for(var i = 0; i < binarray.length * 4; i += 3)\n    {\n      var triplet = (((binarray[i   >> 2] >> 8 * (3 -  i   %4)) & 0xFF) << 16)\n                  | (((binarray[i+1 >> 2] >> 8 * (3 - (i+1)%4)) & 0xFF) << 8 )\n                  |  ((binarray[i+2 >> 2] >> 8 * (3 - (i+2)%4)) & 0xFF);\n      for(var j = 0; j < 4; j++)\n      {\n        if(i * 8 + j * 6 > binarray.length * 32) str += b64pad;\n        else str += tab.charAt((triplet >> 6*(3-j)) & 0x3F);\n      }\n    }\n    return str;\n  }\n})();\n//}}}\n\nml.checkCookies=function(appName)\n//{{{\n{\n  function areCookiesEnabled()\n  {\n    function createCookie(name, value, days)\n    {\n      var expires;\n      if (days) {\n          var date = new Date();\n          date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n          expires = \"; expires=\" + date.toGMTString();\n      }\n      else expires = \"\";\n      document.cookie = name + \"=\" + value + expires + \"; path=/\";\n    }\n    function readCookie(name)\n    {\n      var nameEQ = name + \"=\";\n      var ca = document.cookie.split(';');\n      for (var i = 0; i < ca.length; i++) {\n          var c = ca[i];\n          while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n      }\n      return null;\n    }\n\n    function eraseCookie(name)\n    {\n      createCookie(name, \"\", -1);\n    }\n\n    var r = false;\n    createCookie(\"testingcookies\", \"1\", 1);\n    if (readCookie(\"testingcookies\") != null) {\n        r = true;\n        eraseCookie(\"testing\");\n    }\n    return r;\n  }\n\n  if(areCookiesEnabled())\n    return true;\n\n  var str=\"<div style='padding: 30px'>\";//;width: 100%;text-align:center'>\";\n  str+='your cookies seem to be disabled<br>enable them in order to use '+(appName?appName:'the webapp');\n  str+=\"</div>\";\n\n  document.body.innerHTML=str;\n\n  return false;\n};\n//}}}\n\nif(location.hostname[location.hostname.length-1]==='.') location.hostname=location.hostname.substr(0,location.hostname.length-1);\n\n// IE check\n// {{{\n// //TODO: this is temporary and not a solution for apps not supporting IE9 since the text does suggest that IE9 will do\n// //IE8 returns exception on interpreting this file so catch IE8\n// //transition check in order to catch IE8 -- quote: \"if a browser supports a certain property, it won't return undefined for it. A supported CSS property returns empty string when its not yet set.\"\n// //transition not supported on IE9\n// var el = document.createElement('div');\n// el.style['cssText']='background-color:rgba(150,255,150,.5)';\n// //if( window.navigator.userAgent.indexOf('MSIE')!==-1 && document.body.style['transition']===undefined && location.href.indexOf('passtest')===-1)\n// if( window.navigator.userAgent.indexOf('MSIE')!==-1 && el.style['backgroundColor'].indexOf('rgba')===-1 && location.href.indexOf('passtest')===-1)\n//   {document.body.innerHTML=\"<style>*{font-size:20px !important;text-align:center}</style><div style='padding: 30px;'>You seem to use an old version of Internet Explorer.<br>Please upgrade to Internet Explorer 9.</div>\";ml=undefined;return;}\n// }}}\n\nElement.prototype.text=function() //removes ranges\n//{{{\n//some selection behaviour:\n//-adding range doesn't set focus when done through onsole, but seem to set focus otherwise\n//-adding range while window selection already has a range -> nothing changes\n{\n  //don't use, kinda buggy\n  ml.assert(false);\n\n  var changeHandler = this.onchange;\n  this.onchange=undefined;\n  var focusHandler = this.onfocus;\n  this.onfocus=undefined;\n  var blurHandler = this.onblur;\n  this.onblur=undefined;\n\n  var sel = window.getSelection();\n\n  var rangeCopy;\n  if(sel.rangeCount>0) rangeCopy = sel.getRangeAt(0).cloneRange();\n  sel.removeAllRanges();\n\n  var range = document.createRange();\n  range.selectNodeContents(this);\n  ml.assert(sel.rangeCount===0);\n  sel.addRange(range);\n  var ret = sel.toString();\n\n  if(this.innerText && this.innerText !== ret){sel.removeAllRanges(); sel.addRange(range);ret=sel.toString()}\n  if(this.innerText) ml.assert(this.innerText===ret,'text() false return',\"'\"+this.innerText+\"'!=='\"+ret+\"'\");\n\n  //if(this.innerText!==ret){\n  //  //possible cause: user-select css\n  //  onsole.log(\"'\"+this.innerText+\"'!=='\"+ret+\"'\");\n  //  //onsole.printStack();\n  //  onsole.log(range.toString());\n  //  onsole.log(sel.toString());\n  //  sel.removeAllRanges();\n  //  sel.addRange(range);\n  //  onsole.log(sel.toString());\n  //  //onsole.log(gE(this.parentNode.id));\n  //  //onsole.log(this.isDisplayed());\n  //  throw('fm');\n  //}\n\n  sel.removeAllRanges();\n  this.blur();\n  if(rangeCopy) sel.addRange(rangeCopy);\n\n  //onsole.log(ret);\n  this.onblur=focusHandler;\n  this.onfocus=focusHandler;\n  this.onchange=changeHandler;\n  return ret;\n};\n//}}}\n\nString.prototype.isNumber=function()\n//{{{\n//test if is an integer or a float\n{\n  return that.search(/[^0-9\\-\\+\\.]/)==-1;\n};\n//}}}\n\n//object stuff\n//use Object.keys(o).length instead?\nml.len=function(obj){ \n//count number of keys of an object\n  //if(obj.constructor === Array) return obj.length;\n  ml.assert(obj.constructor === Object);\n  var ret=0,key;\n  for(key in obj)\n    if(obj.hasOwnProperty(key)) ret++; //hasOwnProperty does not check down the object's prototype chain\n  return ret;\n}; \n\n\n//don't work if text is html code\nml.linkify=function(text){ \n//  var linkify = (function(){\n//  //{{{\n//  var\n//    SCHEME = \"[a-z\\\\d.-]+://\",\n//    IPV4 = \"(?:(?:[0-9]|[1-9]\\\\d|1\\\\d{2}|2[0-4]\\\\d|25[0-5])\\\\.){3}(?:[0-9]|[1-9]\\\\d|1\\\\d{2}|2[0-4]\\\\d|25[0-5])\",\n//    HOSTNAME = \"(?:(?:[^\\\\s!@#$%^&*()_=+[\\\\]{}\\\\\\\\|;:'\\\",.<>/?]+)\\\\.)+\",\n//    TLD = \"(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)\",\n//    HOST_OR_IP = \"(?:\" + HOSTNAME + TLD + \"|\" + IPV4 + \")\",\n//    PATH = \"(?:[;/][^#?<>\\\\s]*)?\",\n//    QUERY_FRAG = \"(?:\\\\?[^#<>\\\\s]*)?(?:#[^<>\\\\s]*)?\",\n//    URI1 = \"\\\\b\" + SCHEME + \"[^<>\\\\s]+\",\n//    URI2 = \"\\\\b\" + HOST_OR_IP + PATH + QUERY_FRAG + \"(?!\\\\w)\",\n//    \n//    MAILTO = \"mailto:\",\n//    EMAIL = \"(?:\" + MAILTO + \")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@\" + HOST_OR_IP + QUERY_FRAG + \"(?!\\\\w)\",\n//    \n//    URI_RE = new RegExp( \"(?:\" + URI1 + \"|\" + URI2 + \"|\" + EMAIL + \")\", \"ig\" ),\n//    SCHEME_RE = new RegExp( \"^\" + SCHEME, \"i\" ),\n//    \n//    quotes = {\n//      \"'\": \"`\",\n//      '>': '<',\n//      ')': '(',\n//      ']': '[',\n//      '}': '{',\n//      '»': '«',\n//      '›': '‹'\n//    },\n//    \n//    default_options = {\n//      callback: function( text, href ) {\n//        return href ? '<a href=\"' + href + '\" title=\"' + href + '\">' + text + '</a>' : text;\n//      },\n//      punct_regexp: /(?:[!?.,:;'\"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/\n//    };\n//  \n//  return function( txt, options ) {\n//    options = options || {};\n//    \n//    // Temp variables.\n//    var arr,\n//      i,\n//      link,\n//      href,\n//      \n//      // Output HTML.\n//      html = '',\n//      \n//      // Store text / link parts, in order, for re-combination.\n//      parts = [],\n//      \n//      // Used for keeping track of indices in the text.\n//      idx_prev,\n//      idx_last,\n//      idx,\n//      link_last,\n//      \n//      // Used for trimming trailing punctuation and quotes from links.\n//      matches_begin,\n//      matches_end,\n//      quote_begin,\n//      quote_end;\n//    \n//    // Initialize options.\n//    for ( i in default_options ) {\n//      if ( options[ i ] === undefined ) {\n//        options[ i ] = default_options[ i ];\n//      }\n//    }\n//    \n//    // Find links.\n//    while ( arr = URI_RE.exec( txt ) ) {\n//      \n//      link = arr[0];\n//      idx_last = URI_RE.lastIndex;\n//      idx = idx_last - link.length;\n//      \n//      // Not a link if preceded by certain characters.\n//      if ( /[\\/:]/.test( txt.charAt( idx - 1 ) ) ) {\n//        continue;\n//      }\n//      \n//      // Trim trailing punctuation.\n//      do {\n//        // If no changes are made, we don't want to loop forever!\n//        link_last = link;\n//        \n//        quote_end = link.substr( -1 )\n//        quote_begin = quotes[ quote_end ];\n//        \n//        // Ending quote character?\n//        if ( quote_begin ) {\n//          matches_begin = link.match( new RegExp( '\\\\' + quote_begin + '(?!$)', 'g' ) );\n//          matches_end = link.match( new RegExp( '\\\\' + quote_end, 'g' ) );\n//          \n//          // If quotes are unbalanced, remove trailing quote character.\n//          if ( ( matches_begin ? matches_begin.length : 0 ) < ( matches_end ? matches_end.length : 0 ) ) {\n//            link = link.substr( 0, link.length - 1 );\n//            idx_last--;\n//          }\n//        }\n//        \n//        // Ending non-quote punctuation character?\n//        if ( options.punct_regexp ) {\n//          link = link.replace( options.punct_regexp, function(a){\n//            idx_last -= a.length;\n//            return '';\n//          });\n//        }\n//      } while ( link.length && link !== link_last );\n//      \n//      href = link;\n//      \n//      // Add appropriate protocol to naked links.\n//      if ( !SCHEME_RE.test( href ) ) {\n//        href = ( href.indexOf( '@' ) !== -1 ? ( !href.indexOf( MAILTO ) ? '' : MAILTO )\n//          : !href.indexOf( 'irc.' ) ? 'irc://'\n//          : !href.indexOf( 'ftp.' ) ? 'ftp://'\n//          : 'http://' )\n//          + href;\n//      }\n//      \n//      // Push preceding non-link text onto the array.\n//      if ( idx_prev != idx ) {\n//        parts.push([ txt.slice( idx_prev, idx ) ]);\n//        idx_prev = idx_last;\n//      }\n//      \n//      // Push massaged link onto the array\n//      parts.push([ link, href ]);\n//    };\n//    \n//    // Push remaining non-link text onto the array.\n//    parts.push([ txt.substr( idx_prev ) ]);\n//    \n//    // Process the array items.\n//    for ( i = 0; i < parts.length; i++ ) {\n//      html += options.callback.apply( window, parts[i] );\n//    }\n//    \n//    // In case of catastrophic failure, return the original text;\n//    return html || txt;\n//  };\n//  \n//})();\n////}}}\n//  return linkify(text);\n//\n//  //return text.replace(/(^|\\s)((https?\\:\\/\\/|www\\.)[^\\s]*)($|\\s)/g,'$1<a href=\"$2\" target=\"_blank\">$2</a>$4');\n//  \n//  text = text.replace(/(^|\\s)((https?\\:\\/\\/)[^\\s@]+\\.[^\\s@]+)($|\\s)/g,'$1<a href=\"$2\" target=\"_blank\" contenteditable=\"'+(editable?'true':'false')+'\">$2</a>$4');\n//  text = text.replace(/(^|\\s)((www\\.)?([a-zA-Z\\-]+\\.)+(com|de|fr))($|\\s)/g,'$1<a href=\"http://$2\" target=\"_blank\" contenteditable=\"'+(editable?'true':'false')+'\">$2</a>$6');\n//  text = text.replace(/(^|\\s)([a-zA-Z\\-\\.]+@[a-zA-Z\\-\\.]+\\.[a-zA-Z\\-\\.]+)($|\\s)/g,'$1<a href=\"mailto:$2\" target=\"_blank\" contenteditable=\"'+(editable?'true':'false')+'\">$2</a>$3');\n//  \n\n  text = text.replace(/(^|\\s)((https?\\:\\/\\/)[^\\s@]+\\.[^\\s@]+)(?=$|\\s)/g,'$1<a href=\"$2\" target=\"_blank\">$2</a>');\n  text = text.replace(/(^|\\s)((?:www\\.)?(?:[a-zA-Z\\-]+\\.)+(?:com|de|fr|uk|us|es|org|net|im)(?:(?:\\/|#)[^\\s@]*)?)(?=$|\\s)/g,'$1<a href=\"http://$2\" target=\"_blank\">$2</a>');\n  text = text.replace(/(^|\\s)([a-zA-Z\\-\\.]+@[a-zA-Z\\-\\.]+\\.[a-zA-Z\\-\\.]+)(?=$|\\s)/g,'$1<a href=\"mailto:$2\" target=\"_blank\">$2</a>');\n  return text;\n}; \n\n//list stuff\nml.makeSet=function(list) //doesn't copy list\n//{{{\n{\n  ml.assert(list.constructor === Array);\n  var checkmap = {};\n  for(var i=0;i<list.length;i++)\n  {\n    var e = list[i];\n    if(checkmap[e]) list.splice(i--,1);\n    else checkmap[e] = true;\n  }\n  return list;\n};\n// alternative implementions\n//Array.prototype.unique =\n////{{{\n//  function() {\n//    var a = [];\n//    var l = this.length;\n//    for(var i=0; i<l; i++) {\n//      for(var j=i+1; j<l; j++) {\n//        // If this[i] is found later in the array\n//        if (this[i] === this[j])\n//          j = ++i;\n//      }\n//      a.push(this[i]);\n//    }\n//    return a;\n//  };\n////}}}\n//ml.makeSet=function(list)\n////{{{\n//{\n//  //would be faster using an object like in areEqual\n//  ml.assert(list.constructor === Array);\n//  var set=[];\n//  list.forEach(function(val)\n//  {\n//    for(var i=0;i<set.length;i++)\n//      if(set[i]===val)\n//        return;\n//    set.push(val);\n//  });\n//  return set;\n//};\n////}}}\n//ml.makeSet=function(list,caseInsensitiv)\n////{{{\n//{\n//  //would be faster using an object like in areEqual\n//  ml.assert(list.constructor === Array);\n//  var set=[];\n//  list.forEach(function(val)\n//  {\n//    for(var i=0;i<set.length;i++)\n//      if(set[i]===val || caseInsensitiv && set[i].toLowerCase()===val.toLowerCase())\n//        return;\n//    set.push(val);\n//  });\n//  return set;\n//};\n////}}}\n//\n//}}}\nml.intersect\n//{{{\n=function()\n{\n  if(!arguments.length) return [];\n  var a1 = arguments[0];\n  var a = a2 = null;\n  var i = 1;\n  while(i < arguments.length)\n  {\n    a = [];\n    a2 = arguments[i];\n    var l = a1.length;\n    var l2 = a2.length;\n    for(var j=0; j<l; j++) {\n      for(var k=0; k<l2; k++) {\n        if (a1[j] === a2[k])\n          a.push(a1[j]);\n      }\n    }\n    a1 = a;\n    i++;\n  }\n  return ml.makeSet(a1);\n};\n//}}}\nml.toArray=function(nodeList)\n//{{{\n{\n  ml.assert(false);//use [].slice.call instead\n  ml.assert(nodeList.constructor === arguments.constructor || nodeList.constructor === NodeList || (ml.browser().usesGecko && (nodeList.constructor === Object || nodeList.constructor === HTMLCollection)),nodeList,nodeList.constructor);\n  var ret=[];\n  for(var i=0;i<nodeList.length;i++)\n    ret.push(nodeList[i]);\n  return ret;\n};\n//}}}\n\n// object.watch polyfill\n// {{{\n// 2012-04-03\n//\n// By Eli Grey, http://eligrey.com\n// https://gist.github.com/384583\n// Public Domain.\n// NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n//\n \n// object.watch\nif (!Object.prototype.watch) {\n  Object.defineProperty(Object.prototype, \"watch\", {\n      enumerable: false\n    , configurable: true\n    , writable: false\n    , value: function (prop, handler) {\n      var\n        oldval = this[prop]\n      , newval = oldval\n      , getter = function () {\n        return newval;\n      }\n      , setter = function (val) {\n        oldval = newval;\n      //return newval = handler.call(this, prop, oldval, val);\n        return newval = handler.call(this,val, oldval);\n      }\n      ;\n      \n      if (delete this[prop]) { // can't watch constants\n        Object.defineProperty(this, prop, {\n            get: getter\n          , set: setter\n          , enumerable: true\n          , configurable: true\n        });\n      }\n    }\n  });\n}\n \n// object.unwatch\nif (!Object.prototype.unwatch) {\n  Object.defineProperty(Object.prototype, \"unwatch\", {\n      enumerable: false\n    , configurable: true\n    , writable: false\n    , value: function (prop) {\n      var val = this[prop];\n      delete this[prop]; // remove accessors\n      this[prop] = val;\n    }\n  });\n}\n//}}}\n\n}}}\n*/\n\n  /* old code / todel\n{{{\nElement.prototype.old_insertBefore=Element.prototype.insertBefore;\n//inserBefore used by uservoice\nElement.prototype.insertBefore=function(nodeToMove,node)\n//{{{\n{\n  //dom is object -> node comparison <-> object comparison -> 2 nodes === iff there are the same node\n  if(node && node.nextSibling && node.nextSibling===nodeToMove) return;\n  this.old_insertBefore(nodeToMove,node);\n  //if(!node || !node.nextSibling || node.nextSibling!==nodeToMove)\n    //this.old_insertBefore(nodeToMove,node);\n};\n//}}}\nElement.prototype.old_appendChild=Element.prototype.appendChild;\nElement.prototype.appendChild=function(child)\n//{{{\n{\n  if(!this.lastChild || this.lastChild!==child) return this.old_appendChild(child);\n};\n//}}}\nElement.prototype.prependChild=function(child)\n//{{{\n{\n  if(!this.firstChild)\n    this.appendChild(child);\n  else\n    this.insertBefore(child,this.firstChild);\n};\n//}}}\nElement.prototype.insertAfter=function(nodeToMove,node)\n//{{{\n{\n  ml.assert(node);\n  if(node.nextSibling)\n    this.insertBefore(nodeToMove,node.nextSibling);\n  else\n    this.appendChild(nodeToMove);\n};\n//}}}\nElement.prototype.removeNode=\n//{{{\nfunction()\n{\n  var parent_ = this.parentNode;\n  ml.assert(parent_);\n  parent_.removeChild(this);\n  return parent_;\n};\n//}}}\nElement.prototype.hide=function()\n//{{{\n{\n  this.style.visibility='hidden';\n};\n//}}}\nElement.prototype.show=function()\n//{{{\n{\n  this.style.visibility='inherit';\n};\n//}}}\nElement.prototype.undisplay=function()\n//{{{\n{\n  this.style.display='none';\n};\n//}}}\nElement.prototype.display=function()\n//{{{\n{\n  this.style.display='';\n};\n//}}}\nElement.prototype.isDisplayed=function()\n//{{{\n{\n  return ml.element.getStyle(this,'display')!=='none';\n}\n//}}}\nElement.prototype.click=function()\n//{{{\n{\n  var ev = document.createEvent('MouseEvents');\n  ev.initEvent('click',true,true);\n  this.dispatchEvent(ev);\n};\n//}}}\n\n\n//NodeList\n// use Array().slice.call(nodeList) instead\nml.indexOf=function(nodeList,node)\n//{{{\n{\n  ml.assert(nodeList.constructor === NodeList || ml.browser().usesGecko && nodeList.constructor === Object,nodeList,nodeList.constructor);\n  for(var i=0;i<nodeList.length;i++)\n    if(nodeList[i]===node)\n      return i;\n  return -1;\n};\n//}}}\n\nfunction countCharacters(n) //doesn't consider line breaks, e.g. <br> and <p>\n//{{{\n{\n    if (n.nodeType == 3) { //Node.TEXT_NODE\n        return n.length;\n    } else {\n        var numchars = 0;\n        for (var m = n.firstChild; m != null; m = m.nextSibling) {\n            numchars += countCharacters(m);\n        }\n        return numchars;\n    }\n}\n//}}}\nml.pStore={};\n(function(){ \n  if(typeof window === \"undefined\") return;//=> called as metro background task\n\n  var __addExtBeforeListener;\n  //to avoid infinite loops:\n  //-do not directly use localStorage while using ml.pStore\n  //-do not initiate window.location.reload on ext change\n  //-(no way found to implement check for these both rules -- onbeforeunload->alert doesn't work)\n  (function(){ \n    var CS = window['chrome']&&window['chrome']['storage'];\n\n    var TS_KEY = '_ml_ts';\n    function ts2str(_tsS) { ml.assert(_tsS.constructor===Array);return JSON.stringify(_tsS); }\n    function str2ts(str) {\n      ml.assert(str===undefined||str===null||str.constructor===String);\n      var _tsS = str?JSON.parse(str):[];\n      ml.assert(_tsS&&_tsS.constructor===Array&&[true].concat(_tsS.map(function(ts){return ts.constructor===Number&&ts>1340000000000})).reduce(function(b1,b2){return b1&&b2}));\n      return _tsS;\n    }\n    function getFork(a1,a2)\n    {\n      var i;\n      for(i=0;i<a1.length;i++) if(a1[i]!==a2[i]) break;\n      return [a1.slice(i),a2.slice(i)];\n    }\n\n    var tsS=str2ts(localStorage.getItem(TS_KEY));\n\n    var __extBeforeListners=[];\n    __addExtBeforeListener=function(f){__extBeforeListners.push(f)};\n    function callExtListeners(){\n        setForbidden+=9;setTimeout(function(){setForbidden-=9},0);\n        __extBeforeListners.forEach(function(e){e()});\n        if(ml.pStore.onExtChange) ml.pStore.onExtChange();\n    }\n\n    if(CS) {\n      var timeoutId=0;\n      var CS_LS_sync=function(){window.clearInterval(timeoutId);timeoutId=setTimeout(function(){CS['sync']['get'](null,function(newLocalStorage){ \n      //assuming that when offline sync.get returns local values\n        var cs_ts = str2ts(newLocalStorage[TS_KEY]);\n        var ls_ts = str2ts(localStorage.getItem(TS_KEY));\n        var fork = getFork(cs_ts,ls_ts);\n        if(fork[0].length===0 && fork[1].length===0)return;\n        if(fork[0].length>fork[1].length) {\n          //CS to LS\n          for(var i in newLocalStorage) ml.assert(newLocalStorage[i].constructor===String);\n          for(var i in localStorage)    if(newLocalStorage[i]===undefined) localStorage.removeItem(i);\n          for(var i in newLocalStorage) if(i!==TS_KEY) localStorage.setItem(i,newLocalStorage[i]);\n          tsS = cs_ts;\n          localStorage.setItem(TS_KEY       ,newLocalStorage[TS_KEY]);\n          callExtListeners();\n        }\n        else {\n          //LS to CS\n          var arg = {};\n          for(var i in localStorage) arg[i]=localStorage.getItem(i);\n          //onsole.log(1);\n          CS['sync']['clear']();\n          CS['sync']['set'](arg);\n          //setTimeout(function(){onsole.log(2)},0);\n        }\n      })},300)}; \n    }\n\n    ml.pStore.get=function(key){\n      ml.assert(key.constructor===String);\n      return localStorage.getItem(key);\n    };\n    //-only way of having infinite loop is by calling pStore.set when Ext Listener called -- as long as ts doesn't increase no infinite loop possible\n    var setForbidden=0;\n    window.addEventListener('load'  ,function(){setTimeout(function(){setForbidden++},0)});\n    ml.pStore.userInitiatedEvent=function(){\n      //call this to allow pStore.set\n      //call this iff event has been initiated by user\n      setForbidden--;\n      setTimeout(function(){setForbidden++},0)\n    };\n    ['click','change'].forEach(function(ev){window.addEventListener(ev,ml.pStore.userInitiatedEvent,true)});\n    function set(action)\n    {\n      function ex(b){var msg=\"pStore.set call only allowed in a window.onload, window.onclick, or window.onchange call\";ml.assert(b,msg,3);if(!b) throw msg}\n      ex(setForbidden<=0);\n      //shortcomings of following 2 lines:\n      //-strict mode doesn't allow caller\n      //-new Error().stack.split('\\n')<=11\n      //ex(/\\s*at\\s(HTML|window\\.onload)/.test(new Error().stack.split('\\n').reverse()[0]));\n      //for(var caller = arguments.callee;caller=caller.caller;) ex(onExtChange.concat([window.setTimeout,window.setInterval]).indexOf(caller)===-1);\n\n      action();\n\n      tsS.push(+new Date());\n      localStorage.setItem(TS_KEY,ts2str(tsS));\n      CS&&CS_LS_sync();\n    }\n    ml.pStore.set=function(key,str){\n      ml.assert(key.constructor===String && str.constructor===String);\n      set(function(){localStorage.setItem(key,str)});\n    };\n    ml.pStore.clear=function(){\n      set(function(){\n        localStorage.clear()\n      });\n    };\n\n    window.addEventListener('storage',function(){\n      var ls_ts = str2ts(localStorage.getItem(TS_KEY));\n      if(tsS.length!==ls_ts.length || tsS[tsS.length-1]!==ls_ts[ls_ts.length-1]) {\n        tsS=ls_ts;\n        callExtListeners();\n      }\n    });\n    CS&&CS['onChanged']['addListener'](CS_LS_sync);\n    CS&&CS['onChanged']['addListener'](function(){CS_LS_sync()});\n    CS&&CS_LS_sync();\n  })(); \n  (function(){\n    var constructorCallForbiden;\n    window.addEventListener('load',function(){setTimeout(function(){constructorCallForbiden=true},0)});\n    ml.PersistantObject=function(key,initial_value)\n    //{{{\n    //put won't actualize other variables with same key -> use only one variable for each key\n    {\n      ml.assert(!constructorCallForbiden);\n      //every constructor call adds a Listener -> do not create too much / temporary PersistantObjects\n      if(constructorCallForbiden) throw \"ml.PersistantObject call only allowed in window.onload call\";\n      ml.assert(!initial_value);\n\n      function getStorageValue() {\n        var res = ml.pStore.get(key);\n        res = res&&JSON.parse(res) || {};\n        ml.assert(res.constructor===Object);\n        return res;\n      }\n      var ret = getStorageValue();\n\n      //JSON.stringify ignores put and keys functions\n      //google closure trick works:\n      //-http://closure-compiler.appspot.com/home\n      //-var o={};Object.defineProperty(o,Object.keys({puthe:true})[0],{value:'hey'});alert(o.puthe);\n      Object.defineProperty(ret,Object.keys({put :true}),{value:function(){ml.pStore.set(key,JSON.stringify(ret))}});\n    //Object.defineProperty(ret,Object.keys({keys:true}),{value:function(){\n    //  var res = {};\n    ////for(var prop in ret) if(ret[prop] !== ret.put && ret[prop] !== ret.keys) res[prop]=true;\n    //  for(var prop in ret) res[prop]=true;\n    //  return res;\n    //}});\n\n      //this listener should be called before any other relevant listener\n      //-not necessarily the case, if problems: make a privat ext event fired before public ext event\n      function moveWithReferences(newObj,obj) {\n      //doesn't keep Array references\n        ml.assert(obj instanceof Object && newObj instanceof Object);\n        for(var i in obj) if(newObj[i]===undefined) delete obj[i];\n        for(var i in newObj)\n        {\n          if(!(obj[i] instanceof Array) && !(newObj[i] instanceof Array) &&\n               obj[i] instanceof Object &&   newObj[i] instanceof Object) moveWithReferences(newObj[i],obj[i]);\n          else obj[i]=newObj[i];\n        }\n      }\n      //change data first then call ext listener\n      __addExtBeforeListener(function(){\n        moveWithReferences(getStorageValue(),ret);\n      });\n\n      return ret;\n    };\n    //}}}\n  })();\n})(); \nml.persistantInput=function(id,listener,default_,keyUpDelay,noFirstListenerCall)\n//{{{\n//convention:\n//-inputEl.id === id for localStorage\n//-default_===0 || default_===1 => checkbox input\n{\n//ml.assert(false,'replace localstorage with pStore');\n  ml.assert(id!=\"key\");\n  if(default_===undefined || default_===null) default_='';\n  var inputEl = document.getElementById(id);\n  if(window.localStorage!==undefined)\n  {\n    if(!ml.persistantInput.chromeBugFixed)\n      //{{{\n    //fix for stupid chrome bug: if value is equal to '' then when browser restarts the value become undefined\n      (function()\n      {\n        if(!window.localStorage['key']) return;\n        var keys={};\n        for(var i=0;i<window.localStorage.length;i++) keys[window.localStorage['key'](i)]=true;\n        for(var key in keys) if(!window.localStorage[key]) window.localStorage[key]='';\n        ml.persistantInput.chromeBugFixed=true;\n      })();\n      //}}}\n\n    var binaryInput = default_===false || default_===true;\n    \n    var val = window.localStorage.getItem(id)!==null?window.localStorage[id]:default_;//opera's hasOwnProperty allways return true\n    if(binaryInput) val=!!val;\n    ml.assert(binaryInput === (inputEl.type==='checkbox'));\n    if(inputEl.nodeName==='SELECT' && inputEl.childNodes.length===0) inputEl.innerHTML='<option>'+val+'</option>';\n    inputEl[binaryInput?'checked':'value']=val;\n    if(listener && !noFirstListenerCall) listener(val);\n\n    var lastTimeout;\n    var changeListener=function(){\n      if(lastTimeout) window.clearTimeout(lastTimeout);\n      lastTimeout=window.setTimeout(function()\n      {\n        var newVal = binaryInput?(inputEl['checked']?\"true\":\"\"):inputEl['value'];\n        if(window.localStorage[id]!=newVal)\n        {\n          window.localStorage[id]=newVal;\n          if(listener) listener(binaryInput?!!newVal:newVal);\n        }\n      },keyUpDelay!==undefined?keyUpDelay:(binaryInput?0:1000));\n    }\n    var addChangeListener = binaryInput ||  inputEl.type.toLowerCase()==='color' || inputEl.nodeName==='SELECT';\n    if( addChangeListener)                                inputEl.addEventListener('change',changeListener,false);\n    if(!addChangeListener || inputEl.nodeName==='SELECT') inputEl.addEventListener('keyup' ,changeListener,false);\n  }\n  else\n  {\n    inputEl.parentNode.removeChild(inputEl);\n    if(!noFirstListenerCall) listener(default_);\n  }\n};\n//}}}\n}}}\n*/\n})();\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nexport { AsyncState };\n\nvar AsyncState = function AsyncState(initialState, update) {\n  _classCallCheck(this, AsyncState);\n\n  this.state = void 0;\n  this.runUpdate = void 0;\n  deepFreeze(initialState);\n  var stateObject = copy(initialState);\n  this.state = new Proxy(stateObject, {\n    set: set\n  });\n  this.runUpdate = runUpdate;\n  var lastUpdateNumber = 0;\n  var updatePromise;\n  return this;\n\n  function set(_, prop, val) {\n    stateObject[prop] = val;\n    runUpdate();\n    return true;\n  }\n\n  function runUpdate() {\n    var updateNumber = lastUpdateNumber = lastUpdateNumber + 1;\n\n    _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var isNotLastUpdate;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return updatePromise;\n\n            case 2:\n              isNotLastUpdate = function isNotLastUpdate() {\n                return updateNumber !== lastUpdateNumber;\n              };\n\n              if (!isNotLastUpdate()) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 5:\n              updatePromise = update(isNotLastUpdate);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }\n};\n\nfunction copy(obj) {\n  var copy = JSON.parse(JSON.stringify(obj));\n  return copy;\n} // Source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n\n\nfunction deepFreeze(object) {\n  // Retrieve the property names defined on object\n  var propNames = Object.getOwnPropertyNames(object); // Freeze properties before freezing self\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = propNames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var name = _step.value;\n      var value = object[name];\n\n      if (value && _typeof(value) === \"object\") {\n        deepFreeze(value);\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return Object.freeze(object);\n}","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// @ts-ignore\nimport assert from \"@brillout/assert\";\nimport \"./youtubeAlarm.css\";\nimport { notifyUpdate, debugLog } from \"./index\";\nimport { AsyncState } from \"../../../../tab-utils/AsyncState\";\nexport { youtubeStart, youtubeStop, youtubeIsPlaying, youtubeSetUrl, youtubeNoUrl, youtubePrefetch };\nvar YOUTUBE_WRAPPER_ID = \"youtube_wrapper\";\nvar YOUTUBE_IFRAME_ID = \"youtube_iframe\";\n\nvar _ref = new AsyncState({\n  isStarted: false,\n  youtubeUrl: \"\",\n  prefetchEnabled: false\n}, update),\n    state = _ref.state;\n\nfunction youtubeStart() {\n  state.isStarted = true;\n}\n\nfunction youtubeStop() {\n  state.isStarted = false;\n}\n\nfunction youtubeNoUrl() {\n  return state.youtubeUrl === \"\";\n}\n\nfunction youtubeSetUrl(youtubeUrl) {\n  state.youtubeUrl = youtubeUrl; // User has changed the theme or the youtube alarm\n  // Update the whole notification logic\n\n  notifyUpdate();\n}\n\nfunction youtubePrefetch() {\n  state.prefetchEnabled = true;\n}\n/*\nyoutubeDisabled\nfunction neverPlayedBefore() {\n  // Was the playing state was ever achieved?\n  // If not, the prefetching didn't work (/happened yet)\n  return stateChanges.includes(1);\n}\n*/\n\n\nfunction update(isNotLastUpdate) {\n  assert(state.youtubeUrl.constructor === String);\n\n  if (!state.isStarted) {\n    stop(isNotLastUpdate);\n\n    if (state.youtubeUrl && state.prefetchEnabled) {\n      prefetch(isNotLastUpdate);\n    }\n  }\n\n  if (state.youtubeUrl !== \"\" && state.isStarted) {\n    start(isNotLastUpdate);\n  }\n}\n\nfunction start(_x) {\n  return _start.apply(this, arguments);\n}\n\nfunction _start() {\n  _start = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(isNotLastUpdate) {\n    var player;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            debugLog(\"[youtube] start youtube alarm (attempt)\");\n            _context.next = 3;\n            return load_player();\n\n          case 3:\n            player = _context.sent;\n\n            if (!isNotLastUpdate()) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 6:\n            playerStart(player);\n            document.querySelector(\"#\" + YOUTUBE_WRAPPER_ID).classList.add(\"youtube_alarm_show\");\n            debugLog(\"[youtube] start youtube alarm (success)\");\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _start.apply(this, arguments);\n}\n\nfunction playerStart(player) {\n  loadVideo(player);\n  player.unMute(); // player.setLoop(true);\n}\n\nfunction stop(_x2) {\n  return _stop.apply(this, arguments);\n}\n\nfunction _stop() {\n  _stop = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(isNotLastUpdate) {\n    var player;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            debugLog(\"[youtube] stop youtube alarm (attempt)\");\n            _context2.next = 3;\n            return load_player();\n\n          case 3:\n            player = _context2.sent;\n\n            if (!isNotLastUpdate()) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 6:\n            document.querySelector(\"#\" + YOUTUBE_WRAPPER_ID).classList.remove(\"youtube_alarm_show\");\n            playerStop(player);\n            debugLog(\"[youtube] stop youtube alarm (success)\");\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _stop.apply(this, arguments);\n}\n\nfunction playerStop(player) {\n  player.mute(); // player.setLoop(false);\n}\n\nvar lastPrefetch;\n\nfunction prefetch(_x3) {\n  return _prefetch.apply(this, arguments);\n}\n\nfunction _prefetch() {\n  _prefetch = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(isNotLastUpdate) {\n    var player;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            debugLog(\"[youtube] prefetching (attempt)\");\n            _context3.next = 3;\n            return load_player();\n\n          case 3:\n            player = _context3.sent;\n\n            if (!isNotLastUpdate()) {\n              _context3.next = 6;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 6:\n            if (!(lastPrefetch === state.youtubeUrl)) {\n              _context3.next = 8;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 8:\n            player.mute(); // player.setLoop(false);\n\n            loadVideo(player);\n            lastPrefetch = state.youtubeUrl;\n            debugLog(\"[youtube] prefetching (success)\");\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _prefetch.apply(this, arguments);\n}\n\nvar loadedVideoId;\n\nfunction loadVideo(player) {\n  var _parse_youtube_url = parse_youtube_url(state.youtubeUrl),\n      video_id = _parse_youtube_url.video_id,\n      video_start = _parse_youtube_url.video_start;\n\n  if (video_id !== loadedVideoId) {\n    loadedVideoId = video_id;\n    player.loadVideoById({\n      videoId: video_id,\n      startSeconds: video_start\n    });\n  } else {\n    player.seekTo(video_start);\n    player.playVideo();\n  }\n}\n\nvar player__loaded;\nvar player__promise;\n\nfunction load_player() {\n  return _load_player.apply(this, arguments);\n}\n\nfunction _load_player() {\n  _load_player = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n    var resolve;\n    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (!player__loaded) {\n              _context5.next = 2;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", player__loaded);\n\n          case 2:\n            if (!player__promise) {\n              _context5.next = 4;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", player__promise);\n\n          case 4:\n            player__promise = new Promise(function (r) {\n              return resolve = r;\n            });\n            window.onYouTubeIframeAPIReady = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n              var player;\n              return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                  switch (_context4.prev = _context4.next) {\n                    case 0:\n                      player = new window.YT.Player(YOUTUBE_IFRAME_ID, {\n                        events: {\n                          onReady: function onReady() {\n                            player__loaded = player;\n                            resolve(player__loaded);\n                          },\n                          onStateChange: onStateChange\n                        },\n                        height: \"150\",\n                        width: \"300\",\n                        playerVars: {\n                          controls: 0,\n                          modestbranding: 1,\n                          rel: 0,\n                          color: \"white\"\n                        }\n                      });\n\n                    case 1:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }\n              }, _callee4);\n            }));\n            load_script(\"https://www.youtube.com/iframe_api\");\n            return _context5.abrupt(\"return\", player__promise);\n\n          case 8:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _load_player.apply(this, arguments);\n}\n\nvar stateChanges;\n\nfunction onStateChange(event) {\n  // `event.data` possible values:\n  // -1 – unstarted\n  //  0 – ended\n  //  1 – playing\n  //  2 – paused\n  //  3 – buffering\n  //  5 – video cued\n  var state = event.data;\n  stateChanges = stateChanges || [];\n  stateChanges.push(state);\n  var time = new Date().toTimeString().split(\" \")[0];\n  debugLog(\"[youtube] player state: \".concat(state, \" (\").concat(time, \")\"));\n}\n\nfunction youtubeIsPlaying() {\n  // Ignoring buffering state, is the last state is playing, then `return true`\n  for (var i = (stateChanges || []).length - 1; i >= 0; i--) {\n    var stateChange = stateChanges[i]; // Playing\n\n    if (stateChange === 1) {\n      return true;\n    } // Buffering\n\n\n    if (stateChange === 3) {\n      continue;\n    }\n\n    return false;\n  }\n\n  return false;\n}\n\nfunction parse_youtube_url(url) {\n  assert(url.constructor === String); //sanetize URL\n\n  url = url.replace(\" \", \"\"); //retrieve ID\n\n  var video_id = url_to_id(url);\n  assert(video_id || video_id === null); //retrieve start & repeat\n\n  var matches = /(?:\\?|&)(?:start|t)=([^&#]*)/.exec(url);\n  var video_start = matches ? parseInt(matches[1], 10) : 0; //video_repeat_=/(?:\\?|&)(repeat|loop)/.test(url);\n\n  var video_repeat = /repeat|replay|loop/.test(url);\n  return {\n    video_start: video_start,\n    video_id: video_id,\n    video_repeat: video_repeat\n  };\n}\n\nfunction url_to_id(url) {\n  //ID chars: /[a-zA-Z0-9-_]+/ --http://stackoverflow.com/questions/830596/what-type-of-id-does-youtube-use-for-their-videos\n  //var matches=/youtube\\.com.*(?:\\?|&)v=([^&#]+)/.exec(url);\n  var matches = /youtube\\.com.*(?:\\?|&)v=([a-zA-Z0-9\\-_]+)/.exec(url) || /youtu.be\\/([a-zA-Z0-9\\-_]+)/.exec(url);\n  return matches ? matches[1] : null;\n}\n\nfunction load_script(url) {\n  var scriptEl = document.createElement(\"script\");\n  scriptEl.src = url;\n  scriptEl.async = true;\n  var resolve;\n  var promise = new Promise(function (r) {\n    return resolve = r;\n  });\n\n  scriptEl.onload = function () {\n    resolve();\n  };\n\n  document.getElementsByTagName(\"head\")[0].appendChild(scriptEl);\n  return promise;\n}","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// @ts-ignore\nimport assert from \"@brillout/assert\";\nimport { youtubeStart, youtubeStop, youtubeIsPlaying, youtubeNoUrl } from \"./youtubeAlarm\";\nimport { audioStart, audioStop } from \"./audioAlarm\";\nimport { sleep } from \"../../../../tab-utils/sleep\";\nimport { AsyncState } from \"../../../../tab-utils/AsyncState\";\nexport { notifyStart, notifyStop, notifyUpdate, debugLog };\nvar YOUTUBE_TIMEOUT = 5; //*\n\nvar DEBUG_NOTIFY = false;\n/*/\nconst DEBUG_NOTIFY = true;\n//*/\n\nvar _ref = new AsyncState({\n  isStarted: false\n}, update),\n    state = _ref.state,\n    runUpdate = _ref.runUpdate;\n\nfunction notifyStop() {\n  debugLog(\"[notify] notifyStop\");\n  state.isStarted = false;\n}\n\nfunction notifyStart() {\n  debugLog(\"[notify] notifyStart\");\n  state.isStarted = true;\n} // For when the user:\n//  - changes themes, or\n//  - change the YouTube URL\n\n\nfunction notifyUpdate() {\n  runUpdate();\n}\n\nfunction update(isNotLastUpdate) {\n  if (!state.isStarted) {\n    stop();\n  }\n\n  if (state.isStarted) {\n    stop();\n    start(isNotLastUpdate);\n  }\n}\n\nfunction stop() {\n  debugLog(\"[notify] stop\");\n  youtubeStop();\n  audioStop();\n}\n\nfunction start(_x) {\n  return _start.apply(this, arguments);\n}\n\nfunction _start() {\n  _start = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(isNotLastUpdate) {\n    var noYoutube, isStarted, ytIsPlaying;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            debugLog(\"[notify] start\");\n            assert(state.isStarted === true);\n            noYoutube = youtubeNoUrl();\n            debugLog(\"[notify] youtubeNoUrl():\", noYoutube);\n\n            if (!noYoutube) {\n              _context.next = 7;\n              break;\n            }\n\n            audioStart();\n            return _context.abrupt(\"return\");\n\n          case 7:\n            youtubeStart();\n            _context.next = 10;\n            return sleep({\n              seconds: YOUTUBE_TIMEOUT\n            });\n\n          case 10:\n            if (!isNotLastUpdate()) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 12:\n            // Since it is the last call, `isStarted` is left untouched.\n            isStarted = state.isStarted;\n            assert(isStarted === true, {\n              isStarted: isStarted\n            });\n            ytIsPlaying = youtubeIsPlaying();\n            debugLog(\"[notify] youtubeIsPlaying:\", ytIsPlaying);\n\n            if (!ytIsPlaying) {\n              youtubeStop();\n              audioStart();\n            }\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _start.apply(this, arguments);\n}\n\nfunction debugLog() {\n  var _console;\n\n  if (!DEBUG_NOTIFY) return;\n\n  (_console = console).log.apply(_console, arguments);\n}","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// @ts-ignore\nimport glockenklang from \"./glockenklang.ogg\";\nimport { AsyncState } from \"../../../../tab-utils/AsyncState\";\nimport { debugLog } from \"./index\";\nvar ALARM_DURATION_SECONDS = 50;\nexport { audioStart, audioStop, audioPrefetch }; // ** Synchronization **\n// We need to ensure that `pause` is always waiting on the `play` promise.\n// See https://developers.google.com/web/updates/2017/06/play-request-was-interrupted\n\nvar _ref = new AsyncState({\n  isStarted: false\n}, update),\n    state = _ref.state,\n    runUpdate = _ref.runUpdate;\n\nfunction audioStart() {\n  state.isStarted = new Date();\n}\n\nfunction audioStop() {\n  state.isStarted = false;\n}\n\nfunction update() {\n  return _update.apply(this, arguments);\n}\n\nfunction _update() {\n  _update = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!state.isStarted) {\n              stop();\n            }\n\n            if (!state.isStarted) {\n              _context.next = 4;\n              break;\n            }\n\n            _context.next = 4;\n            return start();\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _update.apply(this, arguments);\n}\n\nfunction start() {\n  return _start.apply(this, arguments);\n}\n\nfunction _start() {\n  _start = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n    var failed;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            debugLog(\"[audio] start (attempt)\");\n            install_audio_tag();\n            audio_tag.muted = false;\n            audio_tag.currentTime = 0;\n            failed = true;\n            _context2.prev = 5;\n            _context2.next = 8;\n            return audio_tag.play();\n\n          case 8:\n            failed = false;\n            _context2.next = 14;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](5);\n            // May fail when user hasn't interacted with Timer Tab:\n            //   Uncaught (in promise) DOMException: play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD\n            console.warn(_context2.t0);\n\n          case 14:\n            debugLog(\"[audio] start (\".concat(failed ? \"failed\" : \"success\", \")\"));\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[5, 11]]);\n  }));\n  return _start.apply(this, arguments);\n}\n\nfunction loop(audio_tag) {\n  audio_tag.onended = function () {\n    if (!state.isStarted) return;\n    var audioDuration = new Date().getTime() - state.isStarted.getTime();\n\n    if (audioDuration < ALARM_DURATION_SECONDS * 1000) {\n      runUpdate();\n    }\n  };\n}\n\nfunction stop() {\n  debugLog(\"[audio] stop\");\n  if (!audio_tag) return;\n  audio_tag.pause();\n}\n\nfunction audioPrefetch() {\n  install_audio_tag();\n  audio_tag.preload = \"auto\";\n  audio_tag.load();\n}\n\nvar audio_tag;\n\nfunction install_audio_tag() {\n  if (audio_tag) return;\n  audio_tag = document.createElement(\"audio\");\n  audio_tag.id = \"notify_sound\";\n  audio_tag.style.display = \"none\";\n  var source_tag = audio_tag.appendChild(document.createElement(\"source\")); //source_tag.type=\"audio/mpeg\"; // for .mp3 files\n\n  source_tag.type = \"audio/ogg\";\n  source_tag.src = glockenklang;\n  document.body.appendChild(audio_tag);\n  loop(audio_tag);\n}\n/*\nlet node, ctx, timeout;\nfunction play_fallback() {\n  if (!node) {\n    function fadeOut(i, length) {\n      return 1 - i / length;\n    }\n    function fadeIn(i, length) {\n      return i / length;\n    }\n    function fade(i, length) {\n      var limit = length / 100;\n      return i > limit ? fadeOut(i - limit, length) : fadeIn(i, limit);\n    }\n\n    ctx = new AudioContext();\n\n    var SAMPLE_RATE = ctx[\"sampleRate\"];\n    var buf_size = 1.35 * 512 * 128;\n    var freq = 440;\n    var PI_2 = Math.PI * 2;\n\n    var buffer = ctx[\"createBuffer\"](1, buf_size, SAMPLE_RATE);\n    var buf = buffer[\"getChannelData\"](0);\n    for (let i = 0; i < buf_size; ++i)\n      buf[i] = fade(i, buf_size) * Math.sin((freq * PI_2 * i) / SAMPLE_RATE);\n    node = ctx[\"createBufferSource\"](0);\n    node[\"buffer\"] = buffer;\n    node[\"loop\"] = true;\n    node[\"looping\"] = true;\n    node[\"start\"](ctx[\"currentTime\"]);\n  }\n  node[\"con\" + \"nect\"](ctx[\"destination\"]);\n  if (timeout) clearTimeout(timeout);\n  timeout = setTimeout(function () {\n    stop_fallback();\n  }, 10 * 1000);\n}\nfunction stop_fallback() {\n  if (node) node[\"disconnect\"]();\n}\n*/","\"use strict\";\n\nexport { sleep };\n\nfunction sleep(_ref) {\n  var seconds = _ref.seconds,\n      milliseconds = _ref.milliseconds;\n  milliseconds = milliseconds || seconds * 1000;\n  return new Promise(function (resolve) {\n    return window.setTimeout(function () {\n      resolve();\n    }, milliseconds);\n  });\n}","\"use strict\";\n\nimport assert from \"@brillout/assert\";\nimport { DateTime } from \"luxon\";\nexport { display_time }; // List of tokens: https://moment.github.io/luxon/docs/manual/formatting.html#table-of-tokens\n\nfunction display_time(time, _ref) {\n  var _ref$military_format = _ref.military_format,\n      military_format = _ref$military_format === void 0 ? false : _ref$military_format;\n  var d;\n\n  if (time.constructor === Date) {\n    d = DateTime.fromJSDate(time);\n  } else if (time.constructor === Number) {\n    d = DateTime.fromMillis(time);\n  } else {\n    assert(false, {\n      time: time\n    });\n  }\n\n  var format = military_format ? \"HH:mm\" : \"h:mm a\";\n  var time_string = d.toFormat(format);\n  return time_string;\n}","import ml from \"./ml\";\nimport { notifyStart, notifyStop } from \"./notify/index\";\nimport { display_time } from \"../../../tab-utils/utils/datetime\";\n\nconst ctObj = {};\n\nexport default ctObj;\n\n(function () {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  ctObj.TYPES = { STOPW: 1, TIMER: 2, ALARM: 3 };\n\n  (function () {\n    function loadDom(inputForm, _type, _callback) {\n      var __getInputs;\n      var __setInputs;\n      var __isAMPM;\n      var __setInputChangeListener;\n      function fireCallback() {\n        _callback(__getInputs, __setInputs, __isAMPM, __setInputChangeListener);\n      }\n      var changeListener;\n      function __setInputChangeListener(listener) {\n        changeListener = listener;\n      }\n      var __onInputsChange = function () {\n        if (changeListener) changeListener();\n      };\n\n      //get screen size\n      //-window.screen.width, window.screen.height\n      // -http://stackoverflow.com/questions/4833669/iphone-4-screen-width-reports-320-i-thought-it-was-more\n      //get dpi\n      //-window.devicePixelRatio\n      //-matchMedia(\"(-webkit-device-pixel-ratio: 1)\")\n      if (\n        _type !== ctObj.TYPES.STOPW &&\n        ml.isTouchDevice() &&\n        Math.max(window.screen.width, window.screen.height) <= 1100\n      )\n        //if(_type!==ctObj.TYPES.STOPW && true)\n        //wheel picker\n        (function () {\n          function loadCallback() {\n            //ressources\n            //-http://stackoverflow.com/questions/13170476/make-mobiscroll-height-and-width-responsive\n            //-change font-size; .dw-li{ font-size: 2em!important; }\n            ml.addCss(\n              \".dw,.dwwr,.dwc{border:0!important;padding:0!important;margin:0!important;background:0!important;}\",\n              true\n            );\n            ml.addCss(\"form{line-height:.6em}\", true);\n            ml.addCss(\n              \".dw{-webkit-filter:grayscale(1);-moz-filter: grayscale(1);} .dw-li{font-size:2em!important}\",\n              true\n            );\n            [].slice\n              .call(inputForm.querySelectorAll(\"input,span\"))\n              .forEach(function (i) {\n                i.parentElement.removeChild(i);\n              });\n            var container = document.createElement(\"div\");\n            inputForm.insertBefore(container, inputForm.firstChild);\n            var wheel = $(\"#\" + inputForm.id + \" div\");\n            var format = ctObj.TYPES.ALARM ? \"HH:ii\" : \"ii:ss\";\n            wheel.mobiscroll().time({\n              //theme: 'ios',\n              theme: \"android-ics light\",\n              display: \"inline\",\n              mode: \"scroller\",\n              timeFormat: format,\n              timeWheels: format,\n              /*\n            height: 24,\n            width: 10,\n            */\n              rows: 3,\n              onChange: function () {\n                __onInputsChange();\n              },\n            });\n            __getInputs = function () {\n              var vals = wheel.mobiscroll(\"getValue\");\n              return {\n                h: parseInt(vals[0], 10),\n                m: parseInt(vals[1], 10),\n                s: 0,\n              };\n            };\n            __setInputs = function (h, m, s, isPm) {\n              wheel.mobiscroll(\"setValue\", [h, m], true);\n            };\n\n            fireCallback();\n          }\n          ml.loadASAP(\n            \"https://brillcdn.appspot.com/sf/mobiscroll.datetime.ics.css\"\n          );\n          //http://zeptojs.com/zepto.min.js\n          ml.loadASAP(\n            \"https://brillcdn.appspot.com/sf/zepto.min.js\",\n            function () {\n              ml.loadASAP(\n                \"https://brillcdn.appspot.com/sf/mobiscroll.datetime.ics.js\",\n                loadCallback\n              );\n            }\n          );\n        })();\n      //<INPUT>\n      else\n        (function () {\n          var input_number;\n          var input_period;\n          var input_all;\n          (function () {\n            function _generateInput(p, max) {\n              var input = inputForm.appendChild(\n                document.createElement(\"input\")\n              );\n              input.setAttribute(\"autocomplete\", \"off\");\n              input.setAttribute(\"spellcheck\", \"false\");\n              input.setAttribute(\"min\", \"0\");\n              if (max) input.setAttribute(\"max\", \"\" + max);\n              input.setAttribute(\"size\", \"1\");\n              input.setAttribute(\"placeholder\", p);\n            }\n\n            if (!inputForm) {\n              inputForm = document.createElement(\"form\");\n              _generateInput(\n                \"h\",\n                _type === ctObj.TYPES.ALARM ? \"23\" : undefined\n              );\n              _generateInput(\n                \"m\",\n                _type === ctObj.TYPES.ALARM ? \"59\" : undefined\n              );\n              _generateInput(\n                \"s\",\n                _type === ctObj.TYPES.ALARM ? \"59\" : undefined\n              );\n            }\n\n            input_number = [].slice.call(\n              inputForm.getElementsByTagName(\"input\")\n            );\n\n            input_all = input_number;\n            if (input_period) input_all.push(input_period);\n          })();\n\n          __getInputs = function () {\n            var vals = input_number.map(function (i) {\n              var ret = parseInt(i.value, 10);\n              if (isNaN(ret)) return undefined;\n              if (ret || ret === 0) return ret;\n              return undefined;\n            });\n            if (vals.length < 2) vals.push(undefined);\n            ml.assert(vals.length === 3);\n            return {\n              h: vals[0],\n              m: vals[1],\n              s: vals[2],\n              period: (input_period && input_period.value) || undefined,\n            };\n          };\n          __setInputs = function (h, m, s, isPm) {\n            input_number[0].value = h;\n            input_number[1].value = m;\n            if (input_number[2]) input_number[2].value = s;\n            ml.assert(isPm === undefined || input_period);\n            if (input_period) input_period.value = isPm ? \"PM\" : \"AM\";\n          };\n\n          __isAMPM = !!input_period;\n\n          //addEventListener('input'.. incomplete; isn't fired when value changed programmatically\n          input_all.forEach(function (i) {\n            i[\n              i.tagName === \"SELECT\" ? \"onc\" + \"hange\" : \"oninput\"\n            ] = function () {\n              __onInputsChange();\n            };\n          });\n\n          fireCallback();\n        })();\n    }\n    ctObj.input = function (inputForm, _type, _timer) {\n      //{{{\n      //spinning wheel inputs{\n      //-test; http://jsfiddle.net/KGGdt/\n      //-http://demo.mobiscroll.com/datetime/time\n      //-http://cubiq.org/spinning-wheel-on-webkit-for-iphone-ipod-touch\n      //-native picker\n      // -http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Picker\n      //  -\"On iOS the size of the picker is fixed at the same size as the iPhone keyboard\"\n      // -http://stackoverflow.com/questions/1482586/comparison-between-corona-phonegap-titanium\n      // -http://stackoverflow.com/questions/11201110/html-5-ios-creating-hybrid-applications\n      // -http://stackoverflow.com/questions/6651125/phonegap-to-what-extent-can-i-interact-with-native-ui-components\n      // -http://stackoverflow.com/questions/4946919/invoke-native-date-picker-from-web-app-on-ios-android\n      // -http://stackoverflow.com/questions/388814/date-picker-for-iphone-web-application\n      //}\n      ml.assert(\n        _type === ctObj.TYPES.TIMER ||\n          _type === ctObj.TYPES.ALARM ||\n          _type === ctObj.TYPES.STOPW\n      );\n      ml.assert(\n        !inputForm ||\n          (inputForm.nodeName && inputForm.nodeName.toLowerCase() === \"form\")\n      );\n\n      var _onInputsChange;\n      var _onLoaded = function () {\n        //initial _setInputs + _onInputsChange\n        if (_type === ctObj.TYPES.STOPW || !_timer.data) return;\n        var d = _timer.data.getPreset(_type);\n        if (\n          d.hours === undefined &&\n          d.minutes === undefined &&\n          d.seconds === undefined\n        ) {\n          if (_type === ctObj.TYPES.ALARM) {\n            var t = ml.date.add(new Date(), 0, 10, 0);\n            d.hours = t.getHours();\n            d.minutes = t.getMinutes();\n          }\n          if (_type === ctObj.TYPES.TIMER) {\n            d.minutes = 10;\n          }\n        }\n        function setInit() {\n          _setInputs(d.hours, d.minutes, d.seconds, true);\n        }\n        setInit();\n        _onInputsChange = function (__inputs) {\n          _timer.data.setPreset(\n            { hours: __inputs.h, minutes: __inputs.m, seconds: __inputs.s },\n            _type\n          );\n        };\n      };\n      var _setInputs;\n      var _getCountdownEnd;\n      loadDom(inputForm, _type, function (\n        __getInputs,\n        __setInputs,\n        __isAMPM,\n        __setInputChangeListener\n      ) {\n        if (_type === ctObj.TYPES.STOPW) {\n          _getCountdownEnd = function () {\n            return undefined;\n          };\n          return;\n        }\n\n        var _inputChangeListener;\n        (function () {\n          var oldVals = __getInputs();\n          _inputChangeListener = function (noOnChange) {\n            var newVals = __getInputs();\n            if (JSON.stringify(oldVals) !== JSON.stringify(newVals)) {\n              if (!noOnChange)\n                ml.safe_call.apply(null, [_onInputsChange].concat(newVals));\n              oldVals = newVals;\n            }\n          };\n          __setInputChangeListener(_inputChangeListener);\n        })();\n\n        _setInputs = function (h, m, s, noOnChange) {\n          //*\n          ml.assert(\n            (h === undefined || h === 0 || (h && h.constructor === Number)) &&\n              (m === undefined || m === 0 || (m && m.constructor === Number)) &&\n              (s === undefined || s === 0 || (s && s.constructor === Number))\n          );\n          //*/\n          /*\n          ml.assert(\n            (!h || h.constructor === Number) &&\n              (!m || m.constructor === Number) &&\n              (!s || s.constructor === Number)\n          );\n          */\n          h = h || \"\";\n          m = m || \"\";\n          s = s || \"\";\n          var isPm;\n          if (__isAMPM && parseInt(h, 10) >= 12) {\n            h -= 12;\n            isPm = true;\n          }\n          if (!h && _type === ctObj.TYPES.ALARM) h = \"0\";\n          //if(!m && _type===ctObj.TYPES.ALARM) m='0';\n          if (__isAMPM && parseInt(h, 10) === 0) h = \"12\";\n          if (_type === ctObj.TYPES.ALARM) {\n            h = ml.date.readablize(h);\n            m = ml.date.readablize(m);\n            s = ml.date.readablize(s);\n            if (!h) h = \"00\";\n            if (!m) m = \"00\";\n          }\n          if (_type === ctObj.TYPES.TIMER) {\n            if (h) h = parseInt(h, 10);\n            if (m) m = parseInt(m, 10);\n            if (s) s = parseInt(s, 10);\n          }\n          __setInputs(h, m, s, isPm);\n          _inputChangeListener(noOnChange);\n        };\n\n        _getCountdownEnd = (function () {\n          function ___getInputs() {\n            var inputs = __getInputs();\n            if (inputs.period === \"PM\" && inputs.h !== 12)\n              inputs.h = inputs.h + 12;\n            if (inputs.period === \"AM\" && inputs.h === 12)\n              inputs.h = inputs.h - 12;\n            return inputs;\n          }\n          if (_type === ctObj.TYPES.TIMER)\n            return function () {\n              var inputs = ___getInputs();\n              var ret = +ml.date.add(new Date(), inputs.h, inputs.m, inputs.s);\n              var MAX_COUNTDOWN = +new Date() + 999999999999;\n              if (isNaN(ret) || ret > MAX_COUNTDOWN) return MAX_COUNTDOWN;\n              return ret;\n            };\n          if (_type === ctObj.TYPES.ALARM)\n            return function () {\n              var inputs = ___getInputs();\n              var ret = new Date();\n              ret.setHours(inputs.h || 0, inputs.m || 0, inputs.s || 0, 0);\n              //don't use setUTCDate to make it work with timezone\n              if (ret <= new Date()) ret.setDate(ret.getDate() + 1);\n              return +ret;\n            };\n        })();\n\n        _onLoaded();\n      });\n\n      //inputForm.set_     = function(){\n      //  ml.assert(_setInputs);\n      //  if(_setInputs) _setInputs.apply(null,arguments);\n      //};\n      //trigger onStart, submitListeners\n      inputForm.onsubmit = function (ev) {\n        if (ev) ev.preventDefault();\n        ml.assert(_getCountdownEnd);\n        if (!_getCountdownEnd) return false;\n        ml.safe_call(this.onStart, _getCountdownEnd());\n        var that = this;\n        ml.safe_call(function () {\n          inputForm.submitListeners &&\n            inputForm.submitListeners.forEach(function (l) {\n              l.call(that);\n            });\n        });\n        return false;\n      };\n      inputForm.type = _type;\n      return inputForm;\n      //}}}\n    };\n  })();\n\n  ctObj.Timer_dom = (function () {\n    function Timer_js(initialState) {\n      var that = this;\n      that.listen = {};\n      that.trigger = {};\n      //that.spark\n      //that.kill\n\n      var STATE_CODES = {};\n      STATE_CODES.STOPED = 1;\n      STATE_CODES.PAUSED = 2;\n      STATE_CODES.PLAYING = 3;\n      STATE_CODES.RINGING = 4;\n\n      function triggerStateChangeEvent(ns, action) {\n        ml.safe_call(that.listen.stateChange, action, ns, STATE_CODES);\n        if (action)\n          ml.safe_call(that.listen.dataChange, {\n            state: state.getData(),\n            operation: action,\n          });\n      }\n      function triggerEndChangeEvent(newEnd, oldEnd) {\n        ml.safe_call(that.listen.endChange, newEnd, oldEnd);\n      }\n\n      //define state+public fcts\n      var state = {};\n      //{{{\n      (function () {\n        //state variables\n        var __start = initialState && initialState.start,\n          __end = initialState && initialState.end,\n          __paused = initialState && initialState.paused;\n\n        //state variables readers\n        state.isNotStoped = function () //{{{\n        {\n          return __start !== undefined;\n        };\n        //}}}\n        state.isPaused = function () //{{{\n        {\n          return !!__paused;\n        };\n        //}}}\n        function getDiff() {\n          //{{{\n          ml.assert(__paused === undefined || __paused.constructor === Number);\n          var ct_date = __paused || +new Date();\n          if (__end) return __end - ct_date;\n          return ct_date - __start;\n        }\n        //}}}\n        //state.getMs=function()\n        ////{{{\n        //{\n        //  return getDiff()%1000;\n        //};\n        ////}}}\n        state.getDelta = function () //{{{\n        {\n          if (__end) return Math.ceil(getDiff() / 1000);\n          return Math.floor(getDiff() / 1000);\n        };\n        //}}}\n        state.getPercent = function () //{{{\n        {\n          if (!__end) return null;\n          ml.assert(__end, \"__end==\" + __end);\n          ml.assert(__start, \"__start==\" + __start);\n          var progress_total = Math.abs(__end - __start); //if timer set to 0 -> progress_total may be negative\n          var progress_current = getDiff();\n          var res =\n            progress_total === 0\n              ? 1\n              : Math.min(1 - progress_current / progress_total, 1); //Math.min(1/0,1)===1 && isNaN(Math.min(0/0,0))\n          ml.assert(\n            !isNaN(res),\n            \"progress_total==\" +\n              progress_total +\n              \",progress_current==\" +\n              progress_current\n          );\n          ml.assert(res >= 0 && res <= 1, res);\n          return res;\n        };\n        //}}}\n        state.isCountdown = function () //{{{\n        {\n          return !!__end;\n        };\n        //}}}\n        state.getData = function () //{{{\n        {\n          return { start: __start, end: __end, paused: __paused };\n        };\n        //}}}\n        state.init__ = function () //{{{\n        {\n          ml.assert(\n            !initialState ||\n              initialState.end === undefined ||\n              initialState.end.constructor === Number\n          );\n\n          //if(initialState && (initialState.end===null || initialState.end>(initialState.paused || new Date)))\n          //{\n          //  ml.assert(__end!==undefined && __start!==undefined);\n          //  triggerStateChangeEvent(__paused?STATE_CODES.PAUSED:STATE_CODES.PLAYING,true);\n          //}\n\n          var stillRunning =\n            initialState &&\n            initialState.start &&\n            (initialState.end === undefined ||\n              initialState.end > (initialState.paused || +new Date()));\n\n          triggerStateChangeEvent(\n            (!stillRunning && STATE_CODES.STOPED) ||\n              (__paused && STATE_CODES.PAUSED) ||\n              STATE_CODES.PLAYING\n          );\n\n          heartbeat(true);\n        };\n        //}}}\n\n        that.trigger.start__ = function (\n          newEnd //{{{\n        ) {\n          ml.assert(\n            newEnd !== \"Invalid Date\" &&\n              (newEnd === undefined ||\n                (newEnd.constructor === Number &&\n                  !isNaN(newEnd) &&\n                  newEnd - +new Date() <= 999999999999))\n          );\n          __start = +new Date();\n          triggerEndChangeEvent(newEnd, __end);\n          __end = newEnd;\n          __paused = undefined;\n\n          triggerStateChangeEvent(STATE_CODES.PLAYING, \"start\");\n\n          heartbeat(true);\n        };\n        //}}}\n        that.trigger.stop__ = function () //{{{\n        {\n          if (!state.isNotStoped()) return;\n          __start = undefined;\n          triggerEndChangeEvent(undefined, __end);\n          __end = undefined;\n          __paused = undefined;\n          triggerStateChangeEvent(STATE_CODES.STOPED, \"st\" + \"op\");\n        };\n        //}}}\n        that.trigger.ensurePause = function () {\n          // Already paused\n          if (__paused) {\n            return;\n          }\n          // Is a stopwatch - no need to pause it\n          if (!__end) {\n            return;\n          }\n          that.trigger.togglePause();\n        };\n        that.trigger.togglePause = function () //{{{\n        {\n          ml.assert(__paused === undefined || __paused.constructor === Number);\n\n          if (!__end && !__start) return; //already stoped\n\n          var delta = __paused ? new Date() - __paused : 0;\n\n          if (__end && __end + delta < new Date()) that.trigger.stop__();\n          else if (!__paused) {\n            triggerEndChangeEvent(undefined, __end);\n            __paused = +new Date();\n            triggerStateChangeEvent(STATE_CODES.PAUSED, \"pause\");\n          } else {\n            ml.assert(__paused.constructor === Number);\n            __start = +new Date(__start + delta);\n            if (__end) {\n              var newEnd = +new Date(__end + delta);\n              triggerEndChangeEvent(newEnd, undefined);\n              __end = newEnd;\n            }\n            __paused = undefined;\n            triggerStateChangeEvent(STATE_CODES.PLAYING, \"resume\");\n          }\n        };\n        //}}}\n        that.trigger.toggleStop = function (\n          newEnd //{{{\n        ) {\n          ml.assert(newEnd !== \"Invalid Date\"); //happens if __end is set too far in the future\n\n          if (state.isNotStoped()) that.trigger.stop__();\n          else that.trigger.start__(newEnd);\n\n          heartbeat();\n        };\n        //}}}\n      })();\n      //}}}\n\n      var heartbeat = (function () //{{{\n      {\n        var lastDiff;\n        var lastStarted;\n\n        return function (reset) {\n          if (reset) {\n            lastDiff = true;\n            lastStarted = true;\n          }\n          var percent = state.getPercent();\n          if (!state.isNotStoped()) {\n            if (lastStarted)\n              ml.safe_call(\n                that.listen.countdown_,\n                -2,\n                (percent && 1) || percent\n              );\n            lastStarted = false;\n            return;\n          }\n          lastStarted = true;\n          var diff_ = state.getDelta();\n          if (lastDiff === undefined || lastDiff !== diff_) {\n            lastDiff = diff_;\n            ml.safe_call(that.listen.countdown_, diff_, percent);\n            if (diff_ === 0 && state.isCountdown())\n              triggerStateChangeEvent(STATE_CODES.RINGING);\n          }\n        };\n        //}}}\n      })();\n\n      (function () {\n        var sparking;\n        that.spark = function () //{{{\n        {\n          ml.assert(sparking === undefined);\n          sparking = true;\n          (function fn() {\n            if (!sparking) return;\n            heartbeat();\n            window.setTimeout(fn, 300);\n          })();\n          state.init__();\n        };\n        //}}}\n        that.kill = function () //{{{\n        {\n          sparking = false;\n        };\n        //}}}\n      })();\n    }\n\n    var notify = {};\n    (function () {\n      var NO_DYNAMIC_FAVICONS =\n        /Chrome/.test(navigator.userAgent) &&\n        /Chrome[^\\s]*/\n          .exec(navigator.userAgent)[0]\n          .replace(\"Chrome/\", \"\")\n          .split(\".\")\n          .map(function (v, i) {\n            return [parseInt(v, 10), [22, 0, 1215, 0][i] || 0];\n          })\n          .map(function (v) {\n            if (v[0] > v[1]) return true;\n            if (v[0] < v[1]) return false;\n            return undefined;\n          })\n          .reduce(function (v1, v2) {\n            return v1 === undefined ? v2 : v1;\n          }) === false;\n      var onPopupClick;\n      var NOTI_TEXT = \"\";\n      var NOTI_TEXT_2 = \"\";\n      var notis = {};\n      (function () {\n        //{{{\n        var feature_fcts = [];\n\n        //define webkit notification\n        feature_fcts.push(function () {\n          if (!ml.noti.isAvailable()) return;\n          notis.popupNotification = function (timerName) {\n            if (ml.noti.permission_notAllowed()) return;\n            ml.asyncStore.get(\"disableNotification\", function (val) {\n              if (val) return;\n              var cancelFct = ml.noti.fire(\n                NOTI_TEXT,\n                NOTI_TEXT_2,\n                ml.timerIcon(0, 1), //returns 16x16px image, but chrome scales it up\n                //function(){window.setTimeout(cancelFct,15000)},\n                10000,\n                function () {\n                  //window.focus();\n                  cancelFct();\n                  if (onPopupClick) onPopupClick();\n                }\n              );\n              notis.popupNotificationCancel = cancelFct;\n              //not working on reload:\n              //-https://code.google.com/p/chromium/issues/detail?id=40262\n              //-http://stackoverflow.com/questions/5971710/how-can-i-close-all-notifications-of-a-page-before-unload-it-without-use-window\n              ml.addCloseEvent(cancelFct);\n            });\n          };\n        });\n\n        /*\n      //define webkit notification\n      feature_fcts.push(function(){ \n        if(window.webkitNotifications) notis.webkitNoti=function(timerName)\n        {\n          if(window.webkitNotifications.checkPermission()!=0) return;\n          ml.asyncStore.get('disableNotification',function(val){\n            var notii=window.webkitNotifications.createNotification(\n              ml.timerIcon(0,1), //returns 16x16px image, but chrome scales it up\n              NOTI_TEXT,\n              NOTI_TEXT_2\n            );\n\n            function canceli(){notii.cancel()}\n            notii.ondisplay=function(){window.setTimeout(canceli,8000)};\n            notii.onclick  =function(){\n              //window.focus();\n              canceli();\n              if(onPopupClick) onPopupClick();\n            };\n            //not working on reload:\n            //-https://code.google.com/p/chromium/issues/detail?id=40262\n            //-http://stackoverflow.com/questions/5971710/how-can-i-close-all-notifications-of-a-page-before-unload-it-without-use-window\n            ml.addCloseEvent(canceli);\n\n            notii['sh'+'ow']();\n          });\n        };\n      }); \n      */\n\n        ml.safe_call(feature_fcts);\n        //}}}\n      })();\n      notify.state = function (_onPopupClick) {\n        onPopupClick = _onPopupClick;\n        //define ring notifications\n        notis.ring = {};\n        (function () {\n          var ring = {};\n          var feature_fcts = [];\n          //orchestrate notifications\n          //{{{\n          feature_fcts.push(function () {\n            notis.ring.play_ = function () {\n              notifyStart();\n            };\n            notis.ring.stop = function () {\n              notifyStop();\n            };\n          });\n          //}}}\n\n          ml.safe_call(feature_fcts);\n        })();\n\n        var onTimesUp = [];\n        onTimesUp.push(notis.ring.play_);\n        onTimesUp.push(notis.popupNotification);\n\n        var lastState;\n        return function (state_, STATE_CODES, timerName) {\n          //state_ === STOPED || PAUSED || PLAYING || RINGING\n          ml.i18n.get(function (lang) {\n            NOTI_TEXT =\n              (timerName || \"timer\") +\n              \" \" +\n              ((lang === \"de\" && \"abgelaufen\") ||\n                (lang === \"fr\" && \"terminé\") ||\n                \"finished\");\n            NOTI_TEXT_2 =\n              (lang === \"de\" && \"hier klicken, um das Klingeln zu stoppen\") ||\n              (lang === \"fr\" && \"cliquez ici pour arrêter la sonnerie\") ||\n              \"click here to st\" + \"op the alarm bell\";\n          });\n          if (lastState !== state_) {\n            if (lastState === STATE_CODES.RINGING) {\n              ml.safe_call(notis.ring.stop);\n              ml.safe_call(notis.popupNotificationCancel);\n            }\n            if (state_ === STATE_CODES.RINGING)\n              ml.safe_call(onTimesUp, timerName);\n          }\n          lastState = state_;\n        };\n      };\n      notify.tab = (function () {\n        var _onCountdown = [];\n\n        if (!NO_DYNAMIC_FAVICONS) {\n          var lastIconURL;\n          _onCountdown.push(function (diff, percent) {\n            var iconURL = ml.timerIcon(diff, percent);\n            if (lastIconURL === undefined || lastIconURL !== iconURL) {\n              lastIconURL = iconURL;\n              ml.changeIcon(iconURL);\n            }\n          });\n        }\n\n        _onCountdown.push(function (diff, undefined, postText) {\n          var newTitle =\n            diff % 2 === -1\n              ? \"\\u266a\"\n              : ml.date.readable.getCounter(diff < 0 ? 0 : diff * 1000, \"text\");\n          var SEPERATOR = \"\\u00a0|\\u00a0\";\n          if (postText) newTitle = newTitle + SEPERATOR + postText;\n          if (ml.isPackagedApp())\n            newTitle = newTitle + \"\\u00a0\" + SEPERATOR + \"Timer Tab\";\n          document.title = newTitle;\n        });\n\n        //return function(diff,percent,postText){ml.safe_call(_onCountdown,diff,percent,postText)};\n        return function () {\n          ml.safe_call.apply(\n            null,\n            [_onCountdown].concat([].slice.call(arguments))\n          );\n        };\n      })();\n      notify.alarm = {};\n      notify.alarm.add = function (d) {\n        //no more waking up of timer packaged app\n        ////http://developer.chrome.com/apps/alarms.html#type-AlarmCreateInfo\n        //notify.alarm.remove(d);\n        //d-=3*1000;\n        //if(window['chrome'] && window['chrome']['alarms']) window['chrome']['alarms']['create']((+d)+\"\",{'when':+d});\n      };\n      notify.alarm.remove = function (d) {\n        //no more waking up of timer packaged app\n        //d-=3*1000;\n        ////clearing a non existent alarm throws execption\n        //if(window['chrome'] && window['chrome']['alarms']) try{window['chrome']['alarms']['clear' ]((+d)+\"\");}catch(e){}\n      };\n    })();\n\n    return function (initialState, initialType) {\n      var thisTimer = this;\n      thisTimer.dom = {};\n\n      var interface_ = {};\n      (function () {\n        var setText;\n        (function () {\n          var lastText;\n          function sizeIt() {\n            if (!thisTimer.dom.counter) return;\n            ml.adjustFontSize(\n              thisTimer.dom.counter,\n              false && [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"-\"],\n              true,\n              \"00:00\",\n              true\n            );\n            //avoid infinite resize events loop as extension -- because window's size get's resized as content size's changes\n            if (!ml.isExtension())\n              ml.addResizeTimeoutEvent(sizeIt, 100, function () {\n                thisTimer.dom.counter.style.fontSize = \"0px\";\n              });\n          }\n          function doIt(diff) {\n            var newText = ml.date.readable.getCounter(\n              diff < 0 ? 0 : diff * 1000,\n              \"countdown\"\n            );\n            if (lastText === newText) return;\n            //thisTimer.dom.counter.setAttribute('data-text',newText);\n            //#counter:before{ content: attr(data-text); }\n            //-I don't remember why I used attribute instead of innerHTML\n            //-setting counter through attribute is buggy when hovering mouse on plusone button\n\n            thisTimer.dom.counter.innerHTML = newText;\n            //__promo images:\n            //thisTimer.dom.counter.innerHTML='13:37';\n            if (\n              !thisTimer.dom.counter.noFontSizeAdjusting &&\n              (!lastText || lastText.length !== newText.length)\n            )\n              sizeIt();\n            lastText = newText;\n          }\n          setText = function (diff) {\n            if (!thisTimer.dom.counter) return;\n            //if(!lastText) doIt();\n            //else ml.reqFrame(doIt);\n            ml.reqFrame(function () {\n              doIt(diff);\n            });\n          };\n        })();\n\n        var ct__ = new Timer_js(initialState);\n        ct__.listen.stateChange = function () {\n          ml.safe_call.apply(\n            null,\n            [interface_.stateChange].concat([].slice.call(arguments))\n          );\n        };\n        ct__.listen.dataChange = function () {\n          ml.safe_call.apply(\n            null,\n            [interface_.dataChange].concat([].slice.call(arguments))\n          );\n        };\n        ct__.listen.endChange = function () {\n          ml.safe_call.apply(\n            null,\n            [interface_.endChange].concat([].slice.call(arguments))\n          );\n        };\n        ct__.listen.countdown_ = function (diff, percent) {\n          setText(diff);\n          ml.safe_call(interface_.onCountdown, diff, percent);\n        };\n\n        interface_.spark = function () {\n          setText(0);\n          ct__.spark();\n        };\n        interface_.start_ = ct__.trigger.start__;\n        interface_.stop_ = ct__.trigger.stop__;\n        interface_.togglePause = ct__.trigger.togglePause;\n        interface_.ensurePause = ct__.trigger.ensurePause;\n        interface_.toggleStop = ct__.trigger.toggleStop;\n        interface_.kill = ct__.kill;\n      })();\n\n      var state_notifier;\n      interface_.stateChange = function (action, __newState, STATE_CODES) {\n        ml.safe_call(\n          state_notifier,\n          __newState,\n          STATE_CODES,\n          thisTimer.getName && ml.safe_call(thisTimer.getName, __type)\n        );\n        __isRinging = __newState === STATE_CODES.RINGING;\n        ml.safe_call(\n          thisTimer.onStateChange,\n          action,\n          __newState,\n          STATE_CODES,\n          __type\n        );\n      };\n\n      interface_.dataChange = function (d) {\n        if (!thisTimer.data) return;\n        if (d.operation === \"start\") d.type = __type;\n        ml.safe_call(function () {\n          thisTimer.data.onDataChange(d);\n        });\n      };\n\n      function setAlarmTime(_end) {\n        if (__type === ctObj.TYPES.ALARM && _end && thisTimer.dom.alarmTime)\n          ml.i18n.isAMPMTime(function (isAMPM) {\n            const military_format = !isAMPM;\n            const time = display_time(_end, { military_format });\n            thisTimer.dom.alarmTime.innerHTML = time;\n          });\n      }\n\n      interface_.endChange = function (newEnd, oldEnd) {\n        if (newEnd) notify.alarm.add(newEnd);\n        if (oldEnd) notify.alarm.remove(oldEnd);\n        setAlarmTime(newEnd);\n      };\n\n      thisTimer.makeTabTimer = function (disconnect) {\n        interface_.onCountdown = disconnect\n          ? undefined\n          : function (diff, perc) {\n              notify.tab(\n                diff,\n                perc,\n                thisTimer.data && thisTimer.data.getName()\n              );\n            };\n      };\n\n      var __isRinging;\n      var __type = initialType;\n      thisTimer.spark = function (noNotification) {\n        if (thisTimer.dom.youtube_wrapper) {\n          thisTimer.dom.youtube_wrapper.onclick = interface_.stop_;\n          if (!noNotification) state_notifier = notify.state(interface_.stop_);\n        }\n        if (thisTimer.dom.inputs) {\n          if (thisTimer.dom.inputs.length === 1)\n            __type = thisTimer.dom.inputs[0].type;\n          thisTimer.dom.inputs.forEach(function (ctInput) {\n            ctInput.onStart = function (timerEnd) {\n              __type = ctInput.type;\n              interface_.start_(timerEnd);\n            };\n          });\n        }\n        if (thisTimer.dom.pauseBtn) {\n          thisTimer.dom.pauseBtn.onclick = function () {\n            // if (__type !== ctObj.TYPES.ALARM || __isRinging)\n            interface_.togglePause();\n          };\n        }\n        /*\n      if(thisTimer.dom.name_input && thisTimer.dom.name_el) { \n        var nameInput = thisTimer.dom.name_input;\n        function setNameAttr(){\n          thisTimer.dom.name_el.setAttribute('data-name',nameInput.value);\n        }\n        if(thisTimer.data){\n          nameInput.value=thisTimer.data.getName()||'';\n          setNameAttr();\n        }\n        nameInput.onkeyup=function(ev){\n          if(ml.getChar(ev)==='enter')\n            nameInput.blur();\n          else{\n            if(thisTimer.data) thisTimer.data.setName(nameInput.value);\n            setNameAttr();\n          }\n        };\n      } \n      */\n        setAlarmTime(initialState.end);\n        interface_.spark();\n      };\n\n      thisTimer.start = interface_.start_;\n      thisTimer.toggleStop = interface_.toggleStop;\n      thisTimer.kill = interface_.kill;\n      //thisTimer.togglePause = interface_.togglePause;\n      thisTimer.ensurePause = interface_.ensurePause;\n\n      return thisTimer;\n    };\n  })();\n\n  (function () {\n    ml.load = (function () {\n      var modules = {};\n      return function (moduleName, dependancies, module) {\n        if (moduleName.constructor === Array) {\n          module = dependancies;\n          dependancies = moduleName;\n          moduleName = undefined;\n        }\n        if (\n          !(\n            ((moduleName && moduleName.constructor === String) ||\n              moduleName === undefined) &&\n            dependancies &&\n            dependancies.constructor === Array &&\n            module &&\n            module.constructor === Function\n          )\n        )\n          throw \"wrong usage\";\n        var ret = module.apply(\n          null,\n          dependancies.map(function (d) {\n            return (\n              modules[d] ||\n              (function () {\n                throw \"no module \" + d;\n              })()\n            );\n          })\n        );\n        if (moduleName) {\n          if (\n            !ret ||\n            (ret.constructor !== Object && ret.constructor !== Function)\n          )\n            throw \"module should be an object or a function\";\n          modules[moduleName] = ret;\n        }\n      };\n    })();\n\n    ml.load(\"data\", [], function () {\n      //data.init\n      //data.Countdown\n      //data.onChange\n      //data.onExtChange\n      var TYPES = ctObj.TYPES;\n      function isTime(t) {\n        return (\n          t &&\n          (t.constructor === Number || t.constructor === String) &&\n          t.toString().length === 13 &&\n          !/[^\\d]/.test(t) &&\n          (t.constructor === Number || parseInt(t, 10).toString() === t)\n        );\n      }\n      var _ret = {};\n      var __data;\n      var __onDataChange;\n      _ret.init = function (onRetrieved) {\n        function do_() {\n          ml.getPersistedObject(\"countdowns\", function (retrieved) {\n            __data = retrieved;\n            retrieved.addChangeListener(function () {\n              __onDataChange();\n              ml.safe_call(_ret.onExtChange);\n            });\n            __onDataChange();\n            onRetrieved();\n          });\n        }\n        ml.asyncStore.get(\"data_version\", function (used_version) {\n          var CURRENT_DATA_VERSION = \"5\";\n          if (used_version !== CURRENT_DATA_VERSION)\n            ml.asyncStore.set(\"data_version\", CURRENT_DATA_VERSION);\n          if (used_version && used_version !== CURRENT_DATA_VERSION)\n            ml.asyncStore.clear(do_);\n          else do_();\n        });\n      };\n      _ret.Countdown = function (__id) {\n        //KEYS\n        //{{{\n        //required because of google closure compiler\n        var __KEY_NAME = \"0\";\n        var __KEY_TYPE = \"1\";\n        var __KEY_STATE = \"2\";\n        var __KEY_STATE_START = \"3\";\n        var __KEY_STATE_END = \"4\";\n        var __KEY_STATE_PAUSED = \"5\";\n        var __KEY_PRESET = \"6\";\n        var __KEY_PRESET_HOURS = \"7\";\n        var __KEY_PRESET_MINUTES = \"8\";\n        var __KEY_PRESET_SECONDS = \"9\";\n        var __KEY_HISTORY = \"a\";\n        var __KEY_HISTORY_OPERATION = \"b\";\n        var __KEY_HISTORY_TYPE = \"m\";\n        var __KEY_HISTORY_TIME = \"c\";\n        var __KEY_CREATION_TIME = \"d\";\n        var __KEY_MOD = \"g\";\n        var __KEY_MOD_REMOVED = \"i\";\n        var __KEY_MOD_TS = \"j\";\n        var __KEY_MOD_FAKE = \"k\";\n        var __KEY_MOD_OPERATION = \"l\";\n        var __KEY_OPT = \"e\";\n        var __KEY_OPT_RING_YT = \"f\";\n        var __KEY_OPT_RING_REPEAT = \"h\";\n        var __KEY_TOUCH = \"n\";\n        var __KEY_TAGS = \"o\";\n        //next available char: 'p'\n        var OPERATIONS = [\"lap\", \"start\", \"stop\", \"resume\", \"pause\"];\n        //}}}\n        ml.assert(\n          __id === undefined || (__id.constructor === Number && isTime(__id))\n        );\n        function checkRef() {\n          corEx(__data);\n          corEx(__id);\n          corEx(__data[__id]);\n          corEx(__data[__id][__KEY_CREATION_TIME] === __id);\n        }\n        //corEx((getCreationTime()===undefined || ct===__data[getCreationTime()]))\n        function getCt() {\n          checkRef();\n          return __data[__id];\n        }\n        function getCreationTime() {\n          var ct = getCt();\n          return ct[__KEY_CREATION_TIME];\n        }\n        function _save(newOrRemove) {\n          //if(!__data[getCreationTime()] && !newOrRemove) return;\n          __onDataChange();\n          __data.put();\n        }\n        var creationTime = +new Date();\n        function corEx(bool) {\n          if (bool) return;\n          ml.assert(bool, undefined, 0);\n          throw \"about to corrupt data\";\n        }\n        if (!__id) {\n          //create new ct\n          //if(__data[getCreationTime()]) throw 'countdown already added';\n          //if(!this.getType()) throw 'Add type before adding new countdown';\n          __id = (function () {\n            var ret = +new Date();\n            //var ids = Object.keys(_ret.getAll()).map(function(id){return parseInt(id,10)});\n            //var ids = _ret.getAll().map(function(ctI){return ctI.getCreationTime()});\n            var ids = Object.keys(__data).map(function (id) {\n              return parseInt(id, 10);\n            });\n            if (ids.constructor !== Array || !ids.indexOf)\n              throw \"avoing infinite loop\";\n            ml.assert(\n              ret.constructor === Number &&\n                (!ids[0] || ids[0].constructor === Number)\n            );\n            while (ids.indexOf(ret) >= 0) ret++;\n            corEx(ret.constructor === Number && isTime(ret));\n            corEx(__data[ret] === undefined);\n            return ret;\n          })();\n          __data[__id] = (function () {\n            var ret = {};\n            ret[__KEY_CREATION_TIME] = __id;\n            return ret;\n          })();\n          _save(true);\n        }\n        return {\n          getName: function () {\n            return undefined; /*var ct=getCt();return ct[__KEY_NAME]*/\n          },\n          getTags: function () {\n            var ct = getCt();\n            return ct[__KEY_TAGS];\n          },\n          getType: function () {\n            var ct = getCt();\n            return ct[__KEY_TYPE];\n          },\n          setType: function (newVal) {\n            var ct = getCt();\n            corEx(\n              newVal &&\n                (newVal === TYPES.STOPW ||\n                  newVal === TYPES.ALARM ||\n                  newVal === TYPES.TIMER)\n            );\n            ct[__KEY_TYPE] = newVal;\n            _save();\n          },\n          setName: function (newVal) {\n            var ct = getCt();\n            corEx(newVal === undefined || newVal.constructor === String);\n            ct[__KEY_NAME] = newVal;\n            _save();\n          },\n          setTags: function (newVal) {\n            var ct = getCt();\n            corEx(newVal === undefined || newVal.constructor === String);\n            ct[__KEY_TAGS] = newVal;\n            _save();\n          },\n          getState: function () {\n            var ct = getCt();\n            return {\n              start: ct[__KEY_STATE] && ct[__KEY_STATE][__KEY_STATE_START],\n              end: ct[__KEY_STATE] && ct[__KEY_STATE][__KEY_STATE_END],\n              paused: ct[__KEY_STATE] && ct[__KEY_STATE][__KEY_STATE_PAUSED],\n            };\n          },\n          setState: function (newVal) {\n            var ct = getCt();\n            corEx(\n              newVal &&\n              (newVal.start === undefined ||\n                (newVal.start.constructor === Number &&\n                  isTime(newVal.start))) &&\n              //sometimes newVal.start>newVal.end when countdown set to 0\n              (newVal.end === undefined ||\n                (newVal.end.constructor === Number &&\n                  isTime(newVal.end))) /*&&newVal.   end>newVal.start*/ &&\n                (newVal.paused === undefined ||\n                  (newVal.paused.constructor === Number &&\n                    isTime(newVal.paused) &&\n                    newVal.paused > newVal.start)) &&\n                (!newVal.paused || !newVal.end || newVal.paused < newVal.end)\n            );\n            ml.assert(ct[__KEY_HISTORY]); //first actualize history\n            if (ct[__KEY_HISTORY]) {\n              var lastHis = ct[__KEY_HISTORY][ct[__KEY_HISTORY].length - 1];\n              //assertions based on assumption that history actualized before state\n              //-history actualized before state -> avoiding corrupted state\n              var oldStart =\n                ct[__KEY_STATE] && ct[__KEY_STATE][__KEY_STATE_START];\n              var oldPause =\n                ct[__KEY_STATE] && ct[__KEY_STATE][__KEY_STATE_PAUSED];\n              ml.assert(\n                (lastHis[__KEY_HISTORY_OPERATION] === \"stop\") ===\n                  (newVal.start === undefined &&\n                    newVal.paused === undefined &&\n                    newVal.end === undefined &&\n                    oldStart !== undefined)\n              );\n              ml.assert(\n                (lastHis[__KEY_HISTORY_OPERATION] === \"pause\") ===\n                  (newVal.start !== undefined &&\n                    newVal.paused !== undefined &&\n                    oldPause === undefined &&\n                    oldStart !== undefined)\n              );\n              //too strict for timertab\n              //ml.assert((lastHis[__KEY_HISTORY_OPERATION]==='start') ===\n              //          (newVal.start!==undefined&&newVal.paused===undefined&&oldStart===undefined&&oldPause===undefined));\n              ml.assert(\n                !(lastHis[__KEY_HISTORY_OPERATION] === \"start\") ||\n                  (newVal.start !== undefined &&\n                    newVal.paused ===\n                      undefined) /*&&oldStart===undefined&&oldPause===undefined*/\n              );\n              //too strict for timertab\n              //ml.assert((lastHis[__KEY_HISTORY_OPERATION]==='resume') ===\n              //          (newVal.start!==undefined&&newVal.paused===undefined&&oldStart!==undefined&&oldPause!==undefined));\n              ml.assert(\n                !(lastHis[__KEY_HISTORY_OPERATION] === \"resume\") ||\n                  (newVal.start !== undefined &&\n                    newVal.paused === undefined &&\n                    oldStart !== undefined &&\n                    oldPause !== undefined)\n              );\n            }\n            ct[__KEY_STATE] = {};\n            ct[__KEY_STATE][__KEY_STATE_START] = newVal.start;\n            ct[__KEY_STATE][__KEY_STATE_END] = newVal.end;\n            ct[__KEY_STATE][__KEY_STATE_PAUSED] = newVal.paused;\n            _save();\n          },\n          getPreset: function (type) {\n            var ct = getCt();\n            if (!type) type = this.getType();\n            ml.assert(type === TYPES.ALARM || type === TYPES.TIMER);\n            if (!ct[__KEY_PRESET] || !ct[__KEY_PRESET][type]) return {};\n            return {\n              hours: ct[__KEY_PRESET][type][__KEY_PRESET_HOURS],\n              minutes: ct[__KEY_PRESET][type][__KEY_PRESET_MINUTES],\n              seconds: ct[__KEY_PRESET][type][__KEY_PRESET_SECONDS],\n            };\n          },\n          setPreset: function (newVal, type) {\n            var ct = getCt();\n            if (!type) type = this.getType();\n            corEx(type === TYPES.ALARM || type === TYPES.TIMER);\n            corEx(newVal);\n            //for(var i in newVal){corEx(newVal[i]===undefined || newVal[i].constructor===Number&&!isNaN(newVal[i])&&newVal[i]>=0 || newVal[i].constructor===String&&newVal[i][0]&&newVal[i][0]==='+');}\n            for (var i in newVal) {\n              corEx(\n                newVal[i] === undefined ||\n                  (newVal[i].constructor === Number &&\n                    !isNaN(newVal[i]) &&\n                    newVal[i] >= 0)\n              );\n            }\n            if (!ct[__KEY_PRESET]) ct[__KEY_PRESET] = {};\n            if (!ct[__KEY_PRESET][type]) ct[__KEY_PRESET][type] = {};\n            ct[__KEY_PRESET][type][__KEY_PRESET_HOURS] = newVal.hours;\n            ct[__KEY_PRESET][type][__KEY_PRESET_MINUTES] = newVal.minutes;\n            ct[__KEY_PRESET][type][__KEY_PRESET_SECONDS] = newVal.seconds;\n            _save();\n          },\n          addHistory: function (d) {\n            var ct = getCt();\n            if (!ct[__KEY_HISTORY]) ct[__KEY_HISTORY] = [];\n            var lastHis = ct[__KEY_HISTORY][ct[__KEY_HISTORY].length - 1];\n            corEx(\n              d.time &&\n                d.time.constructor === Number &&\n                isTime(d.time) &&\n                d.time > creationTime &&\n                (!lastHis || d.time > lastHis[__KEY_HISTORY_TIME])\n            );\n            corEx(OPERATIONS.indexOf(d.operation) !== -1);\n            /*\n                                   if(d.operation==='stop'){\n                                     var state = this.getState();\n                                     corEx(state.start===undefined&&state.end===undefined&&state.paused===undefined);\n                                   }\n                                   */\n            //onsole.print(!lastHis);\n            //onsole.print(lastHis);\n            //too strict for timertab\n            //if(d.operation==='start') ml.assert(!lastHis || lastHis[__KEY_HISTORY_OPERATION]==='stop');\n            if (d.operation !== \"start\")\n              for (var i = ct[__KEY_HISTORY].length - 1; i >= 0; i--) {\n                var op = ct[__KEY_HISTORY][i][__KEY_HISTORY_OPERATION];\n                if (d.operation === \"resume\") {\n                  if (op === \"pause\") break;\n                  ml.assert(op === \"lap\");\n                }\n                ml.assert(op !== \"stop\");\n                if (op === \"start\") break;\n              }\n            var o = {};\n            o[__KEY_HISTORY_OPERATION] = d.operation;\n            if (d.type) o[__KEY_HISTORY_TYPE] = d.type;\n            o[__KEY_HISTORY_TIME] = d.time;\n            ct[__KEY_HISTORY].push(o);\n            _save();\n          },\n          getHistory: function () {\n            var ct = getCt();\n            var ret = [];\n            for (var i in ct[__KEY_HISTORY]) {\n              var r = {};\n              r.operation = ct[__KEY_HISTORY][i][__KEY_HISTORY_OPERATION];\n              r.time = ct[__KEY_HISTORY][i][__KEY_HISTORY_TIME];\n              ret.push(r);\n            }\n            return ret;\n          },\n          setMods: function (mods) {\n            var ct = getCt();\n            ct[__KEY_MOD] = {};\n            var hisTs = ct[__KEY_HISTORY].map(function (h) {\n              return parseInt(h[__KEY_HISTORY_TIME], 10);\n            });\n            corEx(mods);\n            for (var id in mods) {\n              corEx(isTime(id));\n              corEx(\n                mods[id].mod_ts === undefined ||\n                  (mods[id].mod_ts.constructor === Number &&\n                    isTime(mods[id].mod_ts))\n              );\n              corEx(\n                mods[id].removed === undefined ||\n                  mods[id].removed.constructor === Boolean\n              );\n              corEx(\n                mods[id].fake === undefined ||\n                  mods[id].fake.constructor === Boolean\n              );\n              corEx(\n                mods[id].operation === undefined ||\n                  OPERATIONS.indexOf(mods[id].operation) !== -1\n              );\n              corEx(mods[id].fake || hisTs.indexOf(parseInt(id, 10)) !== -1);\n              corEx(mods[id].fake === undefined || mods[id].operation);\n              ct[__KEY_MOD][id] = {};\n              ct[__KEY_MOD][id][__KEY_MOD_TS] = mods[id].mod_ts;\n              ct[__KEY_MOD][id][__KEY_MOD_REMOVED] = mods[id].removed;\n              ct[__KEY_MOD][id][__KEY_MOD_FAKE] = mods[id].fake;\n              ct[__KEY_MOD][id][__KEY_MOD_OPERATION] = mods[id].operation;\n            }\n            _save();\n          },\n          getMods: function () {\n            var ct = getCt();\n            var mod = {};\n            for (var i in ct[__KEY_MOD]) {\n              mod[i] = {};\n              if (ct[__KEY_MOD][i][__KEY_MOD_REMOVED])\n                mod[i].removed = ct[__KEY_MOD][i][__KEY_MOD_REMOVED];\n              if (ct[__KEY_MOD][i][__KEY_MOD_TS])\n                mod[i].mod_ts = ct[__KEY_MOD][i][__KEY_MOD_TS];\n              if (ct[__KEY_MOD][i][__KEY_MOD_FAKE])\n                mod[i].fake = ct[__KEY_MOD][i][__KEY_MOD_FAKE];\n              if (ct[__KEY_MOD][i][__KEY_MOD_OPERATION])\n                mod[i].operation = ct[__KEY_MOD][i][__KEY_MOD_OPERATION];\n            }\n            return mod;\n          },\n          /*\n        setOptions:function(opts) { var ct=getCt();ct[__KEY_OPT][__KEY_OPT_RING_YT]     = opts.ring_yt;\n                                   corEx(TO-DO)\n                                   ct[__KEY_OPT][__KEY_OPT_RING_REPEAT] = opts.ring_repeat;\n                                   _save()},\n        getOptions:function() { var ct=getCt();return {ring_yt     : ct[__KEY_OPT]&&ct[__KEY_OPT][__KEY_OPT_RING_YT],\n                                        ring_repeat : ct[__KEY_OPT]&&ct[__KEY_OPT][__KEY_OPT_RING_REPEAT]}},\n        */\n          getCreationTime: function () {\n            var ct = getCt();\n            return getCreationTime();\n          },\n          remove: function () {\n            if (!__data[getCreationTime()])\n              throw \"Trying to remove a countdown that is not in data\";\n            delete __data[getCreationTime()];\n            _save(true);\n          },\n        };\n      };\n\n      (function () {\n        //make use of cache because eventually app may use old interface anyways\n        var ctInterfaces_cache = {};\n        var ctInterfaces = {};\n        var ctInterfacesArr = [];\n        function parseData() {\n          for (var i in ctInterfaces) delete ctInterfaces[i];\n          for (var i in __data) {\n            ml.assert(i.length === 13);\n            ml.assert(isTime(i));\n            if (!ctInterfaces_cache[i])\n              ctInterfaces_cache[i] = new _ret.Countdown(parseInt(i, 10));\n            ml.assert(i === ctInterfaces_cache[i].getCreationTime().toString());\n            ctInterfaces[i] = ctInterfaces_cache[i];\n          }\n\n          ctInterfacesArr.splice(0);\n          var ids_sorted = Object.keys(ctInterfaces).sort();\n          for (var i in ids_sorted)\n            ctInterfacesArr.push(ctInterfaces[ids_sorted[i]]);\n        }\n        __onDataChange = function () {\n          parseData();\n          ml.safe_call(_ret.onChange, ctInterfacesArr);\n        };\n      })();\n\n      return _ret;\n    });\n\n    (function () {\n      function data2timerObj(timerData) {\n        var initState = timerData.getState();\n        var timerDom = new ctObj.Timer_dom(initState, timerData.getType());\n        timerDom.data = {};\n        (function () {\n          var cumulatedData = {};\n          timerDom.data.onDataChange = function (newData) {\n            if (newData.operation) {\n              newData.history = {};\n              newData.history.operation = newData.operation;\n              newData.history.time = +new Date();\n              if (newData.operation === \"start\") {\n                ml.assert(newData.type);\n                newData.history.type = newData.type;\n              }\n              newData.save = true;\n              delete newData.operation;\n            }\n            for (var i in newData) cumulatedData[i] = newData[i];\n            if (newData.save) {\n              var doRefresh;\n              if (cumulatedData.remove) {\n                timerData.remove();\n                doRefresh = true;\n              } else {\n                if (cumulatedData.history !== undefined) {\n                  timerData.addHistory(cumulatedData.history);\n                  if (cumulatedData.history.operation === \"lap\")\n                    doRefresh = true;\n                }\n                //if(cumulatedData.name    !== undefined){timerData.setName(cumulatedData.name);  doRefresh=true}\n                if (cumulatedData.type !== undefined) {\n                  timerData.setType(cumulatedData.type);\n                  doRefresh = true;\n                }\n                if (cumulatedData.state !== undefined) {\n                  timerData.setState(cumulatedData.state);\n                  doRefresh = true;\n                }\n                //if(cumulatedData.input   !== undefined){timerData.setPreset(cumulatedData.input);doRefresh=true}\n                if (cumulatedData.mods !== undefined) {\n                  timerData.setMods(cumulatedData.mods);\n                  doRefresh = true;\n                }\n              }\n              cumulatedData = {};\n            }\n          };\n        })();\n        timerDom.data.id = timerData.getCreationTime();\n        timerDom.data.expired = !initState.start || initState.end < +new Date();\n        timerDom.data.removeData = function () {\n          timerData.remove();\n        };\n        timerDom.data.getTags = function () {\n          return timerData.getTags();\n        };\n        timerDom.data.setTags = function () {\n          timerData.setTags.apply(timerData, arguments);\n        };\n        timerDom.data.getName = function () {\n          return timerData.getName();\n        };\n        timerDom.data.setName = function () {\n          timerData.setName.apply(timerData, arguments);\n        };\n        //timerDom.data.setType   =function(){       timerData.setType  .apply(timerData,arguments)};\n        timerDom.data.setPreset = function () {\n          timerData.setPreset.apply(timerData, arguments);\n        };\n        timerDom.data.getPreset = function () {\n          return timerData.getPreset.apply(timerData, arguments);\n        };\n\n        return timerDom;\n      }\n      ctObj.timers = {};\n      ml.load([\"data\"], function (data) {\n        data.onChange = function (ret) {\n          ctObj.timers.all = ret.map(data2timerObj);\n        };\n        ctObj.timers.create = function (_type, callback) {\n          var newTimer = new data.Countdown();\n          newTimer.setType(_type);\n          data2timerObj(newTimer).start();\n          callback();\n        };\n        ctObj.timers.setChangeListener = function (listener) {\n          data.onExtChange = listener;\n        };\n        ctObj.timers.init = function (callback) {\n          data.init(callback);\n        };\n      });\n    })();\n  })();\n})();\n","import ml from \"./ml\";\nimport ctObj from \"./countdown\";\nimport { display_time } from \"../../../tab-utils/utils/datetime\";\n// import { getScroll, setScroll } from \"../../../tab-utils/pretty_scroll_area\";\nimport {\n  make_element_zoomable,\n  on_zoom_end,\n  is_zoomed,\n} from \"../../../tab-utils/make_element_zoomable\";\n\nexport default load_timer;\n\nfunction load_timer() {\n  //DOM El refs\n  //{{{\n  var ALARM_FORM = document.getElementById(\"alarmForm\");\n  var TIMER_FORM = document.getElementById(\"timerForm\");\n  var STOPW_FORM = document.getElementById(\"stopwForm\");\n  var PAUSE_ELEM = document.getElementById(\"pause\");\n  var youtube_wrapper = document.getElementById(\"youtube_wrapper\");\n  var ALARM_TIME = document.getElementById(\"alarmTime\");\n  //}}}\n\n  //DOM -- countdown indepedent features\n  var postInitListeners = [];\n  (function () {\n    //{{{\n    if (!ml) return; //mylib.js currently catches IE8\n\n    var TIME_EL = document.getElementById(\"time\");\n    var ALL_CONTENT_EL = document.getElementById(\"allcontent\");\n    var THIRD_PARTY_LOADING_DELAY = 1600;\n    var COUNTER_EL = document.getElementById(\"counter\");\n    var headMovementListeners = ml.safe_call(function () {\n      if (!window.MutationObserver) return undefined;\n      var HEAD_MOVEMENT_DELAY = 600;\n      var ret = [];\n      new MutationObserver(function () {\n        setTimeout(function () {\n          ret.forEach(function (l) {\n            l();\n          });\n        }, HEAD_MOVEMENT_DELAY);\n      }).observe(document.documentElement, {\n        attributes: true,\n        attributeFilter: [\"class\"],\n      });\n      return ret;\n      //alternatively use;\n      //function shift()\n      //{\n      //  if(!(lastForm===this)) {\n      //    lastForm=this;\n      //    ACTION TO DO ON HEAD MOVEMENT\n      //  }\n      //}\n      //TIMER_FORM.submitListeners=[shift];\n      //ALARM_FORM.submitListeners=[shift];\n      //STOPW_FORM.submitListeners=[shift];\n    });\n\n    function displayTimeWithPeriod() {\n      if (\n        document.documentElement[\"classList\"][\"contains\"](\"de\") ||\n        document.documentElement[\"classList\"][\"contains\"](\"fr\")\n      )\n        return false;\n      return true;\n    }\n\n    var feature_fcts = [];\n\n    postInitListeners.push(function () {\n      if (!ml.isExtensionBackground()) return;\n      window[\"chrome\"][\"browserAction\"][\"onClicked\"][\"addListener\"](\n        function () {\n          PAUSE_ELEM.click();\n        }\n      );\n      new MutationObserver(function () {\n        window[\"chrome\"][\"browserAction\"][\"setPopup\"]({\n          popup: document.body[\"classList\"][\"contains\"](\"ringing\")\n            ? \"\"\n            : \"index.html\",\n        });\n      }).observe(document.body, {\n        attributes: true,\n        attributeFilter: [\"class\"],\n      });\n    });\n\n    //input stuff\n    //{{{\n    //input[type=\"tel\"] => input[type=\"number\"] for webkit||metro\n    feature_fcts.push(function () {\n      if (ml.browser().usesWebkit && document.querySelectorAll) {\n        //pattern=\"[0-9]*\" doesn't seem to be implemented in any browser\n        //type=tel triggers numpad on mobile devices\n        var nums = document.querySelectorAll('input[type=\"tel\"]');\n        for (var i = 0; i < nums.length; i++) {\n          var num = nums[i];\n          nums[i].type = \"number\";\n\n          ////chrome bugfix\n          //num.selectionStart=0;\n          //num.selectionEnd=num.value.length;\n\n          if (num.value.length != window.getSelection().toString().length)\n            num.value = num.value.replace(/^0*(?=.)/, \"\");\n        }\n      }\n    });\n    //for inputs: click == double click\n    feature_fcts.push(function () {\n      var INPUTS__ =\n        document.querySelectorAll && document.querySelectorAll(\"input\");\n      if (!INPUTS__) return;\n\n      for (var i = 0; i < INPUTS__.length; i++)\n        INPUTS__[i].addEventListener(\n          \"focus\",\n          function (event) {\n            var that = this;\n            setTimeout(function () {\n              try {\n                //catch InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable.\n\n                if (\n                  document.activeElement &&\n                  document.activeElement === that &&\n                  document.activeElement.selectionStart !== undefined\n                ) {\n                  document.activeElement.selectionStart = 0;\n                  document.activeElement.selectionEnd =\n                    document.activeElement.value.length;\n                }\n              } catch (e) {}\n            }, 0);\n          },\n          false\n        );\n    });\n    //}}}\n\n    //add transitions\n    postInitListeners.push(function () {\n      //this css is added with javascript because otherwise the inline values will be transitioned into the _.css values\n      setTimeout(function () {\n        ml.addCss(\n          \" \\\n        #vertical \\\n        { \\\n          -webkit-transition-property: top,margin!important; \\\n             -moz-transition-property: top,margin!important; \\\n              -ms-transition-property: top,margin!important; \\\n               -o-transition-property: top,margin!important; \\\n                  transition-property: top,margin!important; \\\n        } \\\n      \"\n        );\n      }, 100); //not sure why timeout needed\n      /*\n      ml.addCss(\" \\\n        input[type='button'], \\\n        button \\\n        { \\\n          -webkit-transition-property: border-color color; \\\n          -webkit-transition-duration: 0.21799999475479126s; \\\n        } \\\n      \");\n      */\n    });\n    ////unfullscreen on change\n    //feature_fcts.push(function(){\n    //  var lastForm;\n    //  function shift()\n    //  {\n    //    if(!(lastForm===this)) {\n    //      lastForm=this;\n    //      unfullscreen();\n    //    }\n    //  }\n    //  TIMER_FORM.submitListeners=[shift];\n    //  ALARM_FORM.submitListeners=[shift];\n    //  STOPW_FORM.submitListeners=[shift];\n    //});\n\n    /* TODO\n    //webkit notification setting\n    feature_fcts.push(function(){\n      if(!ml.noti.isAvailable()){\n        document.getElementById('hNoti').style.display='none';\n        return;\n      }\n      var toggleCheckbox = document.getElementById('hNotiBox');\n      function refreshOpt(){\n        ml.asyncStore.get('disableNotification',function(val){\n        //firefox 22 doesn't cope with removeAttribute/setAttribute for checked property\n        //ml.noti.permission_notAllowed()||val?toggleCheckbox.removeAttribute('checked'):toggleCheckbox.setAttribute('checked','true');\n        toggleCheckbox.checked=!(ml.noti.permission_notAllowed()||val);\n        });\n      }\n      refreshOpt();\n      toggleCheckbox.onchange=function(){ml.asyncStore.get('disableNotification',function(val){\n        if(val || ml.noti.permission_notAllowed())\n        {\n          if(ml.noti.permission_denied()){\n            if(ml.noti.manualUnblockMsg) alert(ml.noti.manualUnblockMsg);\n          }\n          else if(ml.noti.permission_notAllowed())\n            ml.noti.permission_req(refreshOpt);\n          ml.asyncStore.set('disableNotification');\n        }\n        else\n          ml.asyncStore.set('disableNotification',\"true\");\n        refreshOpt();\n      })};\n    });\n    */\n\n    //fullscreen\n    //{{{\n    feature_fcts.push(function () {\n      const toggleEl = COUNTER_EL;\n      const containerEl = document.getElementById(\"timer_table_scroll_area\");\n      const scaleEl = document.getElementById(\"timer_table\");\n      const zoomEl = document.getElementById(\"counter_wrapper\");\n\n      // if(headMovementListeners) opts.posChangeListeners=headMovementListeners;\n\n      make_element_zoomable({ containerEl, scaleEl, zoomEl, toggleEl });\n    });\n    //}}}\n\n    //display time\n    feature_fcts.push(function () {\n      var lastTime;\n      function setTime() {\n        ml.reqFrame(function () {\n          const military_format = !displayTimeWithPeriod();\n          const time = display_time(new Date(), { military_format });\n          if (!(lastTime === time)) {\n            lastTime = time;\n            TIME_EL.innerHTML = time;\n            //__promo images:\n            //TIME_EL.innerHTML=ml.date.readable.getTime(1365253235489,displayTimeWithPeriod());//3pm\n          }\n          window.setTimeout(setTime, 1000);\n        });\n      }\n      setTime();\n    });\n\n    //input stuff [shortcuts, autofocus, ...]\n    (function () {\n      var STOPW_BUTTON = document.getElementById(\"stopwButton\");\n      var INPUTS_ALL = [].slice\n        .call(TIMER_FORM.getElementsByTagName(\"input\"))\n        .concat([].slice.call(ALARM_FORM.getElementsByTagName(\"input\")));\n      var DEFAULT_FOCUS = INPUTS_ALL[1];\n      //filter + keybindings\n      //{{{\n      feature_fcts.push(function () {\n        window.onkeydown = function (ev) {\n          ev = ev || window.event;\n          if (ml.controlKeyPressed(ev)) return;\n          var targetType = ml.getEventSource(ev).type;\n          if (targetType === \"text\" || targetType === \"url\") return;\n          var char_ = ml.getChar(ev);\n          if (char_ === \" \") ev.preventDefault();\n          if (char_ === \" \" || char_ === \"p\") PAUSE_ELEM.click();\n          // else if (char_ === \"esc\") unfullscreen();\n        };\n        function filter(ev) {\n          ev = ev || window.event;\n          if (ml.controlKeyPressed(ev)) return;\n          var charCode = ev.charCode || ev.which; //stupid opera storing charCode in which\n          //according to http://www.asciitable.com/ following should do\n          if (charCode >= 48 && charCode <= 57) {\n            //48<=key<=57 => 0-9\n            if (this.parentNode === ALARM_FORM && this.value.length >= 2)\n              this.value = \"\";\n            return;\n          }\n          if (charCode >= 32) ev.preventDefault();\n          //var char_=ml.getChar(ev);\n          //if(/^[a-z\\s]$/.test(char_)){ev.preventDefault();return false}\n          //return true;\n        }\n        function upDown(ev) {\n          ev = ev || window.event;\n          if (ml.controlKeyPressed(ev)) return;\n          var char_ = ml.getChar(ev);\n\n          var upChar = \"up\";\n          var downChar = \"down\";\n          var down = char_ === downChar || char_ === \"-\";\n          var up = char_ === upChar || char_ === \"+\";\n          if (down || up) {\n            //var do_=this.type!=='number';\n            var do_ = true; //decision to not use webkit's input control cos of selection\n            var oldVal = parseInt(this.value, 10);\n            if (!oldVal) oldVal = 0;\n            var newVal = oldVal + (up ? 1 : -1);\n            var min = this.getAttribute(\"min\");\n            var max = this.getAttribute(\"max\");\n            if (min && max) {\n              if (parseInt(max, 10) + 1 === newVal) {\n                do_ = true;\n                newVal = min;\n              }\n              if (parseInt(min, 10) - 1 === newVal) {\n                do_ = true;\n                newVal = max;\n              }\n            }\n            if (do_) {\n              ev.preventDefault();\n              if (min) newVal = Math.max(min, newVal);\n              if (max) newVal = Math.min(max, newVal);\n              this.value = newVal;\n              ml.safe_call(this[\"oninput\"]);\n            }\n            //var that=this;\n            //setTimeout(function()\n            //{\n            //  if(document.activeElement && document.activeElement===that)\n            //  {\n            //    that.selectionStart=0;\n            //    that.selectionEnd=end;\n            //  }\n            //},1000);\n            if (this.selectionStart !== undefined) {\n              try {\n                this.selectionStart = 0;\n                this.selectionEnd = this.value.length;\n              } catch (err) {\n                console.error(err);\n              }\n            }\n            if (do_) return false;\n          }\n        }\n        var KEYEVENT = ml.browser().usesGecko ? \"keypress\" : \"keydown\"; //key holded down => gecko repeats press event, webkit repeats down event\n        for (var i = 0; i < INPUTS_ALL.length; i++)\n          (function () {\n            if (INPUTS_ALL[i].tagName === \"INPUT\") {\n              //not for metro timepicker\n              INPUTS_ALL[i].addEventListener(\"keypress\", filter, false); //even for chrome, cos chrome is considering 1e10 a number\n              INPUTS_ALL[i].addEventListener(KEYEVENT, upDown, false);\n            }\n            var index = i;\n            function navigationKeybindings(ev) {\n              ev = ev || window.event;\n              if (ml.controlKeyPressed(ev)) return;\n              var char_ = ml.getChar(ev);\n\n              if (char_ === \"enter\" && this.tagName === \"SELECT\") {\n                ev.preventDefault();\n                var formEl = this;\n                while (formEl && formEl.tagName !== \"FORM\")\n                  formEl = formEl.parentElement;\n                ml.assert(formEl);\n                formEl.onsubmit();\n                return false;\n              }\n\n              // not working in webkit, see bugreport: https://bugs.webkit.org/show_bug.cgi?id=16735 , test case: https://bug-16735-attachments.webkit.org/attachment.cgi?id=18278\n              //if(char_==='h')\n              //{\n              //  ev.preventDefault();\n              //  var ev = document.createEvent('KeyboardEvent');\n              //  //ev.initKeyboardEvent('keydown',true,true,null,ev.ctrlKey,ev.altKey,ev.shiftKey,ev.metaKey,37,0);\n              //  //ev.initKeyEvent('keydown',true,true,null,ev.ctrlKey,ev.altKey,ev.shiftKey,ev.metaKey,37,0);\n              //  //ev.initKeyEvent('keydown',true,true,window,ev.ctrlKey,ev.altKey,ev.shiftKey,ev.metaKey,69,0);\n              //  ev.initKeyEvent('keypress',true,true,window,ev.ctrlKey,ev.altKey,ev.shiftKey,ev.metaKey,69,0);\n              //  this.dispatchEvent(ev);\n              //  return false;\n              //}\n\n              var left = char_ === \"left\";\n              var right = char_ === \"right\";\n              var end =\n                this.value === undefined ? undefined : this.value.length; //metro -> end===undefined\n              //for metro_ time picker -> this.selectionStart===undefined\n              //->!this.selectionStart === this.selectionStart===0 || this.selectionStart===undefined\n              if (\n                (left &&\n                  index >= 0 &&\n                  !this.selectionStart &&\n                  (!this.selectionEnd || this.selectionEnd === end)) ||\n                (right &&\n                  index <= INPUTS_ALL.length - 1 &&\n                  (this.selectionStart === end || !this.selectionStart) &&\n                  (this.selectionEnd === end ||\n                    this.selectionEnd === undefined))\n              ) {\n                ev.preventDefault();\n                if (!(left && index === 0)) {\n                  if (right && index === INPUTS_ALL.length - 1)\n                    STOPW_BUTTON.focus();\n                  else {\n                    var focusN = INPUTS_ALL[index + (left ? -1 : 1)];\n                    focusN.focus();\n                  }\n                }\n                return false;\n              }\n            }\n            INPUTS_ALL[i].addEventListener(\n              KEYEVENT,\n              navigationKeybindings,\n              false\n            );\n          })();\n        STOPW_BUTTON.addEventListener(\n          KEYEVENT,\n          function (\n            ev //{{{\n          ) {\n            ev = ev || window.event;\n            if (ml.controlKeyPressed(ev)) return;\n\n            var char_ = ml.getChar(ev);\n            if (char_ === \"left\") {\n              ev.preventDefault();\n              var focusN = INPUTS_ALL[INPUTS_ALL.length - 1];\n              focusN.focus();\n              return false;\n            }\n          },\n          false\n        );\n        //}}}\n        STOPW_BUTTON.onkeyup = function (ev) {\n          if (ml.getChar(ev) === \" \") ev.preventDefault();\n        }; //avoid [space -> submit in FF]\n      });\n      //}}}\n      //regain focus\n      feature_fcts.push(function () {\n        //return;\n        //var inputs = Array().slice.call(document.getElementsByTagName('input'));\n        //inputs.push(STOPW_BUTTON);\n        //if(lastFocus===STOPW_BUTTON || (lastFocus['type']!='url' && lastFocus['type']!='text'))\n        var ctrls = INPUTS_ALL.concat([STOPW_BUTTON]);\n        ml.assert(ctrls.length === 7);\n        var lastFocus = DEFAULT_FOCUS;\n        for (var i = 0; i < ctrls.length; i++)\n          ctrls[i].onfocus = function () {\n            lastFocus = this;\n          };\n        window.onclick = function () {\n          if (is_zoomed) return;\n          //no timeout -> [unfullscreen -> loss of focus]\n          setTimeout(regainFocus, 1);\n        };\n        on_zoom_end(regainFocus);\n        function regainFocus() {\n          if (\n            document.activeElement &&\n            document.activeElement.tagName !== \"INPUT\" &&\n            document.activeElement.tagName !== \"SELECT\" &&\n            document.activeElement !== STOPW_BUTTON\n          ) {\n            scroll_perserving_focus(lastFocus);\n          }\n        }\n      });\n      postInitListeners.push(function () {\n        scroll_perserving_focus(DEFAULT_FOCUS);\n      });\n    })();\n\n    //replace down/up click/touch => action with down click/touch => action\n    (function () {\n      [].slice\n        .call(document.querySelectorAll(\"button,#counter\"))\n        .forEach(function (b) {\n          //difficulty: avoid click event to be called twice\n          //-test by clicking on counter to see if fullscreen happens\n\n          //detail ~= number of times mouse has been clicked\n          //=> detail===0 ~= fired with click()\n          //stopImmediatePropagation ~= avoid other handler calls\n          b.addEventListener(\"click\", function (ev) {\n            if (ev.detail !== 0) {\n              ev.stopImmediatePropagation();\n              ev.preventDefault();\n              return false;\n            }\n          });\n          b.addEventListener(\"mousedown\", function () {\n            b.click();\n          });\n\n          //preventDefault() inside touch event handler ~> mouse-emulation doesn't occur\n          //-source: http://www.html5rocks.com/en/mobile/touchandmouse/\n          b.addEventListener(\"touchstart\", function (ev) {\n            ev.preventDefault();\n            b.click();\n          });\n        });\n    })();\n    /*\n    feature_fcts.push(function(){\n      if(ml.isTouchDevice()) new ml.FastClick(document.body);\n    });\n    //*/\n\n    //language related stuff, i18n\n    feature_fcts.push(function () {\n      ml.i18n.get(function (lang) {\n        if (lang && lang !== \"en\")\n          document.documentElement[\"classList\"][\"add\"](lang);\n\n        var languageText;\n        if (lang === \"de\")\n          languageText = {\n            address: \"Adresse von \",\n            youtube: \"YouTube Video\",\n            image: \"Bild\",\n          };\n        else if (lang === \"fr\")\n          languageText = {\n            address: \"adresse d'une \",\n            youtube: \"video YouTube\",\n            image: \"image\",\n          };\n        else\n          languageText = {\n            address: \"address of \",\n            youtube: \"YouTube video\",\n            image: \"image\",\n          };\n\n        [\n          [\"goto_url\", languageText.address + languageText.youtube],\n          [\"bg_url\", languageText.address + languageText.image],\n        ].forEach(function (d) {\n          var el = document.getElementById(d[0]);\n          if (el) el.setAttribute(\"placeholder\", d[1]);\n        });\n      });\n    });\n\n    //auto zoom\n    feature_fcts.push(function autoZoom() {\n      //ressources\n      //-zoom stuff\n      // -text-size-adjust\n      //  -http://css-infos.net/property/-webkit-text-size-adjust\n      //  -https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust\n      // -http://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers\n      //-sub-pixel rounding causing overflow\n      // -http://ejohn.org/blog/sub-pixel-problems-in-css/\n      // -http://stackoverflow.com/questions/tagged/subpixel+css\n      // -using `zoomCoeffizient = Math.floor(zoomCoeffizient*50)/50` not successfull\n\n      //__promo images:\n      //if(false)\n      //to make available to non packaged app, fix:\n      //-breaks manual browser zooming\n      //-breaks google plus share popup\n      if (!ml.isPackagedApp()) return;\n\n      document.documentElement.style.overflow = \"hidden\";\n\n      //onsole.log(document.documentElement);\n      //onsole.log(document.documentElement.scrollHeight);\n      //onsole.log(document.documentElement.clientHeight);\n      //onsole.log(ml.element.getStyle(document.documentElement,'height'));\n\n      //var zoomCoeffizient = Math.min(window.innerWidth  / (document.documentElement.scrollWidth+1),\n      //                               window.innerHeight / (document.documentElement.scrollHeight));\n      var zoomCoeffizient = Math.min(\n        window.innerWidth / (ALL_CONTENT_EL.scrollWidth + 1),\n        window.innerHeight / ALL_CONTENT_EL.scrollHeight\n      );\n      document.documentElement.style.zoom = zoomCoeffizient;\n\n      ml.addResizeTimeoutEvent(autoZoom, 100, function () {\n        document.documentElement.style.zoom = \"\";\n      });\n    });\n\n    //IE/Presto (manual 100% height + no icons)\n    feature_fcts.push(function () {\n      //see http://jsfiddle.net/5DgYm/3/\n      //opera with webkit <=> !window['opera'] -- source; \"The window.opera object will not exist in future versions of Opera.\"[http://my.opera.com/ODIN/blog/300-million-users-and-move-to-webkit]\n      if (!/MSIE/.test(navigator.userAgent) && !window[\"opera\"]) return;\n      document.documentElement[\"classList\"].add(\"noIcons\");\n      var a = [\n        document.getElementById(\"middletable\").firstChild,\n        document.getElementById(\"vertical\"),\n        document.getElementById(\"head\"),\n      ];\n      //this test is not going to work; if window.innerHeight is low both elements are actually going to have same height\n      //if(a[0].scrollHeight===a[0].parentElement.scrollHeight) return;\n      var orgHeight = a.map(function (el) {\n        ml.element.getStyle(el, \"height\");\n      });\n      var t;\n      function manual100PercHeight() {\n        window.clearTimeout(t);\n        t = setTimeout(function () {\n          a.forEach(function (el, i) {\n            el.style.height = orgHeight[i];\n          });\n          if (window.innerWidth >= 900) {\n            a.forEach(function (el) {\n              el.style.height = el.parentElement.scrollHeight + \"px\";\n            });\n          }\n        }, 300);\n      }\n      window.addEventListener(\"resize\", manual100PercHeight);\n      manual100PercHeight();\n    });\n\n    ml.safe_call(feature_fcts);\n    //}}}\n  })();\n\n  (function () {\n    var firstInit = true;\n    function initTimer(timer_) {\n      timer_.dom = {};\n      timer_.dom.counter = document.getElementById(\"counter\");\n      timer_.dom.inputs = [\n        [TIMER_FORM, ctObj.TYPES.TIMER],\n        [ALARM_FORM, ctObj.TYPES.ALARM],\n        [STOPW_FORM, ctObj.TYPES.STOPW],\n      ].map(function (d) {\n        return ctObj.input(d[0], d[1], timer_);\n      });\n      timer_.dom.youtube_wrapper = youtube_wrapper;\n      timer_.dom.pauseBtn = PAUSE_ELEM;\n      timer_.dom.alarmTime = ALARM_TIME;\n      // timer_.dom.name_input = document.getElementById('opt_name_input');\n      timer_.dom.name_el = document.getElementById(\"vertical\");\n      // timer_.getName = function(__type){return timer_.dom.name_input&&timer_.dom.name_input.value||window.getComputedStyle(timer_.dom.inputs.filter(function(formEl){return formEl.type===__type})[0].getElementsByTagName('button')[0],\":after\")['content'].replace(/'/g,'')};\n      timer_.onStateChange = function (action, newState, STATE_CODES, __type) {\n        document.body[\"classList\"][\n          newState === STATE_CODES.STOPED ? \"add\" : \"remove\"\n        ](\"stoped\");\n        document.body[\"classList\"][\n          newState === STATE_CODES.PAUSED ? \"add\" : \"remove\"\n        ](\"paused\");\n        document.body[\"classList\"][\n          newState === STATE_CODES.PLAYING ? \"add\" : \"remove\"\n        ](\"running\");\n        document.body[\"classList\"][\n          newState === STATE_CODES.RINGING ? \"add\" : \"remove\"\n        ](\"ringing\");\n        document.documentElement[\"classList\"][\n          __type === ctObj.TYPES.TIMER ? \"add\" : \"remove\"\n        ](\"timer\");\n        document.documentElement[\"classList\"][\n          __type === ctObj.TYPES.ALARM ? \"add\" : \"remove\"\n        ](\"alarm\");\n        document.documentElement[\"classList\"][\n          __type === ctObj.TYPES.STOPW ? \"add\" : \"remove\"\n        ](\"stopw\");\n      };\n\n      if (!ml.isExtension() || ml.isExtensionBackground())\n        timer_.makeTabTimer();\n      timer_.spark(ml.isExtension() && !ml.isExtensionBackground());\n      if (timer_.toStart !== undefined)\n        timer_.dom.inputs\n          .filter(function (formEl) {\n            return formEl.type === timer_.toStart;\n          })[0]\n          .onsubmit();\n      if (firstInit) {\n        // TODO: if PWA => don't ensure pause\n        timer_.ensurePause();\n        ml.safe_call(postInitListeners);\n        firstInit = false;\n      }\n    }\n\n    try {\n      (function () {\n        if (/doreset/.test(location.href.toLowerCase())) {\n          ml.asyncStore.clear();\n          wontwork();\n        }\n\n        ctObj.timers.init(function () {\n          var currentTimer;\n          (function () {\n            function getPersistedTimer(callback) {\n              //clean expired tab-to-search timers\n              var TTS_TAG = \"tab-to-search\";\n              ctObj.timers.all.forEach(function (t) {\n                if (t.data.getTags() === TTS_TAG && t.data.expired)\n                  t.data.removeData();\n              });\n\n              //onsole.log(ctObj.timers.all.length);\n              //onsole.log(Object.keys(JSON.parse(localStorage['showed']||\"{}\")).length);\n\n              //maintain timer\n              var retTimer;\n              if (currentTimer) {\n                currentTimer.kill();\n                retTimer = ctObj.timers.all.filter(function (t) {\n                  return t.data.id === currentTimer.data.id;\n                })[0];\n                //at this point retTimer is still undefined if currentTimer expired\n                if (retTimer) callback(retTimer);\n              }\n\n              //tab-to-search\n              if (!retTimer)\n                retTimer = (function () {\n                  var hashInput = (function (str) {\n                    if (str && /^\\d+$/.test(str))\n                      return [undefined, parseInt(str, 10)];\n                    var seperators = \"\\\\+|:|\\\\s|\\\\.|\\\\-\";\n                    if (\n                      str &&\n                      new RegExp(\"^\\\\d*(\" + seperators + \")\\\\d*$\").test(str)\n                    ) {\n                      var sp = str.split(new RegExp(seperators));\n                      var h = parseInt(sp[0], 10);\n                      var m = parseInt(sp[1], 10);\n                      if (h < 24 && h >= 0 && m < 60 && m >= 0) return [h, m];\n                    }\n                    return null;\n                  })(\n                    ml.getUrlVars()[\"timer\"] ||\n                      window[\"decodeURIComponent\"](\n                        location.hash.replace(\"#\", \"\")\n                      )\n                  );\n                  if (!hashInput) return false;\n\n                  var _type =\n                    hashInput[0] === undefined\n                      ? ctObj.TYPES.TIMER\n                      : ctObj.TYPES.ALARM;\n                  var _preset = { hours: hashInput[0], minutes: hashInput[1] };\n\n                  //var ret = ctObj.timers.all.filter(function(t){return t.data.getTags()===TTS_TAG})[0];\n                  //if(ret){\n                  //  ret.data.setType(_type);\n                  //  ret.data.setPreset(_preset);\n                  //  callback(ret);\n                  //}\n                  ctObj.timers.create(_type, function () {\n                    ret = ctObj.timers.all[ctObj.timers.all.length - 1];\n                    ml.assert(ret);\n                    ret.data.setPreset(_preset);\n                    ret.data.setTags(TTS_TAG);\n                    ret.toStart = _type;\n                    callback(ret);\n                  });\n                  return true;\n                })();\n              if (retTimer) return;\n\n              if (!retTimer)\n                ml.asyncStore.get(\"showed\", function (val) {\n                  for (var i = 0; i < ctObj.timers.all.length; i++)\n                    if (\n                      !(\n                        JSON.parse(val || \"{}\")[ctObj.timers.all[i].data.id] >\n                        +new Date() - 2000\n                      )\n                    ) {\n                      retTimer = ctObj.timers.all[i];\n                      break;\n                    }\n                  if (retTimer) callback(retTimer);\n                  else {\n                    ctObj.timers.create(ctObj.TYPES.STOPW, function () {\n                      retTimer = ctObj.timers.all[ctObj.timers.all.length - 1];\n                      ml.assert(retTimer);\n                      callback(retTimer);\n                    });\n                  }\n                });\n            }\n            function retrieveNinitTimer() {\n              getPersistedTimer(function (t) {\n                currentTimer = t;\n                setTimeout(function () {\n                  //timeout so that currentTimer is set as showed before initTimer is called\n                  initTimer(currentTimer);\n                }, 0);\n              });\n            }\n            ctObj.timers.setChangeListener(retrieveNinitTimer);\n            retrieveNinitTimer();\n          })();\n\n          //timer reservation\n          (function () {\n            if (ml.isExtension() || ml.isPackagedApp()) return; //singelton timer\n\n            function setShowed(id, newVal) {\n              ml.asyncStore.get(\"showed\", function (val) {\n                var showed = JSON.parse(val || \"{}\");\n                if (newVal) showed[id] = newVal;\n                else delete showed[id];\n                ml.asyncStore.set(\"showed\", JSON.stringify(showed));\n              });\n            }\n\n            (function loop() {\n              if (currentTimer) setShowed(currentTimer.data.id, +new Date());\n              setTimeout(loop, 1000);\n            })();\n\n            ctObj.timers.all.forEach(function (t) {\n              if (t.data.expired) setShowed(t.data.id);\n            });\n\n            (function () {\n              //normaly not needed, but just to be sure\n              var idS = ctObj.timers.all.map(function (t) {\n                return t.data.id;\n              });\n              ml.asyncStore.get(\"showed\", function (val) {\n                var showed = JSON.parse(val || \"{}\");\n                var changes = false;\n                for (var id in showed)\n                  if (idS.indexOf(parseInt(id, 10)) < 0) {\n                    delete showed[id];\n                    changes = true;\n                  }\n                if (changes)\n                  ml.asyncStore.set(\"showed\", JSON.stringify(showed));\n              });\n            })();\n\n            ml.addCloseEvent(function () {\n              if (currentTimer) setShowed(currentTimer.data.id);\n            });\n          })();\n        }); //end init\n      })();\n    } catch (e) {\n      var _timer = new ctObj.Timer_dom(\n        { start: +new Date() },\n        ctObj.TYPES.STOPW\n      );\n      initTimer(_timer);\n      _timer.dom.inputs[0].getElementsByTagName(\"input\")[1].value = \"10\";\n      _timer.dom.inputs[1].getElementsByTagName(\n        \"input\"\n      )[0].value = ml.date.readablize(\n        ml.date.add(new Date(), 0, 10, 0).getHours()\n      );\n      _timer.dom.inputs[1].getElementsByTagName(\n        \"input\"\n      )[1].value = ml.date.readablize(\n        ml.date.add(new Date(), 0, 10, 0).getMinutes()\n      );\n    }\n  })();\n}\n\nfunction scroll_perserving_focus(el) {\n  el.focus({ preventScroll: true });\n  /*\n  const scrollPos = getScroll();\n  el.focus();\n  setScroll(scrollPos);\n  */\n}\n","import assert from \"@brillout/assert\";\n\nexport default load_font;\n\nasync function load_font(font_name) {\n  assert(font_name, { font_name });\n\n  const WebFont = require(\"webfontloader\");\n\n  let resolve;\n  const promise = new Promise((r) => (resolve = r));\n\n  attempts = 0;\n  do_it();\n\n  await promise;\n\n  return;\n\n  var attempts;\n  function do_it() {\n    assert(font_name, { font_name });\n    WebFont.load({\n      ...get_font_spec(font_name),\n      fontactive: resolve,\n      fontinactive: () => {\n        attempts++;\n        const min = Math.pow(2, attempts);\n        const max = 60;\n        const seconds = Math.max(min, max);\n        const timeout = seconds * 1000;\n        setTimeout(do_it, timeout);\n      },\n    });\n  }\n}\n\nfunction get_font_spec(font_name) {\n  const HOSTED = [\"AirbnbCereal\", \"LCD\"];\n  if (HOSTED.includes(font_name)) {\n    return {\n      custom: {\n        families: [font_name],\n        urls: [\"/fonts/\" + font_name + \"/\" + font_name + \".css\"],\n      },\n    };\n  } else {\n    return {\n      google: {\n        families: [font_name],\n      },\n    };\n  }\n}\n","export { load_asap };\n\nlet head;\n\nfunction load_asap(url, onsuccess) {\n  head = head || document.getElementsByTagName(\"head\")[0];\n\n  var attempts = 0;\n  function do_() {\n    //using same script el => onerror doesn't get called again in chrome\n    var script = document.createElement(\"script\");\n    script.src = url;\n    //script.type= 'text/javascript';\n    script.onerror = function () {\n      head.removeChild(script);\n      setTimeout(do_, Math.min(Math.pow(2, attempts) * 1000, 60000));\n    };\n    //proxy redirects url -> false onsuccess\n    //-no way found to catch this\n    if (onsuccess) script.onload = onsuccess;\n    attempts++;\n    head.appendChild(script);\n  }\n  do_();\n}\n","import { load_asap } from \"./load_asap\";\n\nexport default load_font_list;\n\nlet promise;\n\nfunction load_font_list() {\n  if (promise) {\n    return promise;\n  }\n\n  let resolve_promise;\n  promise = new Promise((r) => (resolve_promise = r));\n\n  window[\"onfontsload\"] = function (resp) {\n    if (resp.error) {\n      console.error(resp.error.message);\n      resolve_promise([]);\n      return;\n    }\n\n    let font_list = resp[\"items\"].map((f) => f.family).sort();\n\n    /*\n    if(ml.browser().usesGecko) {\n      // Firefox crashes when selecting a from too many options\n      const MAX = 300;\n      font_list = font_list.slice(0, MAX);\n    }\n    */\n\n    resolve_promise(font_list);\n  };\n\n  load_asap(\n    \"https://www.googleapis.com/webfonts/v1/webfonts?callback=onfontsload&sort=popularity&key=AIzaSyAOMrdvfJJPa1btlQNCkXT9gcA-lCADPeE\"\n  );\n\n  return promise;\n}\n","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport assert from \"@brillout/assert\";\nimport \"./set_background.css\";\nexport { set_background }; //tricky bg images to test:\n//-http://static.panoramio.com/photos/original/3719338.jpg\n//-cover test: http://cdn.techpp.com/wp-content/uploads/2008/10/gmail_logo.jpg\n//black floor: http://img.wallpaperstock.net:81/black-floor-wallpapers_6854_1680x1050.jpg\n//http://lh6.googleusercontent.com/-AAQe-KJXX-w/TcRrpukjk6I/AAAAAAAACwE/-7gmjOI-ctQ/IMG_2649mod.jpg\n//http://www.a-better-tomorrow.com/blog/wp-content/wallpaper_abt1.jpg\n//http://www.gowallpaper.net/wp-content/uploads/2011/04/Windows-7-3d-wide-wallpaper-1280x800.jpg\n//http://vistawallpapers.files.wordpress.com/2007/03/vista-wallpapers-69.jpg\n//to test: resize image to screen.width and screen.height using canvas and webworkers\n//window.screen.width;\n//window.screen.height;\n\nfunction set_background(_x, _x2, _x3) {\n  return _set_background.apply(this, arguments);\n}\n\nfunction _set_background() {\n  _set_background = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(color_code, image_uri, bg_container_selector) {\n    var is_outdated, bg_img_val;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            is_outdated = get_is_outdated();\n            init(bg_container_selector);\n            _context.next = 4;\n            return load_image(image_uri, is_outdated);\n\n          case 4:\n            bg_img_val = _context.sent;\n\n            if (!is_outdated()) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 7:\n            apply(color_code, bg_img_val, false);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _set_background.apply(this, arguments);\n}\n\nfunction apply(color_code, bg_img_val, show_loader) {\n  apply_color(color_code);\n  apply_image(bg_img_val);\n  BG_EL.classList[show_loader ? \"add\" : \"remove\"](\"show-load-indicator\");\n}\n\nfunction load_image(_x4, _x5) {\n  return _load_image.apply(this, arguments);\n}\n\nfunction _load_image() {\n  _load_image = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(image_uri, is_outdated) {\n    var is_data_uri, bg_img_val, imgEl, resolve, promise, loaded, on_load, on_error, set_loader_indicator;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            set_loader_indicator = function _ref3() {\n              window.setTimeout(function () {\n                if (is_outdated()) {\n                  return;\n                }\n\n                if (loaded) {\n                  return;\n                }\n\n                apply(null, null, true);\n              }, 50);\n            };\n\n            on_error = function _ref2() {\n              if (!is_outdated()) {\n                alert(\"Image \" + image_uri + \" could not be loaded. Is the image online? Do you have an internet connection? Does the URL point to an image? (Note that the URL should point to the image itself and not to a page containing the image.)\");\n              }\n            };\n\n            on_load = function _ref() {\n              var w = imgEl.width;\n              var h = imgEl.height;\n\n              if (w * h > 8000000) {\n                if (!is_outdated()) {\n                  alert(\"The provided image has a size of \" + w + \"*\" + h + \" pixels. Large images are likely to slow down your machine. Thus only images of up to 8 000 000 pixels are allowed. (For example, any image bellow 5000*1600 is fine.)\");\n                }\n\n                return null;\n              } else {\n                return 'url(\"' + image_uri + '\")';\n              }\n            };\n\n            if (image_uri) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", null);\n\n          case 5:\n            is_data_uri = /^data:image/.test(image_uri);\n\n            if (!is_data_uri) {\n              _context2.next = 9;\n              break;\n            }\n\n            bg_img_val = image_uri + \"\";\n            return _context2.abrupt(\"return\", bg_img_val);\n\n          case 9:\n            imgEl = document.createElement(\"img\");\n            promise = new Promise(function (r) {\n              resolve = r;\n            });\n            loaded = false;\n\n            imgEl.onload = function () {\n              loaded = true;\n              var image_val = on_load();\n              resolve(image_val);\n            };\n\n            imgEl.onerror = function () {\n              loaded = true;\n              on_error();\n              resolve(null);\n            };\n\n            set_loader_indicator();\n            imgEl.src = image_uri;\n            return _context2.abrupt(\"return\", promise);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _load_image.apply(this, arguments);\n}\n\nfunction apply_color(color_code) {\n  color_code = color_code || \"transparent\";\n\n  if (BG_EL.style.backgroundColor !== color_code) {\n    BG_EL.style.backgroundColor = color_code;\n  }\n}\n\nfunction apply_image(bg_img_val) {\n  bg_img_val = bg_img_val || \"none\";\n\n  if (BG_EL.style.backgroundImage !== bg_img_val) {\n    BG_EL.style.backgroundImage = bg_img_val;\n  }\n}\n\nvar BG_EL;\nvar bg_container_;\nvar bg_container_selector_;\n\nfunction init(bg_container_selector) {\n  assert(bg_container_selector, {\n    bg_container_selector: bg_container_selector\n  });\n  assert(bg_container_selector_ === undefined || bg_container_selector === bg_container_selector_, {\n    bg_container_selector: bg_container_selector,\n    bg_container_selector_: bg_container_selector_\n  });\n  bg_container_selector_ = bg_container_selector;\n  var bg_container = document.querySelector(bg_container_selector);\n  assert(bg_container, {\n    bg_container_selector: bg_container_selector\n  });\n  assert(bg_container_ === undefined || bg_container_ === bg_container, {\n    bg_container: bg_container,\n    bg_container_: bg_container_\n  });\n\n  if (BG_EL) {\n    return;\n  }\n\n  var el1 = document.createElement(\"div\");\n  el1.id = \"background-area-wrapper\";\n  var el2 = document.createElement(\"div\");\n  el2.id = \"background-area\";\n  el2.style.backgroundSize = \"cover\";\n  el1.prepend(el2);\n  bg_container.prepend(el1);\n  BG_EL = el2;\n}\n\nvar call_number = 0;\n\nfunction get_is_outdated() {\n  ++call_number;\n  var current = call_number;\n\n  var is_outdated = function is_outdated() {\n    return current !== call_number;\n  };\n\n  return is_outdated;\n}","export default remove_hash;\n\nfunction remove_hash() {\n  // `window.location.hash = '';` doesn't remove leading `#` sign.\n  // See https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-url-with-javascript-without-page-r\n  window.history.pushState(\n    \"\",\n    document.title,\n    window.location.pathname + window.location.search\n  );\n}\n","import remove_hash from \"./private/remove_hash\";\n\nexport default auto_remove_hash;\n\nexport { remove_hash };\n\nfunction auto_remove_hash({ IGNORE_LIST, INCLUDE_LIST } = {}) {\n  check();\n  [100, 300, 600, 900].forEach((timeout) => setTimeout(check, timeout));\n  window.addEventListener(\"hashchange\", check, {\n    passive: true,\n    capture: false,\n  });\n\n  function check() {\n    const { hash } = window.location;\n\n    if (isEmptyHash()) {\n      remove_hash();\n      return;\n    }\n\n    if (!IGNORE_LIST && !INCLUDE_LIST) {\n      return;\n    }\n    if (IGNORE_LIST && IGNORE_LIST.includes(hash)) {\n      return;\n    }\n    if (INCLUDE_LIST && !INCLUDE_LIST.includes(hash)) {\n      return;\n    }\n\n    remove_hash();\n  }\n}\n\nfunction isEmptyHash() {\n  // In Chrome `location.hash===''` when URL is `localhost:3000/#`\n  if (window.location.hash === \"#\") {\n    return true;\n  }\n  // Because the above doesn't seem to be reliable\n  if (window.location.href.endsWith(\"#\")) {\n    return true;\n  }\n  return false;\n}\n","\"use strict\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nimport assert from \"@brillout/assert\";\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport { store } from \"../store\";\nimport { escape_html } from \"../utils/escape_html\";\nexport { TextInput, BooleanInput, SelectInput, ColorInput, DateInput, Button, PersistantInput };\n\nvar PersistantInput = /*#__PURE__*/function () {\n  function PersistantInput(props) {\n    _classCallCheck(this, PersistantInput);\n\n    this._props = void 0;\n    this._input_id = void 0;\n    Object.defineProperty(this, _on_input_change, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _input_default, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _storage_key, {\n      writable: true,\n      value: void 0\n    });\n    this.input_tag = void 0;\n    this.input_type = void 0;\n    this._dom_el = void 0;\n    this._input_el = void 0;\n    this._props = props;\n    var input_id = props.input_id,\n        on_input_change = props.on_input_change,\n        input_default = props.input_default;\n    assert(input_id && on_input_change);\n    this._input_id = input_id;\n    _classPrivateFieldLooseBase(this, _on_input_change)[_on_input_change] = on_input_change;\n    _classPrivateFieldLooseBase(this, _input_default)[_input_default] = input_default;\n    _classPrivateFieldLooseBase(this, _storage_key)[_storage_key] = input_id;\n  } // Public functions\n\n\n  _createClass(PersistantInput, [{\n    key: \"input_get\",\n    value: function input_get() {\n      return this._input_retriever();\n    }\n  }, {\n    key: \"has_stored_value\",\n    value: function has_stored_value() {\n      return store.has_val(_classPrivateFieldLooseBase(this, _storage_key)[_storage_key]);\n    }\n  }, {\n    key: \"get_stored_value\",\n    value: function get_stored_value() {\n      return store.get_val(_classPrivateFieldLooseBase(this, _storage_key)[_storage_key]);\n    }\n  }, {\n    key: \"set_stored_value\",\n    value: function set_stored_value(val) {\n      store.set_val(_classPrivateFieldLooseBase(this, _storage_key)[_storage_key], val);\n    }\n  }, {\n    key: \"input_set\",\n    value: function input_set(val) {\n      this.set_stored_value(val);\n\n      this._input_modifier(val);\n\n      _classPrivateFieldLooseBase(this, _on_input_change)[_on_input_change]();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      var input_tag = this.input_tag,\n          input_type = this.input_type;\n      assert(input_tag);\n      assert(input_type || input_tag !== \"input\");\n\n      var _generate_input = generate_input(_objectSpread({\n        input_tag: input_tag,\n        input_type: input_type\n      }, this._props)),\n          dom_el = _generate_input.dom_el,\n          input_el = _generate_input.input_el;\n\n      this._dom_el = dom_el;\n      this._input_el = input_el;\n\n      if (this._init_dom) {\n        this._init_dom();\n      }\n\n      var init_val = this.has_stored_value() ? this.get_stored_value() : _classPrivateFieldLooseBase(this, _input_default)[_input_default];\n\n      if (init_val !== undefined) {\n        this._input_modifier(init_val);\n      }\n\n      this._input_el.addEventListener(this._change_event, function () {\n        var val = _this._input_retriever();\n\n        _this.set_stored_value(val);\n\n        _classPrivateFieldLooseBase(_this, _on_input_change)[_on_input_change]();\n      }, false);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      hide_show_el(this._dom_el, true);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      hide_show_el(this._dom_el);\n    } // To be overriden\n\n  }, {\n    key: \"_input_retriever\",\n    value: function _input_retriever() {\n      return this._input_el.value;\n    }\n  }, {\n    key: \"_input_modifier\",\n    value: function _input_modifier(val) {\n      this._input_el.value = val;\n    }\n  }, {\n    key: \"_change_event\",\n    get: function get() {\n      return \"change\";\n    }\n  }]);\n\n  return PersistantInput;\n}();\n\nvar _on_input_change = _classPrivateFieldLooseKey(\"on_input_change\");\n\nvar _input_default = _classPrivateFieldLooseKey(\"input_default\");\n\nvar _storage_key = _classPrivateFieldLooseKey(\"storage_key\");\n\nvar BooleanInput = /*#__PURE__*/function (_PersistantInput) {\n  _inherits(BooleanInput, _PersistantInput);\n\n  function BooleanInput(args) {\n    var _this2;\n\n    _classCallCheck(this, BooleanInput);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(BooleanInput).call(this, args));\n    _this2.input_tag = void 0;\n    _this2.input_type = void 0;\n    _this2.input_tag = \"input\";\n    _this2.input_type = \"checkbox\";\n    return _this2;\n  }\n\n  _createClass(BooleanInput, [{\n    key: \"_input_retriever\",\n    value: function _input_retriever() {\n      return !!this._input_el.checked;\n    }\n  }, {\n    key: \"_input_modifier\",\n    value: function _input_modifier(val) {\n      if (!!val) {\n        this._input_el.setAttribute(\"checked\", \"true\");\n      } else {\n        this._input_el.removeAttribute(\"checked\");\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(BooleanInput.prototype), \"init\", this).call(this);\n\n      this._dom_el[\"classList\"][\"add\"](\"pointer-cursor\");\n    }\n  }]);\n\n  return BooleanInput;\n}(PersistantInput);\n\nvar TextInput = /*#__PURE__*/function (_PersistantInput2) {\n  _inherits(TextInput, _PersistantInput2);\n\n  function TextInput(args) {\n    var _this3;\n\n    _classCallCheck(this, TextInput);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(TextInput).call(this, args));\n    _this3.input_tag = void 0;\n    _this3.input_type = void 0;\n    _this3.input_tag = \"input\";\n    _this3.input_type = \"text\";\n    return _this3;\n  }\n\n  _createClass(TextInput, [{\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(TextInput.prototype), \"init\", this).call(this);\n\n      var input_placeholder = this._props.input_placeholder;\n\n      if (input_placeholder) {\n        this._input_el.placeholder = input_placeholder;\n      }\n    }\n  }, {\n    key: \"_change_event\",\n    get: function get() {\n      // `input` event seem to only be reliably fired for text inputs\n      //  - https://caniuse.com/#feat=input-event\n      return \"input\";\n    }\n  }]);\n\n  return TextInput;\n}(PersistantInput);\n\nvar SelectInput = /*#__PURE__*/function (_PersistantInput3) {\n  _inherits(SelectInput, _PersistantInput3);\n\n  _createClass(SelectInput, [{\n    key: \"refresh\",\n    value: function refresh() {\n      this._init_dom();\n    }\n  }], [{\n    key: \"get_divider\",\n    value: function get_divider(text) {\n      var divider_text;\n\n      if (text) {\n        divider_text = \"─── \" + text + \" ───\";\n      } else {\n        divider_text = \"───────────────\";\n      }\n\n      var divider_html = \"<option disabled>\" + divider_text + \"</option>\";\n      return {\n        divider_html: divider_html\n      };\n    }\n  }]);\n\n  function SelectInput(_ref) {\n    var _this4;\n\n    var input_options = _ref.input_options,\n        args = _objectWithoutProperties(_ref, [\"input_options\"]);\n\n    _classCallCheck(this, SelectInput);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(SelectInput).call(this, args));\n    _this4.input_tag = void 0;\n    _this4.input_options = void 0;\n    _this4.input_tag = \"select\";\n    _this4.input_options = input_options;\n    return _this4;\n  }\n\n  _createClass(SelectInput, [{\n    key: \"_init_dom\",\n    value: function _init_dom() {\n      var _this5 = this;\n\n      assert(this.input_options.length > 0, this._input_id);\n      var innerHTML = \"\";\n      this.input_options.forEach(function (option_arg) {\n        innerHTML += _this5._generate_option_html(option_arg);\n      });\n      this._input_el.innerHTML = innerHTML;\n    }\n  }, {\n    key: \"add_options\",\n    value: function add_options(new_options) {\n      var _this6 = this;\n\n      var current_value = this._input_retriever();\n\n      var current_option_values = Array.from(this._input_el.querySelector(\"option\")).map(function (el) {\n        return el.value;\n      });\n      var innerHTML = this._input_el.innerHTML;\n      new_options.forEach(function (option_arg) {\n        var _this6$_parse_option_ = _this6._parse_option_arg(option_arg),\n            val = _this6$_parse_option_.val;\n\n        if (val && current_option_values.includes(val)) {\n          return;\n        }\n\n        innerHTML += _this6._generate_option_html(option_arg);\n      });\n      this._input_el.innerHTML = innerHTML;\n\n      this._input_modifier(current_value);\n    }\n  }, {\n    key: \"_input_modifier\",\n    value: function _input_modifier(val) {\n      assert(val, \"empty select\", val === \"\", this._input_el.id, {\n        val: val\n      });\n\n      if (!this._input_el.querySelector('option[value=\"' + val + '\"]')) {\n        this._input_el.innerHTML = this._generate_option_html(val) + SelectInput.get_divider().divider_html + this._input_el.innerHTML;\n      }\n\n      _get(_getPrototypeOf(SelectInput.prototype), \"_input_modifier\", this).call(this, val);\n    }\n  }, {\n    key: \"_generate_option_html\",\n    value: function _generate_option_html(option_arg) {\n      var _this$_parse_option_a = this._parse_option_arg(option_arg),\n          val = _this$_parse_option_a.val,\n          val_pretty = _this$_parse_option_a.val_pretty,\n          divider_html = _this$_parse_option_a.divider_html;\n\n      if (divider_html) {\n        return divider_html;\n      }\n\n      return '<option label=\"' + val_pretty + '\" value=\"' + val + '\">' + escape_html(val_pretty) + \"</option>\";\n    }\n  }, {\n    key: \"_parse_option_arg\",\n    value: function _parse_option_arg(option_arg) {\n      assert(option_arg, this._input_id, {\n        option_arg: option_arg\n      });\n      var divider_html = option_arg.divider_html;\n\n      if (divider_html) {\n        return {\n          divider_html: divider_html\n        };\n      }\n\n      var val = option_arg.val || option_arg;\n      assert(val && val.constructor === String, option_arg);\n      var val_pretty = option_arg.val_pretty || val;\n      assert(val_pretty.constructor === String, val_pretty);\n      return {\n        val: val,\n        val_pretty: val_pretty\n      };\n    }\n  }]);\n\n  return SelectInput;\n}(PersistantInput);\n\nvar DateInput = /*#__PURE__*/function (_PersistantInput4) {\n  _inherits(DateInput, _PersistantInput4);\n\n  function DateInput() {\n    var _getPrototypeOf2;\n\n    var _this7;\n\n    _classCallCheck(this, DateInput);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this7 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DateInput)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this7.input_tag = \"input\";\n    _this7.input_type = \"datetime\";\n    return _this7;\n  }\n\n  _createClass(DateInput, [{\n    key: \"_init_dom\",\n\n    /*\n    constructor(args) {\n      super(args);\n      this.input_tag = 'input';\n      this.input_type = 'datetime';\n    }\n    */\n    value: function _init_dom() {\n      flatpickr(this._input_el, {\n        enableTime: true\n        /*\n        dateFormat: \"Y-m-d H:i\",\n        altInput: true,\n        altFormat: \"F j, Y\",\n        dateFormat: \"Y-m-d\",\n        */\n\n      });\n    }\n  }]);\n\n  return DateInput;\n}(PersistantInput);\n\nvar ColorInput = /*#__PURE__*/function (_PersistantInput5) {\n  _inherits(ColorInput, _PersistantInput5);\n\n  function ColorInput(args) {\n    var _this8;\n\n    _classCallCheck(this, ColorInput);\n\n    _this8 = _possibleConstructorReturn(this, _getPrototypeOf(ColorInput).call(this, args));\n    _this8.input_tag = void 0;\n    _this8.input_type = void 0;\n    _this8.input_tag = \"input\";\n    _this8.input_type = \"color\";\n    return _this8;\n  }\n\n  _createClass(ColorInput, [{\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(ColorInput.prototype), \"init\", this).call(this);\n\n      this._dom_el[\"classList\"][\"add\"](\"pointer-cursor\");\n    }\n  }]);\n\n  return ColorInput;\n}(PersistantInput);\n\nvar Button = /*#__PURE__*/function () {\n  function Button(_ref2) {\n    var on_click = _ref2.on_click,\n        text = _ref2.text,\n        input_container = _ref2.input_container,\n        _ref2$className = _ref2.className,\n        className = _ref2$className === void 0 ? null : _ref2$className,\n        id = _ref2.id;\n\n    _classCallCheck(this, Button);\n\n    this.on_click = void 0;\n    this.text = void 0;\n    this.input_container = void 0;\n    this.className = void 0;\n    this.id = void 0;\n    this.dom_el = void 0;\n    this.on_click = on_click;\n    this.text = text;\n    this.input_container = input_container;\n    this.className = className;\n    this.id = id;\n  }\n\n  _createClass(Button, [{\n    key: \"generate_dom\",\n    value: function generate_dom() {\n      var _this9 = this;\n\n      var dom_el = document.createElement(\"button\");\n\n      if (this.className) {\n        dom_el.setAttribute(\"class\", this.className);\n      }\n\n      dom_el.setAttribute(\"type\", \"button\");\n      dom_el.setAttribute(\"id\", this.id);\n\n      dom_el.onclick = function (ev) {\n        ev.preventDefault();\n\n        _this9.on_click();\n      };\n\n      dom_el.textContent = this.text;\n      this.input_container.appendChild(dom_el);\n      this.dom_el = dom_el;\n    } // to-do: as mixin\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      hide_show_el(this.dom_el, true);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      hide_show_el(this.dom_el);\n    }\n  }]);\n\n  return Button;\n}();\n/*\nconst global_debouncer.debounce = new GlobalDebouncer();\n\nclass GlobalDebouncer {\n  constructor() {\n    this._lastTimeout;\n    requestAnimationFrame\n    cancelAnimationFrame\n  }\n\n  debounce(fn) {\n    return () => {\n\n      fn();\n    };\n  }\n}\n*/\n\n\nfunction generate_input(_ref3) {\n  var input_tag = _ref3.input_tag,\n      input_type = _ref3.input_type,\n      input_id = _ref3.input_id,\n      input_description = _ref3.input_description,\n      input_width = _ref3.input_width,\n      input_container = _ref3.input_container;\n  assert(input_tag);\n  assert(input_type || input_tag !== \"input\");\n  assert(input_id);\n  assert(input_container, {\n    input_id: input_id\n  });\n  var dom_el = document.createElement(\"label\");\n  assert([\"select\", \"input\"].includes(input_tag));\n  var input_el = document.createElement(input_tag);\n  input_el.id = input_id;\n  if (input_type) input_el.setAttribute(\"type\", input_type);\n  var description_el;\n\n  if (input_description) {\n    description_el = document.createElement(\"span\");\n    description_el.textContent = input_description; //+'&nbsp;';\n  }\n\n  if (input_type === \"checkbox\") {\n    dom_el.appendChild(input_el);\n\n    if (description_el) {\n      dom_el.appendChild(description_el);\n    }\n  } else {\n    if (description_el) {\n      dom_el.appendChild(description_el);\n    }\n\n    dom_el.appendChild(input_el);\n  }\n\n  if (input_width) {\n    input_el.style.width = input_width;\n  }\n\n  input_container.appendChild(dom_el);\n  return {\n    dom_el: dom_el,\n    input_el: input_el\n  };\n}\n\nfunction hide_show_el(el) {\n  var to_hide = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (to_hide) {\n    el.setAttribute(\"disabled\", \"true\");\n  } else {\n    el.removeAttribute(\"disabled\");\n  }\n\n  el.style.width = to_hide ? \"0px\" : \"\";\n  el.style.height = to_hide ? \"0px\" : \"\";\n  el.style.visibility = to_hide ? \"hidden\" : \"visible\";\n  el.style.position = to_hide ? \"absolute\" : \"\";\n  el.style.zIndex = to_hide ? \"-1\" : \"\";\n}","\"use strict\";\n\nexport { escape_html };\n\nfunction escape_html(str) {\n  return str.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\n}","export { rename_keys_and_values };\n\nfunction rename_keys_and_values({ key_replacements, value_replacements }) {\n  const db = {};\n\n  let has_changes = false;\n\n  Object.entries(localStorage).forEach(([key, val]) => {\n    if (key_replacements && key in key_replacements) {\n      key = key_replacements[key];\n      has_changes = true;\n    }\n\n    if (\n      value_replacements &&\n      key in value_replacements &&\n      val in value_replacements[key]\n    ) {\n      val = value_replacements[key][val];\n      has_changes = true;\n    }\n\n    db[key] = val;\n  });\n\n  if (!has_changes) {\n    return;\n  }\n\n  if (has_changes) {\n    localStorage.clear();\n\n    Object.keys(db).forEach((key) => {\n      localStorage[key] = db[key];\n    });\n  }\n\n  return has_changes;\n}\n","import assert from \"@brillout/assert\";\nimport { rename_keys_and_values } from \"./rename_keys_and_values\";\n\nmigrate_ancient_schema.schema_version = new Date(\"2020-03-01\");\n\nexport { migrate_ancient_schema };\n\nfunction migrate_ancient_schema() {\n  rename_keys_and_values({\n    key_replacements: {\n      theme: \"clock_theme\",\n      bg_image: \"clock_background_image\",\n      bg_color: \"clock_background_color\",\n      font_shadow: \"clock_shadow\",\n      color_font: \"clock_color\",\n      font_size: \"clock_size\",\n      [\"12_hour\"]: \"clock_twelve_hour_format\",\n      show_pm: \"clock_display_period\",\n      show_seconds: \"clock_display_seconds\",\n      show_date: \"clock_display_date\",\n      show_week: \"clock_display_week\",\n      show_seconds_title: \"clock_tab_display_seconds\",\n      color_icon: \"clock_tab_icon_color\",\n    },\n    value_replacements: {\n      clock_theme: {\n        \"\": \"_creator\",\n        random: \"_random\",\n      },\n    },\n  });\n}\n","export { migrate_user_presets };\n\nfunction migrate_user_presets(migrator) {\n  [\"countdown_presets\", \"clock_presets\"].forEach((presets__storage_key) => {\n    const presets__string = localStorage[presets__storage_key];\n    if (!presets__string) {\n      return;\n    }\n    const presets = JSON.parse(presets__string);\n    let has_changes = false;\n    presets.forEach((preset) => {\n      if (migrator(preset)) {\n        has_changes = true;\n      }\n    });\n    if (has_changes) {\n      const presets__string__updated = JSON.stringify(presets);\n      localStorage[presets__storage_key] = presets__string__updated;\n    }\n  });\n}\n","import assert from \"@brillout/assert\";\nimport { migrate_user_presets } from \"./migrate_user_presets\";\n\nmigrate_user_preset_ids_and_values.schema_version = new Date(\"2020-03-02\");\n\nexport { migrate_user_preset_ids_and_values };\n\nfunction migrate_user_preset_ids_and_values() {\n  migrate_user_presets((preset) => {\n    assert(preset.preset_name || preset.preset_id);\n    if (preset.preset_name) {\n      preset.preset_id = preset.preset_name;\n      delete preset.preset_name;\n      return true;\n    }\n    assert(preset.preset_options || preset.preset_values);\n    if (preset.preset_options) {\n      preset.preset_values = preset.preset_options;\n      delete preset.preset_options;\n      return true;\n    }\n  });\n}\n","import assert from \"@brillout/assert\";\nimport { migrate_user_presets } from \"./migrate_user_presets\";\n\nmigrate_subapp_id.schema_version = new Date(\"2020-03-03\");\n\nexport { migrate_subapp_id };\n\nfunction migrate_subapp_id() {\n  migrate_user_presets((preset) => {\n    assert(preset.app_name || preset.subapp_id);\n    if (preset.app_name) {\n      preset.subapp_id = preset.app_name;\n      delete preset.app_name;\n      return true;\n    }\n  });\n}\n","import assert from \"@brillout/assert\";\nimport { rename_keys_and_values } from \"./rename_keys_and_values\";\n\nmigrate_old_timer_tab_schema.schema_version = new Date(\"2020-03-04\");\n\nexport { migrate_old_timer_tab_schema };\n\nfunction migrate_old_timer_tab_schema() {\n  const has_changes = rename_keys_and_values({\n    key_replacements: {\n      bg_url: \"timer_background_image\",\n      goto_url: \"timer_youtube_alarm\",\n    },\n  });\n  if (has_changes) {\n    localStorage[\"timer_theme\"] = \"_creator\";\n  }\n}\n","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { store } from \"../../store\";\nmigrate_to_centralized_store.schema_version = new Date(\"2020-04-21\");\nexport { migrate_to_centralized_store };\n\nfunction migrate_to_centralized_store() {\n  Object.entries(localStorage).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        val = _ref2[1];\n\n    if (key.startsWith(\"timer_\") || key.startsWith(\"clock_\") || key.startsWith(\"countdown_\") || key === \"thanks-for-your-donation\") {\n      if (key.endsWith(\"_presets\")) {\n        val = JSON.parse(val);\n      }\n\n      if (key === \"thanks-for-your-donation\") {\n        val = true;\n      }\n\n      store.set_val(key, val);\n      window.localStorage.removeItem(key);\n    }\n  });\n  store.migrate__rename_keys({\n    \"thanks-for-your-donation\": \"ad_removal\"\n  });\n}","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nimport assert from \"@brillout/assert\";\nimport load_font from \"./load_font\";\nimport _load_font_list from \"./load_font_list\";\nimport { set_background } from \"./set_background/set_background\";\nimport \"./tab-settings.css\";\nimport { track_event, track_error } from \"../views/common/tracker\";\nimport { remove_hash } from \"../auto_remove_hash\";\nimport { TextInput, BooleanInput, SelectInput, ColorInput, DateInput, Button } from \"./PersistantInput\";\nimport { show_toast } from \"../views/common/show_toast\";\nimport { run_migrations } from \"./run_migrations\";\nimport { store, deserialize, serialize } from \"../store\";\nrun_migrations();\nexport var TabSettings = /*#__PURE__*/function () {\n  function TabSettings(_ref) {\n    var _this = this;\n\n    var option_spec_list = _ref.option_spec_list,\n        preset_spec_list = _ref.preset_spec_list,\n        _ref$text_container = _ref.text_container,\n        text_container = _ref$text_container === void 0 ? null : _ref$text_container,\n        _ref$no_random_preset = _ref.no_random_preset,\n        no_random_preset = _ref$no_random_preset === void 0 ? false : _ref$no_random_preset,\n        on_any_change = _ref.on_any_change,\n        _ref$on_font_change = _ref.on_font_change,\n        on_font_change = _ref$on_font_change === void 0 ? null : _ref$on_font_change,\n        enable_import_export = _ref.enable_import_export,\n        subapp_id = _ref.subapp_id,\n        preset_concept_name = _ref.preset_concept_name;\n\n    _classCallCheck(this, TabSettings);\n\n    this.preset_concept_name = void 0;\n    this.text_container = void 0;\n    this.no_random_preset = void 0;\n    this.on_any_change = void 0;\n    this.on_font_change = void 0;\n    this.enable_import_export = void 0;\n    this.subapp_id = void 0;\n    this.creator_content = void 0;\n    this.options_content = void 0;\n    this.options_container = void 0;\n    this.save_content = void 0;\n    this.save_container = void 0;\n    this.share_content = void 0;\n    this.share_container = void 0;\n    this.preset_list = void 0;\n    this.option_list = void 0;\n    this.resolve_font_loaded_promise = void 0;\n    this.font_loaded_promise = void 0;\n    this.button_mod = void 0;\n    this.button_del = void 0;\n    this.name_option = void 0;\n    this.button_url = void 0;\n    Object.defineProperty(this, _global_side_effects__timeout, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _previous_link, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _link_el, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _font_list_already_loading, {\n      writable: true,\n      value: false\n    });\n    assert(preset_concept_name);\n    {\n      var hasTextFontInput = !!option_spec_list.find(function (_ref2) {\n        var option_type = _ref2.option_type;\n        return option_type === \"text-font-input\";\n      });\n      var hasTextShadowInput = !!option_spec_list.find(function (_ref3) {\n        var option_type = _ref3.option_type;\n        return option_type === \"text-shadow-input\";\n      });\n      var hasTextColorInput = !!option_spec_list.find(function (_ref4) {\n        var option_type = _ref4.option_type;\n        return option_type === \"text-color-input\";\n      });\n      assert(!text_container && !on_font_change && !hasTextFontInput && !hasTextShadowInput && !hasTextColorInput || text_container && on_font_change && hasTextFontInput && hasTextShadowInput && hasTextColorInput);\n    }\n    this.preset_concept_name = preset_concept_name;\n    this.text_container = text_container;\n    this.no_random_preset = no_random_preset;\n    this.on_any_change = on_any_change;\n    this.on_font_change = on_font_change;\n    this.enable_import_export = enable_import_export;\n    this.subapp_id = subapp_id;\n    this.creator_content = document.getElementById(\"creator-content\");\n    this.options_content = document.getElementById(\"options-content\");\n    this.options_container = document.getElementById(\"options-container\");\n    this.save_content = document.getElementById(\"save-content\");\n    this.save_container = document.getElementById(\"save-container\");\n    this.share_content = document.getElementById(\"share-content\");\n    this.share_container = document.getElementById(\"share-container\");\n    this.preset_list = new PresetList({\n      preset_spec_list: preset_spec_list,\n      tab_settings: this\n    });\n    this.option_list = instantiate_options({\n      tab_settings: this,\n      option_spec_list: option_spec_list\n    });\n    this.resolve_font_loaded_promise;\n    this.font_loaded_promise = new Promise(function (r) {\n      return _this.resolve_font_loaded_promise = r;\n    });\n  }\n\n  _createClass(TabSettings, [{\n    key: \"generate_dom\",\n    value: function generate_dom() {\n      this.option_list.forEach(function (opt) {\n        opt.generate_dom();\n      });\n\n      if (this.enable_import_export) {\n        this.generate_import_export_dom();\n      }\n\n      this.global_side_effects({\n        is_initial_run: true\n      });\n    }\n  }, {\n    key: \"generate_import_export_dom\",\n    value: function generate_import_export_dom() {\n      var _this2 = this;\n\n      var input_container = this.creator_content;\n      {\n        var btn = new Button({\n          input_container: input_container,\n          text: \"Customize\",\n          className: \"action-button\",\n          on_click: function on_click() {\n            _this2.modify_preset();\n          },\n          id: \"modify-preset-button\"\n        });\n        btn.generate_dom();\n        this.button_mod = btn;\n      }\n      {\n        var _btn = new Button({\n          input_container: input_container,\n          text: \"Delete\",\n          className: \"action-button\",\n          on_click: function on_click() {\n            _this2.delete_preset();\n          },\n          id: \"delete-preset-button\"\n        });\n\n        _btn.generate_dom();\n\n        this.button_del = _btn;\n      }\n      input_container = this.save_content;\n      {\n        var subapp_id = this.subapp_id;\n        assert(subapp_id);\n        var name_option = new TextOption({\n          input_container: input_container,\n          option_id: subapp_id + \"_name\",\n          input_width: \"150px\",\n          option_description: this.preset_concept_name + \" name\",\n          option_default: \"\",\n          tab_settings: this,\n          id: \"preset-name-input\"\n        });\n        name_option.generate_dom();\n        this.name_option = name_option;\n      }\n      {\n        var _btn2 = new Button({\n          input_container: input_container,\n          text: \"Save\",\n          on_click: function on_click() {\n            _this2.save_created_preset();\n          },\n          id: \"save-preset-button\"\n        });\n\n        _btn2.generate_dom();\n\n        this.button_url = _btn2;\n      }\n    }\n  }, {\n    key: \"save_created_preset\",\n    value: function save_created_preset() {\n      var preset_selected = this.preset_selected;\n      assert(preset_selected.is_creator_preset, preset_selected);\n      var preset_name = this.name_option.input_value;\n\n      if (!preset_name) {\n        alert(\"You need to provide a name for your \" + this.preset_concept_name + \" in order to save it.\");\n        return;\n      }\n\n      var preset_id = NameIdConverter.from_name_to_id(preset_name);\n\n      if (this.preset_list.get_preset_by_name(preset_id, {\n        can_be_null: true\n      })) {\n        var error_msg = \"Change the name of your \" + this.preset_concept_name + \"; \" + \"you already have a \" + this.preset_concept_name + ' saved with ID \"' + preset_id + '\". (IDs are genrated from name; change name to change ID.)';\n        alert(error_msg);\n        return;\n      }\n\n      var preset_values = {};\n      this.option_list.filter(function (option) {\n        return option.is_creator_option;\n      }).forEach(function (option) {\n        var preset_val = option.input_value;\n        assert([false, \"\"].includes(preset_val) || preset_val, option.option_id, preset_val === undefined, {\n          preset_val: preset_val\n        });\n        preset_values[option.option_id] = preset_val;\n      });\n      var new_preset = new SavedPreset({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        tab_settings: this\n      });\n      this.preset_list.save_preset(new_preset);\n      this.select_preset(new_preset);\n      this.reset_creator();\n    }\n  }, {\n    key: \"reset_creator\",\n    value: function reset_creator() {\n      // Erase all custom option values\n      this.option_list.forEach(function (option) {\n        option.reset();\n      });\n    }\n  }, {\n    key: \"copy_to_creator\",\n    value: function copy_to_creator() {\n      var _this3 = this;\n\n      var preset = this.active_preset;\n      assert(preset.is_real_preset);\n      var preset_values = preset.preset_values;\n\n      var _loop = function _loop(opt_id) {\n        var opt_val = preset_values[opt_id];\n        assert(![\"preset_name\", \"preset_id\", \"id\", \"name\"].includes(opt_val));\n\n        _this3.find_option(function (option) {\n          return option.option_id === opt_id;\n        }).set_input_value(opt_val);\n      };\n\n      for (var opt_id in preset_values) {\n        _loop(opt_id);\n      }\n\n      this.select_preset_creator();\n    }\n  }, {\n    key: \"modify_preset\",\n    value: function modify_preset() {\n      var preset = this.active_preset;\n      assert(preset.is_real_preset, preset);\n      var new_preset_id = this.preset_list.generate_unique_preset_id_copy(preset);\n      this.copy_to_creator();\n      this.name_option.set_input_value(NameIdConverter.from_id_to_name(new_preset_id));\n    }\n  }, {\n    key: \"delete_preset\",\n    value: function delete_preset() {\n      var preset = this.active_preset;\n      assert(preset.is_saved_preset, preset);\n      this.copy_to_creator();\n      this.name_option.set_input_value(preset.preset_name);\n      this.preset_list.remove_preset(preset);\n    }\n  }, {\n    key: \"global_side_effects\",\n    value: function global_side_effects() {\n      var _this4 = this;\n\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$is_initial_run = _ref5.is_initial_run,\n          is_initial_run = _ref5$is_initial_run === void 0 ? false : _ref5$is_initial_run;\n\n      if (is_initial_run) {\n        this.run_side_effects(true);\n        return;\n      }\n\n      if (_classPrivateFieldLooseBase(this, _global_side_effects__timeout)[_global_side_effects__timeout]) {\n        return;\n      }\n\n      _classPrivateFieldLooseBase(this, _global_side_effects__timeout)[_global_side_effects__timeout] = requestAnimationFrame(function () {\n        _this4.run_side_effects();\n\n        _classPrivateFieldLooseBase(_this4, _global_side_effects__timeout)[_global_side_effects__timeout] = null;\n      });\n    }\n  }, {\n    key: \"run_side_effects\",\n    value: function run_side_effects() {\n      var _this5 = this;\n\n      var is_initial_run = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.update_background();\n\n      if (this.text_container) {\n        this.update_font();\n        this.load_font_list();\n      }\n\n      this.update_option_visibility();\n      this.update_button_visibility();\n      this.on_any_change({\n        is_initial_run: is_initial_run\n      });\n      this.update_share_link();\n      this.update_save_block();\n\n      if (is_initial_run) {\n        this.load_preset_from_url();\n        window.addEventListener(\"hashchange\", function () {\n          return _this5.load_preset_from_url();\n        }, {\n          passive: true\n        });\n        this.track_user_presets();\n        this.set_options_container_visibility();\n      }\n    }\n  }, {\n    key: \"set_options_container_visibility\",\n    value: function set_options_container_visibility() {\n      var to_hide = this.option_list.every(function (opt) {\n        assert(opt.is_creator_option.constructor === Boolean);\n        return opt.is_creator_option || opt.is_preset_selector;\n      });\n\n      if (to_hide) {\n        this.options_container.style.display = \"none\";\n      }\n    }\n  }, {\n    key: \"track_user_presets\",\n    value: function track_user_presets() {\n      track_event({\n        name: \"preset_used\",\n        value: this.preset_selected.preset_id + \" \" + this.preset_concept_name.toLowerCase()\n      });\n    }\n  }, {\n    key: \"update_share_link\",\n    value: function update_share_link() {\n      var preset_selected = this.preset_selected;\n\n      if (!preset_selected.is_saved_preset) {\n        this.share_container.classList.add(\"no-share-link\");\n        return;\n      } else {\n        this.share_container.classList.remove(\"no-share-link\");\n      }\n\n      var current_link = preset_selected.share_link;\n\n      if (_classPrivateFieldLooseBase(this, _previous_link)[_previous_link] === current_link) {\n        return;\n      } else {\n        _classPrivateFieldLooseBase(this, _previous_link)[_previous_link] = current_link;\n      }\n\n      if (!_classPrivateFieldLooseBase(this, _link_el)[_link_el]) {\n        _classPrivateFieldLooseBase(this, _link_el)[_link_el] = document.createElement(\"a\");\n        _classPrivateFieldLooseBase(this, _link_el)[_link_el].id = \"share-link-tag\"; // this.#link_el.setAttribute('target', '_blank');\n\n        this.share_content.appendChild(_classPrivateFieldLooseBase(this, _link_el)[_link_el]);\n      }\n\n      _classPrivateFieldLooseBase(this, _link_el)[_link_el].setAttribute(\"href\", current_link);\n\n      _classPrivateFieldLooseBase(this, _link_el)[_link_el].textContent = current_link;\n    }\n  }, {\n    key: \"update_save_block\",\n    value: function update_save_block() {\n      this.save_container.style.display = this.preset_selected.is_creator_preset ? \"\" : \"none\";\n    }\n  }, {\n    key: \"load_preset_from_url\",\n    value: function load_preset_from_url() {\n      var preset_url = window.location.href;\n      var preset_data = LinkSerializer.from_url();\n\n      if (preset_data === null) {\n        return;\n      }\n\n      var preset_id = preset_data.preset_id;\n      assert(preset_id);\n      var preset_conflict = this.preset_list.get_preset_by_name(preset_id, {\n        can_be_null: true\n      });\n\n      if (preset_conflict) {\n        this.select_preset(preset_conflict);\n        show_toast(this.preset_concept_name + ' \"' + preset_conflict.preset_name + '\" already saved.');\n        remove_hash();\n        return;\n      }\n\n      var subapp_id = preset_data.subapp_id;\n      assert(subapp_id);\n      /* TN2\n      const wrong_url_format =\n      if( wrong_url_format ){\n        alert(\"URL is incorrect, maybe you inadvertently modified the URL?\");\n      }\n      */\n\n      var wrong_app = subapp_id !== this.subapp_id;\n\n      if (wrong_app) {\n        alert(\"Wrong app: the URL hash should be loaded in a different app.\");\n        return;\n      }\n\n      var preset_values = preset_data.preset_values;\n      assert(preset_values);\n      var new_preset = new SavedPreset({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        tab_settings: this\n      });\n      this.preset_list.save_preset(new_preset);\n      this.select_preset(new_preset);\n      show_toast(this.preset_concept_name + ' \"' + new_preset.preset_name + '\" successfully saved.');\n      remove_hash();\n      track_event({\n        name: \"preset_imported\",\n        value: this.preset_concept_name + \" \" + new_preset.preset_name,\n        data: {\n          preset_url: preset_url\n        }\n      });\n    }\n  }, {\n    key: \"update_background\",\n    value: function update_background() {\n      var image = this.current_backgroud_image;\n      var color = this.current_backgroud_color; // set_background(color, image, \"#fv_right-side\");\n\n      set_background(color, image, \"body\");\n    }\n  }, {\n    key: \"update_font\",\n    value: function () {\n      var _update_font = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this6 = this;\n\n        var text_container, get_font_name;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                text_container = this.text_container;\n\n                get_font_name = function get_font_name() {\n                  return _this6.current_font_name;\n                };\n\n                _context.next = 4;\n                return load_text_font({\n                  text_container: text_container,\n                  get_font_name: get_font_name\n                });\n\n              case 4:\n                this.on_font_change();\n                this.resolve_font_loaded_promise();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function update_font() {\n        return _update_font.apply(this, arguments);\n      }\n\n      return update_font;\n    }()\n  }, {\n    key: \"update_option_visibility\",\n    value: function update_option_visibility() {\n      var _this7 = this;\n\n      // Visibility of options\n      var get_input_val = function get_input_val(dep_option_id) {\n        return _this7.find_option(function (option) {\n          return option.option_id === dep_option_id;\n        }).input_value;\n      };\n\n      this.option_list.forEach(function (opt) {\n        var to_hide = opt.option_dependency && !get_input_val(opt.option_dependency) || opt.is_creator_option && !_this7.preset_selected.is_creator_preset;\n\n        if (to_hide) {\n          opt.hide();\n        } else {\n          opt.show();\n        }\n      });\n    }\n  }, {\n    key: \"update_button_visibility\",\n    value: function update_button_visibility() {\n      if (!this.enable_import_export) {\n        return;\n      }\n\n      if (this.preset_selected.is_saved_preset) {\n        this.button_del.show();\n      } else {\n        this.button_del.hide();\n      }\n\n      if (this.preset_selected.is_creator_preset) {\n        this.button_mod.hide();\n        this.button_url.show();\n        this.name_option.show(); // this.button_del.hide();\n      } else {\n        this.button_url.hide();\n        this.name_option.hide(); // this.button_del.hide();\n\n        if (!this.preset_selected.is_randomizer_preset) {\n          this.button_mod.show();\n        } else {\n          this.button_mod.hide();\n        }\n      }\n    }\n  }, {\n    key: \"load_font_list\",\n    value: function () {\n      var _load_font_list2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.preset_selected.is_creator_preset) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 2:\n                if (!_classPrivateFieldLooseBase(this, _font_list_already_loading)[_font_list_already_loading]) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 4:\n                _classPrivateFieldLooseBase(this, _font_list_already_loading)[_font_list_already_loading] = true;\n                _context2.t0 = this.font_option;\n                _context2.t1 = [SelectInput.get_divider()];\n                _context2.t2 = _toConsumableArray;\n                _context2.next = 10;\n                return _load_font_list();\n\n              case 10:\n                _context2.t3 = _context2.sent;\n                _context2.t4 = (0, _context2.t2)(_context2.t3);\n                _context2.t5 = _context2.t1.concat.call(_context2.t1, _context2.t4);\n\n                _context2.t0.add_fonts.call(_context2.t0, _context2.t5);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function load_font_list() {\n        return _load_font_list2.apply(this, arguments);\n      }\n\n      return load_font_list;\n    }()\n  }, {\n    key: \"find_option\",\n    value: function find_option(match) {\n      var option = this.option_list.find(match);\n      assert(option);\n      return option;\n    }\n  }, {\n    key: \"select_preset_creator\",\n    value: function select_preset_creator() {\n      this.active_preset = this.preset_list.creator_preset;\n    }\n  }, {\n    key: \"select_preset\",\n    value: function select_preset(preset) {\n      this.active_preset = preset;\n    }\n  }, {\n    key: \"get_option_value\",\n    value: function get_option_value(option_id) {\n      return this.find_option(function (option) {\n        return option.option_id === option_id;\n      }).active_value;\n    }\n  }, {\n    key: \"background_image_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_background_image_option;\n      });\n    }\n  }, {\n    key: \"current_backgroud_image\",\n    get: function get() {\n      return this.background_image_option.active_value;\n    }\n  }, {\n    key: \"background_color_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_background_color_option;\n      });\n    }\n  }, {\n    key: \"current_backgroud_color\",\n    get: function get() {\n      return this.background_color_option.active_value;\n    }\n  }, {\n    key: \"font_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_font_option;\n      });\n    }\n  }, {\n    key: \"current_font_name\",\n    get: function get() {\n      return this.font_option.active_value;\n    }\n  }, {\n    key: \"active_preset\",\n    get: function get() {\n      var active_preset;\n      var preset_selected = this.preset_selected;\n\n      if (preset_selected.is_randomizer_preset) {\n        active_preset = preset_selected.random_preset;\n      } else {\n        active_preset = preset_selected;\n      }\n\n      assert(!active_preset.is_randomizer_preset, {\n        active_preset: active_preset\n      });\n      assert(active_preset.preset_id, {\n        active_preset: active_preset\n      });\n      return active_preset;\n    },\n    set: function set(preset_thing) {\n      var preset_id;\n\n      if (preset_thing.constructor === String) {\n        preset_id = preset_thing;\n      }\n\n      if (preset_thing instanceof Preset || preset_thing instanceof FakePreset) {\n        preset_id = preset_thing.preset_id;\n      }\n\n      assert(preset_id, {\n        preset_thing: preset_thing,\n        preset_id: preset_id\n      });\n      this.preset_option.set_input_value(preset_id);\n    }\n  }, {\n    key: \"preset_selected\",\n    get: function get() {\n      var preset_id = this.preset_option.input_value;\n      var preset = this.preset_list.get_preset_by_name(preset_id, {\n        can_be_null: true\n      });\n\n      if (preset) {\n        return preset;\n      }\n\n      var default_preset_id = this.preset_option.option_default;\n      assert(default_preset_id, {\n        default_preset_id: default_preset_id\n      });\n      var default_preset = this.preset_list.get_preset_by_name(default_preset_id);\n      return default_preset;\n    }\n  }, {\n    key: \"preset_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_preset_selector;\n      });\n    }\n  }]);\n\n  return TabSettings;\n}();\n\nvar _global_side_effects__timeout = _classPrivateFieldLooseKey(\"global_side_effects__timeout\");\n\nvar _previous_link = _classPrivateFieldLooseKey(\"previous_link\");\n\nvar _link_el = _classPrivateFieldLooseKey(\"link_el\");\n\nvar _font_list_already_loading = _classPrivateFieldLooseKey(\"font_list_already_loading\");\n\nvar Option = /*#__PURE__*/function () {\n  function Option(_ref6) {\n    var _this8 = this;\n\n    var option_id = _ref6.option_id,\n        option_description = _ref6.option_description,\n        option_default = _ref6.option_default,\n        input_width = _ref6.input_width,\n        tab_settings = _ref6.tab_settings,\n        input_container = _ref6.input_container,\n        _ref6$is_creator_opti = _ref6.is_creator_option,\n        is_creator_option = _ref6$is_creator_opti === void 0 ? false : _ref6$is_creator_opti,\n        props = _objectWithoutProperties(_ref6, [\"option_id\", \"option_description\", \"option_default\", \"input_width\", \"tab_settings\", \"input_container\", \"is_creator_option\"]);\n\n    _classCallCheck(this, Option);\n\n    this.tab_settings = void 0;\n    this.option_id = void 0;\n    this.option_description = void 0;\n    this.input_args = void 0;\n    this.is_creator_option = void 0;\n    this.option_default = void 0;\n    this.user_input = void 0;\n    assert(option_id);\n    assert(tab_settings);\n    Object.assign(this, _objectSpread({\n      option_id: option_id,\n      tab_settings: tab_settings\n    }, props));\n    this.is_creator_option = is_creator_option;\n    this.option_default = option_default;\n    input_container = input_container || (is_creator_option ? this.tab_settings.creator_content : this.tab_settings.options_content);\n    assert(input_container, {\n      option_id: option_id\n    });\n    this.input_args = {\n      input_id: option_id,\n      input_description: option_description,\n      on_input_change: function on_input_change() {\n        _this8.tab_settings.global_side_effects();\n      },\n      input_default: option_default,\n      input_container: input_container,\n      input_width: input_width\n    };\n  }\n\n  _createClass(Option, [{\n    key: \"generate_dom\",\n    value: function generate_dom() {\n      if (this.before_dom) {\n        this.before_dom();\n      }\n\n      assert(this.user_input);\n      this.user_input.init();\n    }\n  }, {\n    key: \"set_input_value\",\n    value: function set_input_value(val) {\n      this.user_input.input_set(val);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.user_input.hide();\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.user_input.show();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {// TODO\n    }\n  }, {\n    key: \"input_value\",\n    get: function get() {\n      return this.user_input.input_get();\n    }\n  }, {\n    key: \"preset_value\",\n    get: function get() {\n      var preset_val = this.tab_settings.active_preset.get_preset_value(this);\n      return preset_val;\n    }\n  }, {\n    key: \"active_value\",\n    get: function get() {\n      if (this.tab_settings.preset_selected.is_creator_preset) {\n        return this.input_value;\n      }\n\n      var preset_value = this.preset_value;\n\n      if (this.is_creator_option) {\n        return preset_value;\n      }\n\n      if (preset_value !== null) {\n        return preset_value;\n      }\n\n      return this.input_value;\n    }\n  }]);\n\n  return Option;\n}();\n\nvar DateOption = /*#__PURE__*/function (_Option) {\n  _inherits(DateOption, _Option);\n\n  function DateOption(args) {\n    var _this9;\n\n    _classCallCheck(this, DateOption);\n\n    _this9 = _possibleConstructorReturn(this, _getPrototypeOf(DateOption).call(this, args));\n    _this9.user_input = new DateInput(_this9.input_args);\n    return _this9;\n  }\n\n  return DateOption;\n}(Option);\n\nvar BooleanOption = /*#__PURE__*/function (_Option2) {\n  _inherits(BooleanOption, _Option2);\n\n  function BooleanOption(args) {\n    var _this10;\n\n    _classCallCheck(this, BooleanOption);\n\n    _this10 = _possibleConstructorReturn(this, _getPrototypeOf(BooleanOption).call(this, args));\n    _this10.user_input = new BooleanInput(_this10.input_args);\n    return _this10;\n  }\n\n  return BooleanOption;\n}(Option);\n\nvar SelectOption = /*#__PURE__*/function (_Option3) {\n  _inherits(SelectOption, _Option3);\n\n  function SelectOption(args, input_options) {\n    var _this11;\n\n    _classCallCheck(this, SelectOption);\n\n    _this11 = _possibleConstructorReturn(this, _getPrototypeOf(SelectOption).call(this, args));\n    _this11.user_input = void 0;\n    _this11.user_input = new SelectInput(_objectSpread({\n      input_options: input_options\n    }, _this11.input_args));\n    return _this11;\n  }\n\n  _createClass(SelectOption, [{\n    key: \"add_options\",\n    value: function add_options(args) {\n      this.user_input.add_options(args);\n    }\n  }]);\n\n  return SelectOption;\n}(Option);\n\nvar ChoiceOption = /*#__PURE__*/function (_SelectOption) {\n  _inherits(ChoiceOption, _SelectOption);\n\n  function ChoiceOption(_ref7) {\n    var option_choices = _ref7.option_choices,\n        args = _objectWithoutProperties(_ref7, [\"option_choices\"]);\n\n    _classCallCheck(this, ChoiceOption);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChoiceOption).call(this, _objectSpread({\n      input_width: \"100px\"\n    }, args), option_choices));\n  }\n\n  return ChoiceOption;\n}(SelectOption);\n\nvar TextOption = /*#__PURE__*/function (_Option4) {\n  _inherits(TextOption, _Option4);\n\n  function TextOption(args) {\n    var _this12;\n\n    _classCallCheck(this, TextOption);\n\n    _this12 = _possibleConstructorReturn(this, _getPrototypeOf(TextOption).call(this, args));\n    _this12.input_args.input_placeholder = args.option_placeholder;\n    _this12.user_input = new TextInput(_this12.input_args);\n    return _this12;\n  }\n\n  return TextOption;\n}(Option);\n/*\nclass TextOption extends Option {\n  constructor({option_placeholder, ...args}) {\n    super(args);\n    this.input_args.input_placeholder = option_placeholder;\n    this.user_input = new TextInput(this.input_args);\n  }\n}\n*/\n\n\nvar ColorOption = /*#__PURE__*/function (_Option5) {\n  _inherits(ColorOption, _Option5);\n\n  function ColorOption(args) {\n    var _this13;\n\n    _classCallCheck(this, ColorOption);\n\n    _this13 = _possibleConstructorReturn(this, _getPrototypeOf(ColorOption).call(this, _objectSpread({\n      input_width: \"35px\"\n    }, args)));\n    _this13.user_input = new ColorInput(_this13.input_args);\n    return _this13;\n  }\n\n  return ColorOption;\n}(Option);\n\nvar TextColorOption = /*#__PURE__*/function (_ColorOption) {\n  _inherits(TextColorOption, _ColorOption);\n\n  function TextColorOption() {\n    _classCallCheck(this, TextColorOption);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TextColorOption).apply(this, arguments));\n  }\n\n  return TextColorOption;\n}(ColorOption);\n\nvar TextShadowOption = /*#__PURE__*/function (_TextOption) {\n  _inherits(TextShadowOption, _TextOption);\n\n  function TextShadowOption() {\n    _classCallCheck(this, TextShadowOption);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TextShadowOption).apply(this, arguments));\n  }\n\n  return TextShadowOption;\n}(TextOption);\n\nvar PresetOption = /*#__PURE__*/function (_SelectOption2) {\n  _inherits(PresetOption, _SelectOption2);\n\n  function PresetOption(_ref8) {\n    var _this14;\n\n    var input_options = _ref8.input_options,\n        args = _objectWithoutProperties(_ref8, [\"input_options\"]);\n\n    _classCallCheck(this, PresetOption);\n\n    _this14 = _possibleConstructorReturn(this, _getPrototypeOf(PresetOption).call(this, _objectSpread({\n      input_width: \"120px\",\n      input_container: args.tab_settings.creator_content\n    }, args), input_options));\n    _this14.is_preset_selector = true;\n    return _this14;\n  }\n\n  _createClass(PresetOption, [{\n    key: \"before_dom\",\n    value: function before_dom() {\n      this.user_input.input_options = this.get_input_options();\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.before_dom();\n      this.user_input.refresh();\n    }\n  }, {\n    key: \"get_input_options\",\n    value: function get_input_options() {\n      var _this$tab_settings$pr = this.tab_settings.preset_list.presets_ordered,\n          special_ones = _this$tab_settings$pr.special_ones,\n          saved_ones = _this$tab_settings$pr.saved_ones,\n          native_ones = _this$tab_settings$pr.native_ones;\n      {\n        var map = function map(_ref9) {\n          var preset_id = _ref9.preset_id,\n              preset_name = _ref9.preset_name;\n          assert(preset_id);\n          assert(preset_name);\n          return {\n            val: preset_id,\n            val_pretty: preset_name\n          };\n        };\n\n        special_ones = special_ones.map(map);\n        saved_ones = saved_ones.map(map);\n        native_ones = native_ones.map(map);\n      }\n      return saved_ones.length > 0 ? [].concat(_toConsumableArray(special_ones), [SelectInput.get_divider(\"Saved\")], _toConsumableArray(saved_ones), [SelectInput.get_divider(\"Native\")], _toConsumableArray(native_ones)) : [].concat(_toConsumableArray(special_ones), [SelectInput.get_divider()], _toConsumableArray(native_ones));\n    }\n  }]);\n\n  return PresetOption;\n}(SelectOption);\n\nvar BackgroundImageOption = /*#__PURE__*/function (_TextOption2) {\n  _inherits(BackgroundImageOption, _TextOption2);\n\n  function BackgroundImageOption() {\n    var _getPrototypeOf2;\n\n    var _this15;\n\n    _classCallCheck(this, BackgroundImageOption);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this15 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BackgroundImageOption)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this15.is_background_image_option = true;\n    return _this15;\n  }\n\n  return BackgroundImageOption;\n}(TextOption);\n\nvar BackgroundColorOption = /*#__PURE__*/function (_ColorOption2) {\n  _inherits(BackgroundColorOption, _ColorOption2);\n\n  function BackgroundColorOption() {\n    var _getPrototypeOf3;\n\n    var _this16;\n\n    _classCallCheck(this, BackgroundColorOption);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this16 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(BackgroundColorOption)).call.apply(_getPrototypeOf3, [this].concat(args)));\n    _this16.is_background_color_option = true;\n    return _this16;\n  }\n\n  return BackgroundColorOption;\n}(ColorOption);\n\nvar FontOption = /*#__PURE__*/function (_SelectOption3) {\n  _inherits(FontOption, _SelectOption3);\n\n  function FontOption(_ref10) {\n    var _this17;\n\n    var input_optoins = _ref10.input_optoins,\n        args = _objectWithoutProperties(_ref10, [\"input_optoins\"]);\n\n    _classCallCheck(this, FontOption);\n\n    _this17 = _possibleConstructorReturn(this, _getPrototypeOf(FontOption).call(this, _objectSpread({\n      input_width: \"110px\"\n    }, args), input_optoins));\n    _this17.is_font_option = true;\n    return _this17;\n  }\n\n  _createClass(FontOption, [{\n    key: \"before_dom\",\n    value: function before_dom() {\n      this.user_input.input_options = this.tab_settings.preset_list.get_all_preset_fonts();\n    }\n  }, {\n    key: \"add_fonts\",\n    value: function add_fonts(args) {\n      this.add_options(args);\n    }\n  }, {\n    key: \"input_value\",\n    get: function get() {\n      var val = _get(_getPrototypeOf(FontOption.prototype), \"input_value\", this);\n\n      assert(val, \"empty_font_value\", val === undefined, val === \"\", {\n        val: val\n      });\n      return val;\n    }\n  }]);\n\n  return FontOption;\n}(SelectOption);\n\nfunction load_text_font(_x) {\n  return _load_text_font.apply(this, arguments);\n}\n\nfunction _load_text_font() {\n  _load_text_font = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref21) {\n    var text_container, get_font_name, font_name;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            text_container = _ref21.text_container, get_font_name = _ref21.get_font_name;\n            font_name = get_font_name();\n            _context3.next = 4;\n            return load_font(font_name);\n\n          case 4:\n            if (!(font_name !== get_font_name())) {\n              _context3.next = 6;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 6:\n            if (!(font_name === text_container.style.fontFamily)) {\n              _context3.next = 8;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 8:\n            text_container.style.fontFamily = font_name;\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _load_text_font.apply(this, arguments);\n}\n\nfunction instantiate_options(_ref11) {\n  var tab_settings = _ref11.tab_settings,\n      option_spec_list = _ref11.option_spec_list;\n  return option_spec_list.map(function (_ref12) {\n    var option_type = _ref12.option_type,\n        option_spec = _objectWithoutProperties(_ref12, [\"option_type\"]);\n\n    assert(option_spec.option_id, option_spec);\n\n    var args = _objectSpread({}, option_spec, {\n      tab_settings: tab_settings\n    });\n\n    if (option_type === \"text-font-input\") {\n      return new FontOption(args);\n    }\n\n    if (option_type === \"preset-input\") {\n      return new PresetOption(args);\n    }\n\n    if (option_type === \"text-color-input\") {\n      return new TextColorOption(args);\n    }\n\n    if (option_type === \"color-input\") {\n      return new ColorOption(args);\n    }\n\n    if (option_type === \"text-shadow-input\") {\n      return new TextShadowOption(args);\n    }\n\n    if (option_type === \"text-input\") {\n      return new TextOption(args);\n    }\n\n    if (option_type === \"background-image-input\") {\n      return new BackgroundImageOption(args);\n    }\n\n    if (option_type === \"background-color-input\") {\n      return new BackgroundColorOption(args);\n    }\n\n    if (option_type === \"boolean-input\") {\n      return new BooleanOption(args);\n    }\n\n    if (option_type === \"date-input\") {\n      return new DateOption(args);\n    }\n\n    if (option_type === \"choice-input\") {\n      return new ChoiceOption(args);\n    }\n\n    assert(false, {\n      option_type: option_type\n    });\n  });\n}\n\nvar PresetList = /*#__PURE__*/function () {\n  function PresetList(_ref13) {\n    var preset_spec_list = _ref13.preset_spec_list,\n        tab_settings = _ref13.tab_settings;\n\n    _classCallCheck(this, PresetList);\n\n    Object.defineProperty(this, _preset_savior, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _native_presets, {\n      writable: true,\n      value: null\n    });\n    this.tab_settings = void 0;\n    this.randomizer_preset = void 0;\n    this.creator_preset = void 0;\n    this.tab_settings = tab_settings;\n    _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior] = new PresetSavior({\n      subapp_id: tab_settings.subapp_id\n    });\n\n    if (!this.tab_settings.no_random_preset) {\n      this.randomizer_preset = new RandomizerPreset({\n        preset_list: this\n      });\n    }\n\n    this.creator_preset = new CreatorPreset();\n    _classPrivateFieldLooseBase(this, _native_presets)[_native_presets] = Object.entries(preset_spec_list).map(function (_ref14) {\n      var _ref15 = _slicedToArray(_ref14, 2),\n          preset_id = _ref15[0],\n          preset_values = _ref15[1];\n\n      return new NativePreset({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        tab_settings: tab_settings\n      });\n    });\n  }\n\n  _createClass(PresetList, [{\n    key: \"save_preset\",\n    value: function save_preset(preset) {\n      _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior].save_preset(preset);\n\n      this.refresh_user_input();\n    }\n  }, {\n    key: \"remove_preset\",\n    value: function remove_preset(preset) {\n      _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior].remove_preset(preset);\n\n      this.refresh_user_input();\n    }\n  }, {\n    key: \"refresh_user_input\",\n    value: function refresh_user_input() {\n      this.tab_settings.preset_option.refresh();\n    }\n  }, {\n    key: \"_get_saved_presets\",\n    value: function _get_saved_presets() {\n      var tab_settings = this.tab_settings;\n      return _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior].get_saved_presets().map(function (_ref16) {\n        var preset_id = _ref16.preset_id,\n            preset_values = _ref16.preset_values;\n        return new SavedPreset({\n          preset_id: preset_id,\n          preset_values: preset_values,\n          tab_settings: tab_settings\n        });\n      });\n    }\n  }, {\n    key: \"get_preset_by_name\",\n    value: function get_preset_by_name(preset_id) {\n      var _ref17 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref17$can_be_null = _ref17.can_be_null,\n          can_be_null = _ref17$can_be_null === void 0 ? false : _ref17$can_be_null;\n\n      assert(preset_id);\n\n      var presets = this._get_all_presets();\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = presets[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var preset = _step.value;\n\n          if (preset.preset_id === preset_id) {\n            return preset;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      assert(can_be_null, \"Could not find preset\", {\n        preset_id: preset_id\n      });\n    }\n  }, {\n    key: \"get_all_preset_fonts\",\n    value: function get_all_preset_fonts() {\n      var _this$presets_ordered = this.presets_ordered,\n          saved_ones = _this$presets_ordered.saved_ones,\n          native_ones = _this$presets_ordered.native_ones;\n      var presets = [].concat(_toConsumableArray(saved_ones), _toConsumableArray(native_ones));\n      presets.forEach(function (preset) {\n        return assert(preset.is_real_preset, preset.preset_id);\n      });\n      var preset_font_names = presets.map(function (preset) {\n        var font_name = preset.preset_font_name;\n        assert(font_name, preset.preset_id);\n        return font_name;\n      });\n      preset_font_names = make_unique(preset_font_names);\n      return preset_font_names;\n    }\n  }, {\n    key: \"generate_unique_preset_id_copy\",\n    value: function generate_unique_preset_id_copy(preset) {\n      var preset_ids = this._get_all_preset_ids();\n\n      var preset_id = preset.preset_id;\n      assert(preset_id);\n      var s = NameIdConverter.white_space_seralized;\n      assert(s);\n      var base = preset_id.split(\"_\").join(s).split(/-edit(-|$)/)[0] + s + \"edit\";\n\n      for (var _i2 = 1; _i2 < 100; _i2++) {\n        var candidate = base + (_i2 === 1 ? \"\" : s + _i2);\n\n        if (!preset_ids.includes(candidate)) {\n          return candidate;\n        }\n      }\n\n      assert(false);\n    }\n  }, {\n    key: \"_get_all_preset_ids\",\n    value: function _get_all_preset_ids() {\n      var presets = this._get_all_presets();\n\n      var preset_ids = presets.map(function (preset) {\n        return preset.preset_id;\n      });\n      return preset_ids;\n    }\n  }, {\n    key: \"_get_all_presets\",\n    value: function _get_all_presets() {\n      var _this$presets_ordered2 = this.presets_ordered,\n          special_ones = _this$presets_ordered2.special_ones,\n          saved_ones = _this$presets_ordered2.saved_ones,\n          native_ones = _this$presets_ordered2.native_ones;\n      var presets = [].concat(_toConsumableArray(special_ones), _toConsumableArray(saved_ones), _toConsumableArray(native_ones));\n      return presets;\n    }\n  }, {\n    key: \"random_candidates\",\n    get: function get() {\n      var _this$presets_ordered3 = this.presets_ordered,\n          saved_ones = _this$presets_ordered3.saved_ones,\n          native_ones = _this$presets_ordered3.native_ones;\n\n      if (saved_ones.length > 1) {\n        return saved_ones;\n      }\n\n      return native_ones;\n    }\n  }, {\n    key: \"presets_ordered\",\n    get: function get() {\n      var special_ones = [this.creator_preset];\n\n      if (this.randomizer_preset) {\n        special_ones.push(this.randomizer_preset);\n      }\n\n      var saved_ones = this._get_saved_presets();\n\n      var native_ones = _classPrivateFieldLooseBase(this, _native_presets)[_native_presets];\n\n      assert(special_ones && saved_ones && native_ones);\n      return {\n        special_ones: special_ones,\n        saved_ones: saved_ones,\n        native_ones: native_ones\n      };\n    }\n  }]);\n\n  return PresetList;\n}();\n\nvar _preset_savior = _classPrivateFieldLooseKey(\"preset_savior\");\n\nvar _native_presets = _classPrivateFieldLooseKey(\"native_presets\");\n\nvar PresetSerializer = /*#__PURE__*/function () {\n  function PresetSerializer() {\n    _classCallCheck(this, PresetSerializer);\n  }\n\n  _createClass(PresetSerializer, null, [{\n    key: \"serialize_preset\",\n    value: function serialize_preset(preset) {\n      assert(preset instanceof SavedPreset); // Validation\n\n      var preset_id = preset.preset_id,\n          preset_values = preset.preset_values;\n      var subapp_id = preset.tab_settings.subapp_id;\n      var preset_data = new PresetData({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        subapp_id: subapp_id\n      });\n      var preset_string = serialize(preset_data);\n      return preset_string;\n    }\n  }, {\n    key: \"deserialize_preset\",\n    value: function deserialize_preset(preset_string) {\n      assert(preset_string.constructor === String);\n      var preset_data = deserialize(preset_string); // share URLs cannot be migrated thus we migrate here at runtime\n\n      if (preset_data.preset_name && !preset_data.preset_id && preset_data.preset_options && !preset_data.preset_values) {\n        preset_data.preset_id = preset_data.preset_name;\n        delete preset_data.preset_name;\n        preset_data.preset_values = preset_data.preset_options;\n        delete preset_data.preset_options;\n      }\n\n      if (preset_data.app_name && !preset_data.subapp_id) {\n        preset_data.subapp_id = preset_data.app_name;\n        delete preset_data.app_name;\n      }\n\n      preset_data = new PresetData(preset_data);\n      return preset_data;\n    }\n  }]);\n\n  return PresetSerializer;\n}();\n\nvar Preset = /*#__PURE__*/function () {\n  function Preset(_ref18) {\n    var preset_id = _ref18.preset_id,\n        preset_values = _ref18.preset_values,\n        tab_settings = _ref18.tab_settings;\n\n    _classCallCheck(this, Preset);\n\n    this.preset_id = void 0;\n    this.preset_values = void 0;\n    this.tab_settings = void 0;\n    this.is_randomizer_preset = false;\n    this.is_creator_preset = false;\n    assert(preset_id);\n    assert([Object, PresetValues].includes(preset_values.constructor));\n    assert(tab_settings);\n    this.preset_id = preset_id;\n    this.preset_values = preset_values;\n    this.tab_settings = tab_settings; // Abstract class\n\n    if ((this instanceof Preset ? this.constructor : void 0) === Preset) {\n      throw new TypeError(\"Cannot construct Preset instances directly.\");\n    }\n  }\n\n  _createClass(Preset, [{\n    key: \"get_preset_value\",\n    value: function get_preset_value(option) {\n      var option_id = option.option_id;\n      assert(option_id);\n      var preset_values = this.preset_values;\n\n      if (option_id in preset_values) {\n        var val = preset_values[option_id];\n        assert(val !== null);\n        return val;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"is_real_preset\",\n    get: function get() {\n      return !this.is_randomizer_preset && !this.is_creator_preset;\n    }\n  }, {\n    key: \"preset_font_name\",\n    get: function get() {\n      var preset_font_name = this.get_preset_value(this.tab_settings.font_option);\n      assert(preset_font_name, {\n        preset_font_name: preset_font_name\n      });\n      return preset_font_name;\n    }\n  }, {\n    key: \"preset_name\",\n    get: function get() {\n      var prettified = NameIdConverter.from_id_to_name(this.preset_id);\n      assert(prettified, {\n        prettified: prettified\n      });\n      return prettified;\n    }\n  }]);\n\n  return Preset;\n}();\n\nvar SavedPreset = /*#__PURE__*/function (_Preset) {\n  _inherits(SavedPreset, _Preset);\n\n  function SavedPreset() {\n    var _getPrototypeOf4;\n\n    var _this18;\n\n    _classCallCheck(this, SavedPreset);\n\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    _this18 = _possibleConstructorReturn(this, (_getPrototypeOf4 = _getPrototypeOf(SavedPreset)).call.apply(_getPrototypeOf4, [this].concat(args)));\n    Object.defineProperty(_assertThisInitialized(_this18), _generated_link, {\n      writable: true,\n      value: null\n    });\n    return _this18;\n  }\n\n  _createClass(SavedPreset, [{\n    key: \"is_saved_preset\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"share_link\",\n    get: function get() {\n      if (!_classPrivateFieldLooseBase(this, _generated_link)[_generated_link]) {\n        return _classPrivateFieldLooseBase(this, _generated_link)[_generated_link] = LinkSerializer.to_url(this);\n      }\n\n      return _classPrivateFieldLooseBase(this, _generated_link)[_generated_link];\n    }\n  }]);\n\n  return SavedPreset;\n}(Preset);\n\nvar _generated_link = _classPrivateFieldLooseKey(\"generated_link\");\n\nvar NativePreset = /*#__PURE__*/function (_Preset2) {\n  _inherits(NativePreset, _Preset2);\n\n  function NativePreset(args) {\n    var _this19;\n\n    _classCallCheck(this, NativePreset);\n\n    _this19 = _possibleConstructorReturn(this, _getPrototypeOf(NativePreset).call(this, args));\n    var preset_id = args.preset_id;\n    assert(!preset_id.includes(\"-\"), {\n      preset_id: preset_id\n    });\n    assert(/^[a-zA-Z0-9_]+$$/.test(preset_id), {\n      preset_id: preset_id\n    });\n    return _this19;\n  }\n\n  return NativePreset;\n}(Preset);\n\nvar PresetData = function PresetData(args) {\n  _classCallCheck(this, PresetData);\n\n  this.subapp_id = void 0;\n  this.preset_id = void 0;\n  this.preset_values = void 0;\n\n  // I don't know why but even after all migrations applied a user\n  // had a `preset_options` prop in its local storage.\n  if (args.preset_options && !args.preset_values) {\n    args.preset_values = args.preset_options;\n    delete args.preset_options;\n  }\n\n  var preset_id = args.preset_id,\n      preset_values = args.preset_values,\n      subapp_id = args.subapp_id,\n      rest = _objectWithoutProperties(args, [\"preset_id\", \"preset_values\", \"subapp_id\"]);\n\n  assert(Object.keys(rest).length === 0 && preset_id && preset_values && subapp_id, \"malformatted preset data\", args);\n  this.subapp_id = subapp_id;\n  this.preset_id = preset_id;\n  this.preset_values = new PresetValues(preset_values);\n};\n\nvar PresetValues = function PresetValues(args) {\n  _classCallCheck(this, PresetValues);\n\n  assert([Object, PresetValues].includes(args.constructor), args, args.constructor);\n  Object.assign(this, args);\n};\n\nvar PresetSavior = /*#__PURE__*/function () {\n  function PresetSavior(_ref19) {\n    var subapp_id = _ref19.subapp_id;\n\n    _classCallCheck(this, PresetSavior);\n\n    Object.defineProperty(this, _subapp_id, {\n      writable: true,\n      value: null\n    });\n    assert(subapp_id);\n    _classPrivateFieldLooseBase(this, _subapp_id)[_subapp_id] = subapp_id;\n  }\n\n  _createClass(PresetSavior, [{\n    key: \"get_saved_presets\",\n    value: function get_saved_presets() {\n      return this._get_presets();\n    }\n  }, {\n    key: \"save_preset\",\n    value: function save_preset(preset) {\n      var preset_id = preset.preset_id,\n          preset_values = preset.preset_values;\n      assert(preset_id);\n      assert(preset_values);\n\n      var presets = this._get_presets();\n\n      if (presets.find(function (preset) {\n        return preset.preset_id === preset_id;\n      })) {\n        // @ts-ignore\n        assert.warning(\"Trying to save \" + preset_id + \" but it is already saved.\");\n        return;\n      }\n\n      var subapp_id = _classPrivateFieldLooseBase(this, _subapp_id)[_subapp_id];\n\n      var preset_data = new PresetData({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        subapp_id: subapp_id\n      });\n      presets.push(preset_data);\n\n      this._save_presets(presets);\n    }\n  }, {\n    key: \"remove_preset\",\n    value: function remove_preset(preset) {\n      var preset_id = preset.preset_id;\n      assert(preset_id);\n\n      var presets = this._get_presets();\n\n      var old_length = presets.length;\n      presets = presets.filter(function (preset) {\n        return preset.preset_id !== preset_id;\n      });\n      var new_length = presets.length;\n\n      if (new_length === old_length) {\n        // @ts-ignore\n        assert.warning(false, \"Preset \" + preset_id + \" not found.\");\n      }\n\n      if (new_length !== old_length - 1) {\n        // @ts-ignore\n        assert.warning(false, \"Preset \" + preset_id + \" found multiple times.\");\n      }\n\n      this._save_presets(presets);\n    }\n  }, {\n    key: \"_get_presets\",\n    value: function _get_presets() {\n      var presets = store.get_val(this._storage_key) || []; // Validation\n\n      assert(presets.constructor === Array);\n      presets = presets.map(function (preset_data) {\n        return new PresetData(preset_data);\n      });\n      return presets;\n    }\n  }, {\n    key: \"_save_presets\",\n    value: function _save_presets(presets) {\n      // Validation\n      assert(presets.constructor === Array);\n      presets.forEach(function (preset_data) {\n        assert(preset_data instanceof PresetData);\n      });\n      store.set_val(this._storage_key, presets);\n    }\n  }, {\n    key: \"_storage_key\",\n    get: function get() {\n      return _classPrivateFieldLooseBase(this, _subapp_id)[_subapp_id] + \"_presets\";\n    }\n  }]);\n\n  return PresetSavior;\n}();\n\nvar _subapp_id = _classPrivateFieldLooseKey(\"subapp_id\");\n\nvar FakePreset = /*#__PURE__*/function () {\n  function FakePreset() {\n    _classCallCheck(this, FakePreset);\n\n    this.is_randomizer_preset = void 0;\n    this.is_creator_preset = void 0;\n    this.preset_id = void 0;\n    this.preset_name = void 0;\n  }\n\n  _createClass(FakePreset, [{\n    key: \"get_preset_value\",\n    value: function get_preset_value() {\n      return null;\n    }\n  }]);\n\n  return FakePreset;\n}();\n\nvar RandomizerPreset = /*#__PURE__*/function (_FakePreset) {\n  _inherits(RandomizerPreset, _FakePreset);\n\n  function RandomizerPreset(_ref20) {\n    var _this20;\n\n    var preset_list = _ref20.preset_list;\n\n    _classCallCheck(this, RandomizerPreset);\n\n    _this20 = _possibleConstructorReturn(this, _getPrototypeOf(RandomizerPreset).call(this));\n    Object.defineProperty(_assertThisInitialized(_this20), _picked, {\n      writable: true,\n      value: null\n    });\n    _this20.is_randomizer_preset = true;\n    _this20.is_creator_preset = false;\n    _this20.preset_id = \"_random\";\n    _this20.preset_name = \"<Random>\";\n    _this20.preset_list = void 0;\n    _this20.is_randomizer_preset = true;\n    _this20.preset_list = preset_list;\n    return _this20;\n  }\n\n  _createClass(RandomizerPreset, [{\n    key: \"pick_random_preset\",\n    value: function pick_random_preset() {\n      var random_candidates = this.preset_list.random_candidates;\n      var idx = Math.floor(Math.random() * random_candidates.length);\n      return random_candidates[idx];\n    }\n  }, {\n    key: \"random_preset\",\n    get: function get() {\n      if (!_classPrivateFieldLooseBase(this, _picked)[_picked]) {\n        _classPrivateFieldLooseBase(this, _picked)[_picked] = this.pick_random_preset();\n      }\n\n      assert(_classPrivateFieldLooseBase(this, _picked)[_picked].is_real_preset, _classPrivateFieldLooseBase(this, _picked)[_picked].preset_id, _classPrivateFieldLooseBase(this, _picked)[_picked]);\n      return _classPrivateFieldLooseBase(this, _picked)[_picked];\n    }\n  }]);\n\n  return RandomizerPreset;\n}(FakePreset);\n\nvar _picked = _classPrivateFieldLooseKey(\"picked\");\n\nvar CreatorPreset = /*#__PURE__*/function (_FakePreset2) {\n  _inherits(CreatorPreset, _FakePreset2);\n\n  function CreatorPreset() {\n    var _getPrototypeOf5;\n\n    var _this21;\n\n    _classCallCheck(this, CreatorPreset);\n\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    _this21 = _possibleConstructorReturn(this, (_getPrototypeOf5 = _getPrototypeOf(CreatorPreset)).call.apply(_getPrototypeOf5, [this].concat(args)));\n    _this21.is_randomizer_preset = false;\n    _this21.is_creator_preset = true;\n    _this21.preset_id = \"_creator\";\n    _this21.preset_name = \"<Creator>\";\n    return _this21;\n  }\n\n  return CreatorPreset;\n}(FakePreset);\n\nvar NameIdConverter = /*#__PURE__*/function () {\n  function NameIdConverter() {\n    _classCallCheck(this, NameIdConverter);\n  }\n\n  _createClass(NameIdConverter, null, [{\n    key: \"from_id_to_name\",\n    value: function from_id_to_name(id) {\n      assert(id);\n      var sep_regex = /[-_]/;\n      assert(\"--a-_-_--\".split(sep_regex).filter(Boolean).join(\"\") === \"a\");\n      var name = id.split(sep_regex).filter(Boolean).map(function (word) {\n        return word[0].toUpperCase() + word.slice(1);\n      }).join(\" \"); // console.log({id, name});\n\n      return name;\n    }\n  }, {\n    key: \"from_name_to_id\",\n    value: function from_name_to_id(name) {\n      assert(name);\n      var sep_regex = /[\\s-_]/;\n      assert(\"  -- a-  _-  _--\".split(sep_regex).filter(Boolean).join(\"\") === \"a\");\n      var id = name.split(sep_regex).filter(Boolean).join(NameIdConverter.white_space_seralized).toLowerCase(); // console.log({name, id});\n\n      return id;\n    }\n  }]);\n\n  return NameIdConverter;\n}();\n\nNameIdConverter.white_space_seralized = \"-\";\n\nfunction make_unique(arr) {\n  return Array.from(new Set(arr.filter(Boolean))).sort();\n} // TODO-later\n// What Preset values should be required before saving? What happens when the user sets some to ''?\n// TypeScript\n//  - Create a strict type for preset_id\n\n\nvar LinkSerializer = /*#__PURE__*/function () {\n  function LinkSerializer() {\n    _classCallCheck(this, LinkSerializer);\n  }\n\n  _createClass(LinkSerializer, null, [{\n    key: \"_to_base64\",\n    value: function _to_base64(str) {\n      var str__base64 = window.btoa(str);\n      assert(window.btoa(\"ab?\") === \"YWI/\");\n      str__base64 = str__base64.split(\"/\").join(\"_\");\n      assert(window.btoa(\"ab>\") === \"YWI+\");\n      str__base64 = str__base64.split(\"+\").join(\"-\");\n      return str__base64;\n    }\n  }, {\n    key: \"_from_base64\",\n    value: function _from_base64(str__base64) {\n      str__base64 = str__base64.split(\"_\").join(\"/\");\n      str__base64 = str__base64.split(\"-\").join(\"+\");\n      var str = window.atob(str__base64);\n      return str;\n    }\n  }, {\n    key: \"to_url\",\n    value: function to_url(preset) {\n      assert(preset instanceof Preset);\n      assert(preset.is_saved_preset);\n      var preset_string = PresetSerializer.serialize_preset(preset);\n\n      var preset_base64 = this._to_base64(preset_string);\n\n      var url_base = window.location.href.split(\"#\")[0];\n      var preset_id = preset.preset_id;\n      var name_encoded = encodeURIComponent(preset_id); // @ts-ignore\n\n      assert.warning(name !== name_encoded, {\n        name: name,\n        name_encoded: name_encoded\n      });\n      var link = url_base + \"#\" + name_encoded + \"/\" + preset_base64;\n      return link;\n    }\n  }, {\n    key: \"from_url\",\n    value: function from_url() {\n      var preset_url = window.location.href;\n      var pipe_data = preset_url.split(\"#\")[1];\n\n      if (!pipe_data) {\n        return null;\n      } // Old Clock Tab URL for fullscreen mode\n\n\n      if ([\"/fullscreen\", \"fullscreen\"].includes(pipe_data)) {\n        return null;\n      } // Not sure why some users have a Data URI appended to their URL\n\n\n      if (pipe_data.startsWith(\"data:image\")) {\n        return null;\n      }\n\n      pipe_data = pipe_data.split(\"/\").filter(Boolean)[1];\n\n      if (!pipe_data) {\n        return null;\n      }\n\n      try {\n        pipe_data = this._from_base64(pipe_data);\n      } catch (err) {\n        on_error(err);\n        return null;\n      }\n\n      var preset_data;\n\n      try {\n        preset_data = PresetSerializer.deserialize_preset(pipe_data);\n      } catch (err) {\n        on_error(err);\n        return null;\n      }\n\n      return preset_data;\n\n      function on_error(err) {\n        show_toast(\"Wrong URL. The URL could not be processed.\", {\n          is_error: true\n        });\n        track_error({\n          name: \"preset_url_parsing\",\n          value: pipe_data,\n          err: err\n        });\n        console.log(pipe_data);\n        console.error(err);\n      }\n    }\n  }]);\n\n  return LinkSerializer;\n}();","\"use strict\";\n\nimport { migrate_ancient_schema } from \"./migrations/001-ancient-schema\";\nimport { migrate_user_preset_ids_and_values } from \"./migrations/002-migrate-user-preset-ids-and-values\";\nimport { migrate_subapp_id } from \"./migrations/003-migrate-subapp-id\";\nimport { migrate_old_timer_tab_schema } from \"./migrations/004-migrate-old-timer-tab-schema\";\nimport { migrate_to_centralized_store } from \"./migrations/005-migrate-to-centralized-store\";\nimport { store } from \"../store\";\nimport assert from \"@brillout/assert\";\nexport { run_migrations };\n\nfunction run_migrations() {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  var migrators = [migrate_ancient_schema, migrate_user_preset_ids_and_values, migrate_subapp_id, migrate_old_timer_tab_schema, migrate_to_centralized_store];\n  var schema_version__curent = store.get_schema_version();\n  assert(schema_version__curent.constructor === Date);\n  migrators.forEach(function (migrator, i) {\n    var schema_version = migrator.schema_version;\n    assert(schema_version.constructor === Date);\n    assert(i === migrators.length - 1 || schema_version.getTime() < migrators[i + 1].schema_version.getTime());\n\n    if (schema_version__curent.getTime() < schema_version.getTime()) {\n      migrator();\n      store.set_schema_version(schema_version);\n    }\n  });\n}","\"use strict\";\n\nexport { PRESETS };\nvar PRESETS = {\n  classic: {\n    timer_background_color: \"#FFFFFF\",\n    timer_youtube_alarm: \"https://youtu.be/PS5KAEgrtMA\"\n  },\n  dark: {\n    // Alternatives\n    // - https://imgur.com/a/9s0S6Ba\n    timer_background_image: \"https://i.imgur.com/lornMTz.jpg\",\n    timer_youtube_alarm: \"https://www.youtube.com/watch?v=ziX9i7VKLQU\"\n  },\n  miami_night: {\n    timer_background_image: \"https://i.imgur.com/3lWI71b.jpg\",\n    // Original: https://www.youtube.com/watch?v=zZ0zPbh1QHE&feature=youtu.be&t=78\n    timer_youtube_alarm: \"https://www.youtube.com/watch?v=V6bhe6kiUko&t=78\"\n  },\n  the_machine: {\n    timer_background_image: \"https://i.imgur.com/hBLBrCy.jpg\",\n    timer_youtube_alarm: \"https://youtu.be/nUtAWeSK28g?t=97\"\n  }\n};","\"use strict\";\n\nimport ml from \"./js/ml\";\nimport assert from \"@brillout/assert\";\nimport { TabSettings } from \"../../tab-utils/TabSettings\";\nimport { PRESETS } from \"./PRESETS\";\nimport { preset_concept_name } from \"./js/preset_concept_name\";\nimport { youtubeSetUrl } from \"./js/notify/youtubeAlarm\";\nexport { init_timer_settings };\n/*\nimport {dom_beat} from './load_clock';\nimport {refresh_big_text_size} from '../../BigText';\n*/\n\nfunction init_timer_settings() {\n  var tab_settings = new TabSettings({\n    option_spec_list: get_option_list(),\n    preset_spec_list: PRESETS,\n    on_any_change: on_any_change,\n    enable_import_export: true,\n    subapp_id: \"timer\",\n    preset_concept_name: preset_concept_name\n  });\n  var get_option_value = tab_settings.get_option_value.bind(tab_settings);\n  tab_settings.generate_dom();\n  return {\n    get_option_value: get_option_value\n  };\n\n  function on_any_change(_ref) {\n    var is_initial_run = _ref.is_initial_run;\n    update_youtube_url();\n    ml.htmlBackgroundListener();\n  }\n\n  function update_youtube_url() {\n    var youtube_url = get_option_value(\"timer_youtube_alarm\");\n    assert(youtube_url.constructor === String, {\n      youtube_url: youtube_url\n    });\n    youtubeSetUrl(youtube_url);\n  }\n}\n\nfunction get_option_list() {\n  return [{\n    option_id: \"timer_theme\",\n    option_type: \"preset-input\",\n    option_description: preset_concept_name,\n    option_default: \"_creator\"\n    /*get_default_theme()*/\n\n  }, {\n    option_id: \"timer_background_image\",\n    option_type: \"background-image-input\",\n    option_description: \"Background Image\",\n    option_default: \"\",\n    option_placeholder: \"Image URL\",\n    is_creator_option: true\n  }, {\n    option_id: \"timer_background_color\",\n    option_type: \"background-color-input\",\n    option_description: \"Background Color\",\n    option_default: \"#ffffff\",\n    is_creator_option: true\n  }, {\n    option_id: \"timer_youtube_alarm\",\n    option_type: \"text-input\",\n    option_description: \"YouTube Alarm\",\n    option_default: \"https://youtu.be/PS5KAEgrtMA\",\n    option_placeholder: \"Youtube URL Address\",\n    is_creator_option: true\n  }];\n}\n/*\nfunction get_default_theme() {\n  return is_dark_mode() ? \"dark\" : \"classic\";\n}\n*/","import load_timer from \"./js/load_timer\";\nimport { init_timer_settings } from \"./init_timer_settings\";\nimport auto_remove_hash from \"../../tab-utils/auto_remove_hash\";\nimport { adSlots } from \"./adSlots\";\nimport { audioPrefetch } from \"./js/notify/audioAlarm\";\nimport { youtubePrefetch } from \"./js/notify/youtubeAlarm\";\nimport { loadAds } from \"../../tab-utils/ads/loadAds\";\n\nexport default onPageLoad;\n\nasync function onPageLoad(load_common) {\n  init_timer_settings();\n\n  load_timer();\n\n  auto_remove_hash();\n\n  load_common();\n\n  youtubePrefetch();\n\n  audioPrefetch();\n\n  loadAds(adSlots);\n}\n\n/* TODO\nimport deprecate_old_browsers from '../../tab-utils/deprecate_old_browsers';\n  deprecate_old_browsers({projectName: 'Timer Tab', email: 'tim'+'ertab@br'+'illout.com'});\n*/\n","import TimerView from \"./TimerView\";\nimport onPageLoad from \"./onPageLoad\";\nimport { config } from \"../../tab-utils/views/FullViewWrapper\";\n\nexport default config({\n  route: \"/\",\n  view: TimerView,\n\n  // <title>⌛ Online Timer</title>\n  title: \"Timer Tab\",\n\n  head: [\n    // '<meta name=\"keywords\" content=\"timer, alarm, stopwatch, countdown, alarm clock, online, webapp\"/>'\n    '<meta name=\"keywords\" content=\"online timer\"/>',\n\n    //  http://stackoverflow.com/questions/5437674/what-utf-8-symbol-is-a-good-mark-of-time\n    //  ➡ ➔ ➤ → ⟹  ⟶   •★ ⌚ ⚑ ⌛ ™ ♬ ♩♪♫\n    // <meta property=\"og:description\" itemprop=\"description\" name=\"description\" content=\"★★★★★ Free Online Web App: •Timer Countdown •Alarm Clock •Stopwatch\" />\n    // <meta property=\"og:description\" itemprop=\"description\" name=\"description\" content=\"★★★★★ Timer Tab™ is a free online Web App for: ⌛ Timer Countdown, ⌚ Alarm Clock, and ⚑ Stopwatch. Featuring aesthetic & simple Design, 4.6/5 stars on the Web Store.\" />\n    // <meta property=\"og:description\" itemprop=\"description\" name=\"description\" content=\"⌛ Online Timer Countdown + ⌚ Online Alarm Clock + ⚑ Online Stopwatch\" />\n    '<meta property=\"og:description\" itemprop=\"description\" name=\"description\" content=\"Web App: Online Timer Countdown + Online Alarm Clock + Online Stopwatch\" />',\n  ],\n  onPageLoad,\n});\n","\"use strict\";\n\nimport Cookies from \"js-cookie\";\nvar EZOIC_COOKIE_NAME = \"disable_ezoic_ads\";\nexport { disable_ezoic };\nexport { enable_ezoic };\n\nfunction disable_ezoic() {\n  var TEN_YEARS = 365 * 10;\n  Cookies.set(EZOIC_COOKIE_NAME, \"yes\", {\n    expires: TEN_YEARS\n  });\n}\n\nfunction enable_ezoic() {\n  Cookies.remove(EZOIC_COOKIE_NAME);\n}","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { track_event } from \"./views/common/tracker\";\nimport assert from \"@brillout/assert\";\nexport { loadScript };\nvar LOAD_TIMEOUT = 5;\n\nfunction loadScript(_x, _x2) {\n  return _loadScript.apply(this, arguments);\n}\n\nfunction _loadScript() {\n  _loadScript = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(scriptUrl, scriptName) {\n    var alreadyResolved, hasTimedOut, resolve, promise, scriptEl;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            assert(scriptUrl.startsWith(\"https://\"));\n            alreadyResolved = false;\n            hasTimedOut = false;\n            promise = new Promise(function (r) {\n              return resolve = r;\n            });\n            scriptEl = document.createElement(\"script\");\n            scriptEl.src = scriptUrl;\n            scriptEl.async = true;\n\n            scriptEl.onload = function () {\n              resolve(true);\n              trackLoadState(true, true, hasTimedOut, scriptUrl, scriptName);\n              alreadyResolved = true;\n            };\n\n            scriptEl.onerror = function () {\n              resolve(false);\n              trackLoadState(false, true, hasTimedOut, scriptUrl, scriptName);\n              alreadyResolved = true;\n            };\n\n            document.getElementsByTagName(\"head\")[0].appendChild(scriptEl);\n            setTimeout(function () {\n              if (alreadyResolved) {\n                return;\n              }\n\n              resolve(false);\n              hasTimedOut = true;\n              trackLoadState(false, false, hasTimedOut, scriptUrl, scriptName);\n            }, LOAD_TIMEOUT * 1000);\n            return _context.abrupt(\"return\", promise);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadScript.apply(this, arguments);\n}\n\nfunction trackLoadState(success, resolved, hasTimedOut, scriptUrl, scriptName) {\n  var loadState;\n\n  if (!resolved) {\n    assert(!success);\n    assert(hasTimedOut);\n    loadState = \"timeout\";\n  } else {\n    if (success) {\n      loadState = \"loaded\";\n    } else {\n      loadState = \"failed\";\n    }\n\n    if (hasTimedOut) {\n      loadState += \" [after-timeout]\";\n    }\n  }\n\n  var name = \"[\".concat(scriptName, \"] \").concat(scriptUrl, \" \").concat(loadState);\n  track_event({\n    name: name\n  });\n}","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport assert from \"@brillout/assert\";\nimport { store } from \"../store\";\nimport { track_event, get_number_of_visits_in_the_last_24_hours } from \"../views/common/tracker\";\nimport { get_browser_name } from \"../utils/get_browser_info\";\nimport { disable_ezoic, enable_ezoic } from \"./ezoic\";\nimport { getElementScrollPos, addScrollListener } from \"../pretty_scroll_area\";\nimport { loadScript } from \"../loadScript\";\nimport { isAdsense, isGpt, getGptSlots, getAdsenseSlots, isEzoic } from \"./slots\";\nexport { loadAds };\nexport { user_donated };\nexport var AD_REMOVAL_KEY = \"ad_removal\";\nexport { disableAds };\nvar SHOW_DELAY = 1.3;\ninitAds();\n\nfunction initAds() {\n  if (is_nodejs()) {\n    return;\n  }\n\n  thanks_page_redirection();\n  var donated = user_donated();\n\n  if (donated) {\n    document.documentElement.classList.add(\"user-donated\");\n  }\n\n  if (donated) {\n    disable_ezoic();\n  } else {\n    enable_ezoic();\n  }\n}\n\nfunction loadAds(_x) {\n  return _loadAds.apply(this, arguments);\n}\n\nfunction _loadAds() {\n  _loadAds = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(adSlots) {\n    var noAds, success;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (dont_show_ads(adSlots)) {\n              noAds = true;\n            }\n\n            if (noAds) {\n              _context.next = 19;\n              break;\n            }\n\n            if (!isEzoic(adSlots)) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 5;\n            return loadAdsenseCode();\n\n          case 5:\n            success = _context.sent;\n            _context.next = 18;\n            break;\n\n          case 8:\n            if (!isAdsense(adSlots)) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 11;\n            return loadAdsense(adSlots);\n\n          case 11:\n            success = _context.sent;\n            _context.next = 18;\n            break;\n\n          case 14:\n            if (!isGpt(adSlots)) {\n              _context.next = 18;\n              break;\n            }\n\n            _context.next = 17;\n            return loadGpt(adSlots);\n\n          case 17:\n            success = _context.sent;\n\n          case 18:\n            if (!success) noAds = true;\n\n          case 19:\n            if (noAds) {\n              document.documentElement.classList.add(\"no-ads\");\n            } else {\n              setTimeout(function () {\n                document.documentElement.classList.add(\"show-ads\");\n                enable_floating_ads();\n              }, SHOW_DELAY * 1000);\n            }\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadAds.apply(this, arguments);\n}\n\nfunction disableAds() {\n  store.set_val(AD_REMOVAL_KEY, true);\n  disable_ezoic();\n}\n\nfunction loadGpt(_x2) {\n  return _loadGpt.apply(this, arguments);\n}\n\nfunction _loadGpt() {\n  _loadGpt = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(adSlots) {\n    var gptSlots, success;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            gptSlots = getGptSlots(adSlots);\n            assert(gptSlots.length > 0);\n            _context2.next = 4;\n            return loadScript(\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\", \"gpt\");\n\n          case 4:\n            success = _context2.sent;\n\n            if (success) {\n              window.googletag = window.googletag || {\n                cmd: []\n              };\n              window.googletag.cmd.push(function () {\n                gptSlots.forEach(function (_ref) {\n                  var slot_id = _ref.slot_id,\n                      adName = _ref.adName,\n                      slotSize = _ref.slotSize;\n                  assert(slot_id.constructor === String);\n                  assert(adName.constructor === String);\n                  assert(slotSize.length === 2 && slotSize[0].constructor === Number && slotSize[1].constructor === Number);\n                  window.googletag.defineSlot(adName, slotSize, slot_id).addService(window.googletag.pubads());\n                });\n                window.googletag.pubads().enableSingleRequest();\n                window.googletag.enableServices();\n                gptSlots.forEach(function (_ref2) {\n                  var slot_id = _ref2.slot_id;\n                  window.googletag.cmd.push(function () {\n                    window.googletag.display(slot_id);\n                  });\n                });\n              });\n            }\n\n            return _context2.abrupt(\"return\", success);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadGpt.apply(this, arguments);\n}\n\nfunction loadAdsense(_x3) {\n  return _loadAdsense.apply(this, arguments);\n}\n\nfunction _loadAdsense() {\n  _loadAdsense = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(adSlots) {\n    var adsenseSlots, success;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            adsenseSlots = getAdsenseSlots(adSlots);\n            assert(adsenseSlots.length > 0);\n            _context3.next = 4;\n            return loadAdsenseCode();\n\n          case 4:\n            success = _context3.sent;\n\n            if (success) {\n              window.adsbygoogle = window.adsbygoogle || [];\n              adsenseSlots.forEach(function () {\n                window.adsbygoogle.push({});\n              });\n            }\n\n            return _context3.abrupt(\"return\", success);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadAdsense.apply(this, arguments);\n}\n\nfunction loadAdsenseCode() {\n  return _loadAdsenseCode.apply(this, arguments);\n} // Since Clock/Timer Tab's source code is open anyone can read this and bypass doing a donation to remove ads.\n// If you are short on money then you are more than welcome to do this :-).\n\n\nfunction _loadAdsenseCode() {\n  _loadAdsenseCode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n    var success;\n    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return loadScript(\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\", \"adsense\");\n\n          case 2:\n            success = _context4.sent;\n            return _context4.abrupt(\"return\", success);\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadAdsenseCode.apply(this, arguments);\n}\n\nvar _user_donated;\n\nfunction user_donated() {\n  assert(!is_nodejs());\n\n  if (_user_donated !== undefined) {\n    assert([true, false].includes(_user_donated));\n    return _user_donated;\n  }\n\n  _user_donated = check_donation();\n  assert([true, false].includes(_user_donated));\n  return _user_donated;\n\n  function check_donation() {\n    return store.has_val(AD_REMOVAL_KEY);\n  }\n}\n\nfunction thanks_page_redirection() {\n  if (window.location.hash === \"#thanks-for-your-donation\") {\n    window.location.href = window.location.origin + \"/thanks\";\n  }\n}\n\nfunction dont_show_ads(adSlots) {\n  var disableReason = user_donated() && \"user_has_donated\" || is_small_screen() && \"screen_too_small\" || ad_blocker_detected() && \"ad_blocker_detected\";\n\n  if (!disableReason && !isEzoic(adSlots)) {\n    disableReason = is_fringe_browser() && \"fringe_browser\" || is_too_many_visits() && \"too_many_visits\";\n  }\n\n  if (disableReason) {\n    trackDisableReason(disableReason);\n  }\n\n  return !!disableReason;\n}\n\nfunction trackDisableReason(disableReason) {\n  var value;\n\n  if (disableReason === \"fringe_browser\") {\n    value = get_browser_name();\n  }\n\n  if (disableReason === \"screen_too_small\") {\n    value = JSON.stringify(get_screen_size());\n  }\n\n  track_event({\n    name: \"[adsense] disabled: \" + disableReason,\n    value: value\n  });\n}\n\nfunction is_too_many_visits() {\n  if (get_number_of_visits_in_the_last_24_hours() >= 8) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction is_small_screen() {\n  var _get_screen_size = get_screen_size(),\n      width = _get_screen_size.width; // Same as CSS media query\n\n\n  return width <= 700;\n}\n\nfunction get_screen_size() {\n  var _window$screen = window.screen,\n      width = _window$screen.width,\n      height = _window$screen.height;\n  assert(Number.isInteger(width) && width > 0 && Number.isInteger(height) && height > 0, {\n    width: width,\n    height: height\n  });\n  return {\n    width: width,\n    height: height\n  };\n}\n\nfunction is_fringe_browser() {\n  var browser_name = get_browser_name();\n  return ![\"chrome\", \"chromium\", \"safari\", \"firefox\", \"internet explorer\", \"opera\", \"edge\", \"microsoft edge\"].includes(browser_name.toLowerCase());\n}\n\nvar _ad_blocker_is_installed;\n\nfunction ad_blocker_detected() {\n  assert(!is_nodejs());\n\n  if (_ad_blocker_is_installed !== undefined) {\n    return _ad_blocker_is_installed;\n  }\n\n  var ad_blocker_test = document.createElement(\"div\"); // hide\n\n  ad_blocker_test.style.position = \"absolute\";\n  ad_blocker_test.style.visibility = \"hidden\";\n  ad_blocker_test.style.pointerEvents = \"none\";\n  ad_blocker_test.innerHTML = \"some_text\"; // Ad blockers hide elements with that class\n\n  ad_blocker_test.className = \"adsbygoogle\";\n  document.body.appendChild(ad_blocker_test);\n  _ad_blocker_is_installed = ad_blocker_test.offsetHeight === 0;\n  document.body.removeChild(ad_blocker_test);\n  return _ad_blocker_is_installed;\n}\n\nfunction is_nodejs() {\n  return typeof window === \"undefined\";\n}\n\nfunction enable_floating_ads() {\n  Array.from(document.querySelectorAll(\".is_floating\")).forEach(function (el) {\n    var positionOriginal = el.style.position;\n    var topOriginal = el.style.top;\n    var leftOriginal = el.style.left;\n    var oldPosition = positionOriginal;\n    var positionTopOriginal;\n    var isFixedLayout = false;\n    addScrollListener(function (scrollPos) {\n      assert(scrollPos >= 0);\n\n      var _getElementScrollPos = getElementScrollPos(el),\n          positionLeft = _getElementScrollPos.positionLeft,\n          positionTop = _getElementScrollPos.positionTop;\n\n      if (isFixedLayout) {\n        assert(positionTopOriginal >= 0);\n        isFixedLayout = scrollPos > positionTopOriginal;\n      } else {\n        isFixedLayout = scrollPos > positionTop;\n        positionTopOriginal = positionTop;\n      }\n\n      var newPosition = isFixedLayout ? \"fixed\" : positionOriginal;\n\n      if (newPosition !== oldPosition) {\n        if (newPosition === \"fixed\") {\n          el.style.position = newPosition;\n          el.style.top = \"0px\";\n          el.style.left = positionLeft + \"px\";\n        } else {\n          el.style.position = positionOriginal;\n          el.style.top = topOriginal;\n          el.style.left = leftOriginal;\n        }\n\n        oldPosition = newPosition;\n      }\n    }, {\n      fireInitialScroll: true,\n      onlyUserScroll: false\n    });\n  });\n}"],"sourceRoot":""}